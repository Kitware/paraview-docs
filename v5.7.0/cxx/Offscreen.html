<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParaView: ParaView and Offscreen Rendering</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="height: 56px;">
  <div class="pv-title-cpp title-line">
    <div class="title-line">
      <img class="pv-logo" src="paraview-logo-small.png" />
    </div>
    <div class="langSwitch title-line"></div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ParaView and Offscreen Rendering </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>ParaView is often used to render visualization results. While in most cases, the results are presented to the users on their screens or monitors, there are cases when this is not required. For example, if running a batch script to generate several images, one may not care to see windows flashing in front of them while the results are being generated. Another use-case is when using a <b>pvserver</b> or <b>pvrenderserver</b> to render images remotely and having them sent back to the client for viewing. The server-side windows are do not serve any useful purpose in that mode. In other cases, showing a window may not be possible at all, for example on certain Linux clusters, one may not have access to an X server at all, in which case on-screen rendering is just not possible (this is also referred to as headless operating mode).</p>
<p>This page documents the onscreen, offscreen, and headless rendering support in ParaView.</p>
<h2>Caveats</h2>
<p>In this page, we limit ourselves to a Linux-based system. On Windows and macOS, offscreen support is available, but true headless operation is currently not widely used and hence left out of this discussion.</p>
<h2>Terminology</h2>
<p>A brief explanation of the terms:</p>
<ul>
<li><b>Desktop Qt client</b>: This refers to the Qt-based GUI. This is launched using the <b>paraview</b> executable.</li>
<li><b>Command line executables</b>: This refers to all other ParaView executables, e.g. <b>pvserver</b>, <b>pvdataserver</b>, <b>pvrenderserver</b>, <b>pvpython</b>, and <b>pvbatch</b>.</li>
<li><b>Onscreen</b>: Onscreen refers to the case where the rendering results are presented to the users in a viewable window. On Linux, this invariably requires a running and accessible X server. The desktop Qt client can only operate in on-screen mode and hence needs an accessible X server.</li>
<li><b>Offscreen</b>: Offscreen simply means that the rendering results are not presented to the user in a window. On Linux, this does not automatically imply that an accessible X server is not needed. X server may be needed, unless ParaView was built with an OpenGL implementation that allows for headless operation. This mode is not applicable to the desktop Qt client and is only supported by the command line executables.</li>
<li><b>Headless</b>: Headless rendering automatically implies offscreen rendering. In addition, on Linux, it implies that the rendering does not require an accessible X server nor will it make any X calls.</li>
</ul>
<p><b>Onscreen</b> and <b>offscreen</b> support is built by default. Thus ParaView binaries available from paraview.org support these modes. <b>Headless</b> support requires special builds of ParaView with runtime capabilities that are not widely available yet. Hence currently (as of ParaView 5.4) one has to build ParaView from source with special build flags to enable headless support.</p>
<h2>OpenGL Implementations</h2>
<p>ParaView uses OpenGL for rendering. OpenGL is an API specification for 2D/3D rendering. Many vendors provide implementations of this API, including those that build GPUs.</p>
<p>For sake of simplicity, let's classify OpenGL implementations as <b>hardware (H/W)</b> and <b>software (S/W)</b>. <b>H/W</b> includes OpenGL implementations provided by NVIDIA, ATI, Intel, Apple and others which typically use the system hardware infrastructure for rendering. The runtime libraries needed for these are available on the system. <b>S/W</b> currently includes Mesa3D &ndash; a software implementation of the OpenGL standard. Despite the names, H/W doesn't necessarily imply use of GPUs, nor does S/W imply exclusion of GPUs. Nonetheless we use this naming scheme as it has been prevalent.</p>
<h3>APIs for Headless Support</h3>
<p>Traditionally, OpenGL implementations are coupled with the window system to provide an OpenGL context. Thus, they are designed for non-headless operation. When it comes to headless operation, there are alternative APIs that an application can use to create the OpenGL context that avoid this dependency on the window system (or X server for the sake of this discussion).</p>
<p>Currently, ParaView supports two distinct APIs that are available for headless operation: <b>EGL</b> and <b>OSMesa</b> (also called <b>Offscreen Mesa</b>). It must be noted that headless support is a rapidly evolving area and changes are expected in coming months. Modern H/W OpenGL implementations support EGL while S/W (or Mesa) supports OSMesa. One has to build ParaView with specific CMake flags changed to enable either of these APIs. Which headless API you choose in your build depends on which OpenGL implementation you plan to use.</p>
<h2>ParaView Builds</h2>
<p>Before we look at the various ways you can build and use ParaView, let's summarize relevant CMake options available:</p>
<ul>
<li><p class="startli"><code>VTK_USE_X</code>: When ON, implies that ParaView can link against X libraries. This allows ParaView executables to create on-screen windows, if needed.</p>
<p class="startli">When <code>VTK_USE_X</code> is ON, these variables must be specified:</p><ul>
<li><code>OPENGL_INCLUDE_DIR</code>: Path to directory containing <code>GL/gl.h</code>.</li>
<li><code>OPENGL_gl_LIBRARY</code>: Path to <code>libGL.so</code>.</li>
<li><code>OpengL_glu_LIBRARY</code>: not needed for ParaView; leave empty.</li>
<li><code>OPENGL_xmesa_INCLUDE_DIR</code>: not needed for ParaView; leave empty.</li>
</ul>
</li>
<li><p class="startli"><code>VTK_OPENGL_HAS_OSMESA</code>: When ON, implies that ParaView can use OSMesa to support headless modes of operation.</p>
<p class="startli">When <code>VTK_OPENGL_HAS_OSMESA</code> is ON, these variables must be specified:</p><ul>
<li><code>OSMESA_INCLUDE_DIR</code>: Path to containing <code>GL/osmesa.h</code>.</li>
<li><code>OSMESA_LIBRARY</code>: Path to <code>libOSMesa.so</code></li>
</ul>
</li>
<li><p class="startli"><code>VTK_OPENGL_HAS_EGL</code>: When ON, implies that ParaView can use EGL to support headless modes of operation.</p>
<p class="startli">When <code>VTK_OPENGL_HAS_EGL</code> is ON, these variables must be specified:</p><ul>
<li><code>EGL_INCLUDE_DIR</code>: Path to directory containing <code>GL/egl.h</code>.</li>
<li><code>EGL_LIBRARY</code>: Path to <code>libEGL.so</code>.</li>
<li><code>EGL_opengl_LIBRARY</code>: Path to <code>libOpenGL.so</code>.</li>
</ul>
</li>
<li><code>PARAVIEW_BUILD_QT_GUI</code> indicates if the desktop Qt client should be built.</li>
</ul>
<p>All combinations of above options can be turned on or off independently except that presently <code>VTK_OPENGL_HAS_EGL</code> and <code>VTK_OPENGL_HAS_OSMESA</code> are mutually exclusive i.e. only one of the two can be ON at the same time. This is because the current version of Mesa (17.1.5) doesn't support EGL for OpenGL, it's only supported for OpenGL-ES.</p>
<p>A few things to note:</p><ul>
<li>If <code>VTK_OPENGL_HAS_EGL</code> or <code>VTK_OPENGL_HAS_OSMESA</code> is ON, the build supports headless rendering, otherwise <code>VTK_USE_X</code> must be ON and the build does not support headless, but can still support offscreen rendering.</li>
<li>If <code>VTK_USE_X</code> is OFF, then either <code>VTK_OPENGL_HAS_OSMESA</code> or <code>VTK_OPENGL_HAS_EGL</code> must be ON. Then the build does not support onscreen rendering, but only headless rendering.</li>
<li>If <code>PARAVIEW_BUILD_QT_GUI</code> is ON and <code>VTK_USE_X</code> is ON, while ParaView command line tools won't link against or use X calls, Qt will and hence an accessible X server is still needed to run the desktop client.</li>
<li>If <code>VTK_OPENGL_HAS_OSMESA</code> is ON, and <code>VTK_USE_X</code> is ON, then all the OpenGL and OSMesa variables should point to the Mesa libraries.</li>
<li>Likewise, if <code>VTK_OPENGL_HAS_EGL</code> is ON and <code>VTK_USE_X</code> is ON, then all the OpenGL and EGL variables should point to the system libraries providing both, typically the NVidia libraries.</li>
</ul>
<h2>Default Rendering Modes</h2>
<p>Since now it's possible to build ParaView with onscreen and headless support simultaneously, which type of render window the ParaView executable creates by default also needs some explanation.</p>
<ul>
<li>The ParaView desktop Qt client always creates an onscreen window using GLX calls via Qt.</li>
<li><code>pvserver</code>, <code>pvrenderserver</code> and <code>pvbatch</code> always create an offscreen render window. If built with headless support, it will be an offscreen-headless window. There are a few exceptions where it will create an onscreen window instead:<ul>
<li>if running in tile-display mode, i.e. <code>-tdx</code> or <code>-tdy</code> command line options are passed</li>
<li>if running in immersive mode e.g. CAVE</li>
<li>if <code>PV_DEBUG_REMOTE_RENDERING</code> environment is set</li>
<li>if <code>--force-onscreen-rendering</code> command line option is passed.</li>
</ul>
</li>
<li><code>pvpython</code> always creates an onscreen render window if built with onscreen support. The following are the exceptions when it creates offscreen (or headless if supported) render windows.<ul>
<li>if <code>--force-offscreen-rendering</code> command line option is passed.</li>
</ul>
</li>
</ul>
<p><code>--use-offscreen-rendering</code> command line option supported by ParaView 5.4 and earlier has now been deprecated and is interpreted as <code>--force-offscreen-rendering</code>. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
<!-- KW:BEGIN -->
<!-- this adds the version selection header -->
<script type="text/javascript" src="/paraview-docs/paraview-version.js"></script>
<!-- KW:END -->
</body>
</html>
