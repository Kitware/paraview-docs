<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParaView: ParaView-Catalyst Blueprint</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="height: 56px;">
  <div class="pv-title-cpp title-line">
    <div class="title-line">
      <img class="pv-logo" src="paraview-logo-small.png" />
    </div>
    <div class="langSwitch title-line"></div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ParaView-Catalyst Blueprint </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>This page is applicable to ParaView Catalyst implementation introduced in ParaView 5.9.</b> </p><hr/>
<h2>Background</h2>
<p>Starting with ParaView 5.9, ParaView distribution provides an implementation of the <a href="https://catalyst-in-situ.readthedocs.io/">Catalyst API</a>. This implementation is now referred to as <b>ParaView-Catalyst</b>. Thus, it an implementation of the Catalyst In Situ API that uses ParaView for data processing and rendering.</p>
<p>The Catalyst in situ API comprises for 3 main function calls that are used to pass data and control over to the Catalyst implementation from a computational simulation codes: <code>catalyst_initialize</code>, <code>catalyst_execute</code>, and <code>catalyst_finalize</code>. Each of these functions is passed a <a href="https://llnl-conduit.readthedocs.io/en/latest/tutorial_cpp_basics.html">Conduit Node</a> object. Conduit Node provides a flexible mechanism for describing hierarchical in-core scientific data. Since Conduit Node is simply a light-weight container, we need to define the conventions used to communicate relevant data in each of the Catalyst API calls. Such conventions are collectively referred to as the Blueprint. Each Catalyst API implementation can develop its own blueprint. ParaView-Catalyst, the Catalyst API implementation provided by ParaView, also defines its blueprint called the <b>ParaView-Catalyst Blueprint</b>. This page documents this blueprint.</p>
<h2>Protocol</h2>
<p>A blueprint often includes several protocols, each defining the conventions for a specific use-case. Since there are three main Catalyst API functions, the blueprint currently defines three protocols, one for each of the Catalyst API functions.</p>
<ul>
<li><b>protocol: 'initialize'</b>: defines the options accepted by <code>catalyst_initialize</code>; these include things like ParaView Python scripts to load.</li>
<li><b>protocol: 'execute'</b>: defines the protocol for <code>catalyst_execute</code> and includes information about Catalyst channels i.e. ports on which data is made available to in situ processing as well as the actual data from the simulation.</li>
<li><b>protocol: 'finalize'</b>: defines the protocol for <code>catalyst_finalize</code>; currently, this is empty.</li>
</ul>
<p>In each of the Catalyst API calls, ParaView looks for a top-level node named 'catalyst'. The expected children vary based on the protocol described in the following sub-sections.</p>
<p>These top-level protocols use other internal protocols e.g. 'channel'.</p>
<h3>protocol: 'initialize'</h3>
<p>Currently, 'initialize' protocol defines how to pass scripts to load for analysis.</p>
<ul>
<li>catalyst/scripts: (optional) if present must either be a 'list' or 'object' node with child nodes that provides paths to the Python scripts to load for in situ analysis.</li>
<li>catalyst/scripts/[name]: (optional) if present can be a 'string' or 'object'. If string, it is interpreted as path to the Python script. If 'object', can have following attributes.<ul>
<li>catalyst/scripts/[name]/filename: path to the Python script</li>
<li>catalyst/scripts/[name]/args: (optional) if present must be of type 'list' with each child node of type 'string'.</li>
</ul>
</li>
</ul>
<p>Additionally, one can provide a list of pre-compiled pipelines to use.</p>
<ul>
<li>catalyst/pipelines: (optional) if present must be a 'list' or 'object' node with child nodes that are objects that provide type and parameters for hard-coded pipelines to use. Each object must be in accordance to the protocol: 'pipeline'.</li>
</ul>
<p>In MPI-enabled builds, ParaView is by default initialized to use <code>MPI_COMM_WORLD</code> as the global communicator. A specific MPI communicator can be provided as follows:</p>
<ul>
<li>catalyst/mpi_comm: (optional) if present, must be an integer representing the Fortran handle for the MPI communicator to use. The Fortran handle can be obtained from <code>MPI_Comm</code> using <code>MPI_Comm_c2f()</code>.</li>
</ul>
<h3>protocol: 'execute'</h3>
<p>Defines now to communicate data during each time-iteration.</p>
<p><b>time/timestep/cycle</b>: this defines temporal information about the current invocation.</p>
<ul>
<li>catalyst/state/timestep: (optional) integral value for current timestep. if not specified, 'catalyst/cycle' is used.</li>
<li>catalyst/state/cycle: (optional) integral value for current cycle index, if not specified, 0 is assumed.</li>
<li>catalyst/state/time: (optional) float64 value for current time, if not specified, 0.0 is assumed.</li>
<li>catalyst/state/parameters: (optional) list of optional runtime parameters. If present, they must be of type 'list' with each child node of type 'string'.</li>
</ul>
<p><b>channels</b>: channels are used to communicate simulation data. The <b>channels</b> node can have one or more children, each corresponding to a named channel. A channel represents a data-source in the analysis pipeline that is linked to the data being produced by the simulation code.</p>
<ul>
<li>catalyst/channels/[channel-name]: (protocol: 'channel'): (optional) if present represents a named channel with the name 'channel-name'. The node must be an 'object' node satisfying the 'channel' protocol.</li>
</ul>
<p>The 'channel' protocol is as follows:</p>
<ul>
<li><p class="startli">channel/type: (required) a string representing the channel type. Currently, the only supported values are "mesh" and "multimesh".</p>
<p class="startli">"mesh" is used to indicate that this channel is specified in accordance to the <a href="https://llnl-conduit.readthedocs.io/en/latest/blueprint_mesh.html#">Conduit Mesh</a> protocol.</p>
<p class="startli">"multimesh" is an extension for multi-domain meshes (also called multiblocks) and is described later.</p>
</li>
<li>channel/data: (required) an object node used to communicate the simulation data on this channel. This node must match the protocol requirements identified by the 'channel/type'.</li>
<li>channel/state: (optional) fields to optionally override the catalyst/state temporal information channel/state/timestep: (optional) if present, overrides catalyst/state/timestep for this channel channel/state/cycle: (optional) if present, overrides catalyst/state/cycle for this channel channel/state/time: (optional) if present, overrides catalyst/state/time for this channel a channel will default to using the catalyst/state/ values for these parameters for each channel/state parameter not specified.</li>
</ul>
<h3>protocol: 'finalize'</h3>
<p>Currently, this is empty.</p>
<h3>protocol: 'pipeline'</h3>
<p>Defines type and parameters for a hard-coded pipeline.</p>
<ul>
<li>type: (required) a string identifying the type of the pipeline. Currently supported value is "io".</li>
</ul>
<p>When 'type' is 'io', the following attributes are supported.</p>
<ul>
<li>filename: (required) a string representing a filename. <code>{timestep}</code> may be used to replace with timestep or <code>{time}</code> may be used to replace with time value. You can use <code>fmt</code> style format specifiers e.g. <code>{time:03f}</code> etc. The filename may be used to determine which supported writer to use for saving the data.</li>
<li>channel: (required) a string identifying the channel by its name.</li>
</ul>
<h3>protocol: 'multimesh'</h3>
<p>This is the protocol used for the 'channel/data' when the 'channel/type' is set to "multimesh".</p>
<ul>
<li>channel/data/[block-name]: (protocol: 'mesh'): (optional) if present, represents an individual mesh/block described using the <a href="https://llnl-conduit.readthedocs.io/en/latest/blueprint_mesh.html#">Conduit Mesh</a> protocol. This can be repeated for multiple blocks. 'block-name' must be unique for each blocks.</li>
<li>channel/assembly: (optional) if present, can be used to define arbitrary hierarchical relationships between individual meshes/blocks in the mutlimesh. For example, for two blocks named <code>blockA</code> and <code>blockB</code>, following is a possible hierarchy. Thus all nodes are either object, list or string, and if string, must refer to a valid block name.</li>
</ul>
<pre class="fragment">  channel/assembly/
                   AllBlocks: ["blockA", "blockB"]
                   BlockA: "blockA"
                   BlockB: "blockB"
                   SubGroup/
                          AnotherChild: "blockA"</pre> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13 on Mon Aug 22 2022
</small></address>
<!-- KW:BEGIN -->
<!-- this adds the version selection header -->
<script type="text/javascript" src="/paraview-docs/paraview-version.js"></script>
<!-- KW:END -->
</body>
</html>
