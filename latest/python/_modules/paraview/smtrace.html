<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>paraview.smtrace &mdash; ParaView/Python 5.12.1-1406-gaa27439101 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/pvIcon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          <ul>
            <li> <a href="../../index.html">
              <img src="../../_static/paraview-logo-small.png"
              alt="ParaView/Python"></img></a> </li>
            <li class="version"> version 5.12.1-1406-gaa27439101</li>
          </ul>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../quick-start.html">Quick-Start :  A Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.html">The ParaView Python Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.simple.html">simple</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.servermanager.html">servermanager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.catalyst.html">catalyst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.coprocessing.html">coprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.benchmark.html">benchmark</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.servermanager_proxies.html">Available readers, sources, writers, filters and animation cues</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api-changes.html">API Changes between ParaView versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ParaView/Python</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <a href="../../genindex.html" class="float-right">Index</a> 
          <li><a href="../index.html">Module code</a> &raquo;</li>
      <li>paraview.smtrace</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for paraview.smtrace</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;smtrace module is used along with vtkSMTrace to generate Python trace for</span>
<span class="sd">ParaView. While this module is primarily designed to be used from the ParaView</span>
<span class="sd">GUI, Python scripts can use this module too to generate trace from the script</span>
<span class="sd">executed.</span>

<span class="sd">Typical usage is as follows::</span>

<span class="sd">    from paraview import smtrace</span>
<span class="sd">    config = smtracer.start_trace()</span>

<span class="sd">    # config is an instance of vtkSMTrace. One can setup properties on this</span>
<span class="sd">    # object to control  the generated trace. e.g.</span>
<span class="sd">    config.SetFullyTraceSupplementalProxies(True)</span>

<span class="sd">    # do the actions to trace.</span>
<span class="sd">        ...</span>

<span class="sd">    # stop trace. The generated trace is returned.</span>
<span class="sd">    txt = smtracer.stop_trace()</span>

<span class="sd">=========================</span>
<span class="sd">Developer Documentation</span>
<span class="sd">=========================</span>

<span class="sd">This section describes the module design for developers wanted to extend this</span>
<span class="sd">module or use this module for advance tracing/state generation.</span>

<span class="sd">The design can be described as follows:</span>

<span class="sd">C++ code (either in ServerManager or the GUI layer) should trace actions.</span>
<span class="sd">This is done using SM_SCOPED_TRACE() macro provided by vtkSMTrace. When tracing</span>
<span class="sd">is enabled, each SM_SCOPED_TRACE() call creates a :class:`.TraceItem`. The TraceItem</span>
<span class="sd">instance is scoped, i.e. the object is finalized and destroyed when the scope</span>
<span class="sd">exits.</span>

<span class="sd">There are various types of TraceItem, ranging from those that trace specific</span>
<span class="sd">action such as :class:`.Show`, or those that trace any modified properties</span>
<span class="sd">(:class:`.PropertiesModified`). Generic TraceItem types, such as</span>
<span class="sd">:class:`.CallMethod` and :class:`.CallFunction` can be used to trace methods</span>
<span class="sd">called on vtkObject instances or functions in the global namespace.</span>

<span class="sd">TraceItems create or use :class:`.Accessor` instances. Accessors are objects</span>
<span class="sd">created for Proxies and Properties in ParaView. Accessor knows how to access</span>
<span class="sd">that proxy or property in the Python trace. TraceItems that create new proxies</span>
<span class="sd">such as :class:`.RegisterPipelineProxy` and :class:`.RegisterViewProxy`, create</span>
<span class="sd">new :class:`.ProxyAccessor` instances. Other such as</span>
<span class="sd">:class:`.PropertiesModified` trace item rely on accessors already created.</span>
<span class="sd">:class:`.Trace` can provide access to already created accessor as well as create</span>
<span class="sd">new accessor for proxies create before the tracing began</span>
<span class="sd">(:meth:`.Trace.get_accessor`).</span>

<span class="sd">Additionally, there are filters such as :class:`.ProxyFilter`,</span>
<span class="sd">:class:`.PipelineProxyFilter`, etc. which are used to filter properties that get</span>
<span class="sd">traced and where they get traced i.e. in constructor call or right after it.</span>

<span class="sd">===============================</span>
<span class="sd">Notes about references</span>
<span class="sd">===============================</span>

<span class="sd">RealProxyAccessor keeps a hard reference to the servermanager.Proxy instance.</span>
<span class="sd">This is required. If we don&#39;t, then the Python object for vtkSMProxy also gets</span>
<span class="sd">garbage collected since there&#39;s no reference to it.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span>

<span class="kn">import</span> <span class="nn">weakref</span>
<span class="kn">import</span> <span class="nn">paraview.servermanager</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">import</span> <span class="nn">paraview.simple</span> <span class="k">as</span> <span class="nn">simple</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">paraview.vtk</span> <span class="kn">import</span> <span class="n">vtkTimeStamp</span>
<span class="kn">from</span> <span class="nn">paraview.modules.vtkRemotingCore</span> <span class="kn">import</span> <span class="n">vtkPVSession</span>

<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,):</span>
    <span class="n">xrange</span> <span class="o">=</span> <span class="nb">range</span>


<span class="k">def</span> <span class="nf">_get_skip_rendering</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">sm</span><span class="o">.</span><span class="n">vtkSMTrace</span><span class="o">.</span><span class="n">GetActiveTracer</span><span class="p">()</span><span class="o">.</span><span class="n">GetSkipRenderingComponents</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">_pretty_print</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pformat</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="n">pformat</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">offset</span><span class="p">))</span>

    <span class="c1"># now lets indent all of the lines based on prefix length</span>
    <span class="n">spaces</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">offset</span>
    <span class="k">return</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">spaces</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">txt</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">))</span>


<div class="viewcode-block" id="TraceOutput"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceOutput">[docs]</a><span class="k">class</span> <span class="nc">TraceOutput</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Internal class used to collect the trace output. Everytime anything is pushed into</span>
<span class="sd">    this using the append API, we ensure that the trace is updated. Trace</span>
<span class="sd">    doesn&#39;t put commands to the trace-output as soon as modifications are noticed</span>
<span class="sd">    to try to consolidate the state changes.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">if</span> <span class="n">data</span> <span class="k">else</span> <span class="kc">None</span>

<div class="viewcode-block" id="TraceOutput.append"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceOutput.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__data</span> <span class="o">+=</span> <span class="n">data</span>
            <span class="c1"># print (&quot;\n&quot;.join(data),&quot;\n&quot;)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>
            <span class="c1"># print (data,&quot;\n&quot;)</span>

<div class="viewcode-block" id="TraceOutput.append_separator"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceOutput.append_separator">[docs]</a>    <span class="k">def</span> <span class="nf">append_separator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="TraceOutput.append_separated"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceOutput.append_separated">[docs]</a>    <span class="k">def</span> <span class="nf">append_separated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append_separator</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__data</span><span class="p">)</span>

<div class="viewcode-block" id="TraceOutput.raw_data"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceOutput.raw_data">[docs]</a>    <span class="k">def</span> <span class="nf">raw_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data</span></div>

<div class="viewcode-block" id="TraceOutput.reset"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceOutput.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__data</span> <span class="o">=</span> <span class="p">[]</span></div></div>


<div class="viewcode-block" id="Trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Trace">[docs]</a><span class="k">class</span> <span class="nc">Trace</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">__REGISTERED_ACCESSORS</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">Output</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="Trace.reset"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Trace.reset">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Resets the Output and clears all register accessors.&quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">__REGISTERED_ACCESSORS</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span></div>

<div class="viewcode-block" id="Trace.get_registered_name"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Trace.get_registered_name">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_registered_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">reggroup</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the registered name for `proxy` in the given `reggroup`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetSessionProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetProxyName</span><span class="p">(</span><span class="n">reggroup</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span></div>

<div class="viewcode-block" id="Trace.get_varname"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Trace.get_varname">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_varname</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns a unique variable name given a suggested variable name. If</span>
<span class="sd">        the suggested variable name is already taken, this method will try to</span>
<span class="sd">        find a good suffix that&#39;s available.&quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_make_name_valid</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">+</span> <span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">original_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">suffix</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="c1"># build a set of existing variable names</span>
        <span class="n">varnameset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">accessor</span><span class="o">.</span><span class="n">Varname</span> <span class="k">for</span> <span class="n">accessor</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__REGISTERED_ACCESSORS</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
        <span class="k">while</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">varnameset</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">original_name</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span>
            <span class="n">suffix</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">name</span></div>

<div class="viewcode-block" id="Trace.register_accessor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Trace.register_accessor">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">register_accessor</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">accessor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Register an instance of an Accessor or subclass&quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">__REGISTERED_ACCESSORS</span><span class="p">[</span><span class="n">accessor</span><span class="o">.</span><span class="n">get_object</span><span class="p">()]</span> <span class="o">=</span> <span class="n">accessor</span></div>

<div class="viewcode-block" id="Trace.unregister_accessor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Trace.unregister_accessor">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">unregister_accessor</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">accessor</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">accessor</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__REGISTERED_ACCESSORS</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__REGISTERED_ACCESSORS</span><span class="p">[</span><span class="n">accessor</span><span class="o">.</span><span class="n">get_object</span><span class="p">()]</span></div>

<div class="viewcode-block" id="Trace.get_accessor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Trace.get_accessor">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_accessor</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns an accessor for obj. If none exists, a new one may be</span>
<span class="sd">        created, if possible. Currently obj is expected to be a</span>
<span class="sd">        :class:`servermanager.Proxy` instance. In the future, we may change this to</span>
<span class="sd">        be a vtkSMProxy instance instead.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">sm</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__REGISTERED_ACCESSORS</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="c1"># Create accessor if possible else raise</span>
            <span class="c1"># &quot;untraceable&quot; exception.</span>
            <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">create_accessor</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">selector</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__REGISTERED_ACCESSORS</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span>
            <span class="c1"># return &quot;&lt;unknown&gt;&quot;</span>
            <span class="k">raise</span> <span class="n">Untraceable</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> is not &#39;known&#39; at this point. Hence, we cannot trace &quot;</span> \
                <span class="s2">&quot;it. Skipping this action.&quot;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span></div>

<div class="viewcode-block" id="Trace.has_accessor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Trace.has_accessor">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">has_accessor</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__REGISTERED_ACCESSORS</span></div>

<div class="viewcode-block" id="Trace.create_accessor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Trace.create_accessor">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_accessor</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new accessor for a proxy. This returns True when a</span>
<span class="sd">        ProxyAccessor has been created, other returns False. This is needed to</span>
<span class="sd">        bring into trace proxies that were either already created when the trace</span>
<span class="sd">        was started or were created indirectly and hence not explicitly traced.&quot;&quot;&quot;</span>
        <span class="n">skip_rendering</span> <span class="o">=</span> <span class="n">_get_skip_rendering</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">sm</span><span class="o">.</span><span class="n">SourceProxy</span><span class="p">):</span>
            <span class="c1"># handle pipeline source/filter proxy.</span>
            <span class="n">pname</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;sources&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pname</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="n">simple</span><span class="o">.</span><span class="n">GetActiveSource</span><span class="p">():</span>
                    <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="n">obj</span><span class="p">)</span>
                    <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                        <span class="s2">&quot;# get active source.&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetActiveSource()&quot;</span> <span class="o">%</span> <span class="n">accessor</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="n">obj</span><span class="p">)</span>
                    <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                        <span class="s2">&quot;# find source&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = FindSource(&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">pname</span><span class="p">)])</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_rendering</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewProxy&quot;</span><span class="p">):</span>
            <span class="c1"># handle view proxy.</span>
            <span class="n">pname</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetSessionProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetProxyName</span><span class="p">(</span><span class="s2">&quot;views&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pname</span><span class="p">:</span>
                <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
                <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="n">obj</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="n">simple</span><span class="o">.</span><span class="n">GetActiveView</span><span class="p">():</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# get active view&quot;</span><span class="p">)</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetActiveViewOrCreate(&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ctor_args</span> <span class="o">=</span> <span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;, viewtype=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pname</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">())</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# find view&quot;</span><span class="p">)</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = FindViewOrCreate(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">ctor_args</span><span class="p">))</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_rendering</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMRepresentationProxy&quot;</span><span class="p">):</span>
            <span class="c1"># handle representations.</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;Input&quot;</span><span class="p">):</span>
                <span class="n">inputAccsr</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Input</span><span class="p">)</span>
                <span class="n">view</span> <span class="o">=</span> <span class="n">simple</span><span class="o">.</span><span class="n">LocateView</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                <span class="n">viewAccessor</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
                <span class="n">pname</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetSessionProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetProxyName</span><span class="p">(</span><span class="s2">&quot;representations&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pname</span><span class="p">:</span>
                    <span class="n">varname</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">Display&quot;</span> <span class="o">%</span> <span class="n">inputAccsr</span>
                    <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">varname</span><span class="p">),</span> <span class="n">obj</span><span class="p">)</span>
                    <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                        <span class="s2">&quot;# get display properties&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetDisplayProperties(</span><span class="si">%s</span><span class="s2">, view=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> \
                        <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">inputAccsr</span><span class="p">,</span> <span class="n">viewAccessor</span><span class="p">)])</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_rendering</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;lookup_tables&quot;</span><span class="p">):</span>
            <span class="n">pname</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;lookup_tables&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_create_accessor_for_tf</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">pname</span><span class="p">,</span> <span class="n">selector</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_rendering</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;piecewise_functions&quot;</span><span class="p">):</span>
            <span class="n">pname</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;piecewise_functions&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_create_accessor_for_tf</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">pname</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_rendering</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;transfer_2d_functions&quot;</span><span class="p">):</span>
            <span class="n">pname</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;transfer_2d_functions&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_create_accessor_for_tf</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">pname</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_rendering</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;scalar_bars&quot;</span><span class="p">):</span>
            <span class="c1"># trace scalar bar.</span>
            <span class="n">lutAccessor</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">LookupTable</span><span class="p">)</span>
            <span class="n">view</span> <span class="o">=</span> <span class="n">simple</span><span class="o">.</span><span class="n">LocateView</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="n">viewAccessor</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
            <span class="n">varname</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">ColorBar&quot;</span> <span class="o">%</span> <span class="n">lutAccessor</span><span class="p">)</span>
            <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
            <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> \
                <span class="s2">&quot;# get color legend/bar for </span><span class="si">%s</span><span class="s2"> in view </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">lutAccessor</span><span class="p">,</span> <span class="n">viewAccessor</span><span class="p">))</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span> \
                <span class="s2">&quot;GetScalarBar&quot;</span><span class="p">,</span>
                <span class="n">SupplementalProxy</span><span class="p">(</span><span class="n">ScalarBarProxyFilter</span><span class="p">()),</span>
                <span class="n">ctor_args</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">lutAccessor</span><span class="p">,</span> <span class="n">viewAccessor</span><span class="p">)))</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_rendering</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;animation&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_create_accessor_for_animation_proxies</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;RepresentationAnimationHelper&quot;</span><span class="p">:</span>
            <span class="n">sourceAccessor</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Source</span><span class="p">)</span>
            <span class="n">varname</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">RepresentationAnimationHelper&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sourceAccessor</span><span class="p">))</span>
            <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot; # get animation representation helper for &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sourceAccessor</span><span class="p">),</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetRepresentationAnimationHelper(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">sourceAccessor</span><span class="p">)])</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_rendering</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;layouts&quot;</span><span class="p">):</span>
            <span class="n">view</span> <span class="o">=</span> <span class="n">simple</span><span class="o">.</span><span class="n">GetActiveView</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">view</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">GetViewLocation</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">viewAccessor</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
                <span class="n">varname</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;layouts&quot;</span><span class="p">))</span>
                <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                    <span class="s2">&quot;# get layout&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetLayout()&quot;</span> <span class="o">%</span> <span class="n">accessor</span><span class="p">])</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">varname</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;layouts&quot;</span><span class="p">))</span>
                <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                    <span class="s2">&quot;# get layout&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetLayoutByName(</span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;layouts&quot;</span><span class="p">))])</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMTimeKeeperProxy&quot;</span><span class="p">):</span>
            <span class="n">tkAccessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;timekeeper&quot;</span><span class="p">)),</span> <span class="n">obj</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# get the time-keeper&quot;</span><span class="p">,</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetTimeKeeper()&quot;</span> <span class="o">%</span> <span class="n">tkAccessor</span><span class="p">])</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMSettingsProxy&quot;</span><span class="p">):</span>
            <span class="n">pname</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetSessionProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetProxyName</span><span class="p">(</span><span class="s2">&quot;settings&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
            <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="n">obj</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# find settings proxy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetSettingsProxy(&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">pname</span><span class="p">)])</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_rendering</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">GetVTKClassName</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;vtkPVLight&quot;</span><span class="p">:</span>
            <span class="n">view</span> <span class="o">=</span> <span class="n">simple</span><span class="o">.</span><span class="n">GetViewForLight</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">view</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">AdditionalLights</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                <span class="n">viewAccessor</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
                <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;additional_lights&quot;</span><span class="p">)),</span> <span class="n">obj</span><span class="p">)</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                    <span class="s2">&quot;# get light&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetLight(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">viewAccessor</span><span class="p">)])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># create a new light, should be handled by RegisterLightProxy</span>
                <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;additional_lights&quot;</span><span class="p">)),</span> <span class="n">obj</span><span class="p">)</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                    <span class="s2">&quot;# create a new light&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = CreateLight()&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">)])</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_rendering</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMMaterialLibraryProxy&quot;</span><span class="p">):</span>
            <span class="n">tkAccessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;materiallibrary&quot;</span><span class="p">)),</span> <span class="n">obj</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# get the material library&quot;</span><span class="p">,</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetMaterialLibrary()&quot;</span> <span class="o">%</span> <span class="n">tkAccessor</span><span class="p">])</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_rendering</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">GetVTKClassName</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;vtkTexture&quot;</span><span class="p">:</span>
            <span class="n">pname</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetSessionProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetProxyName</span><span class="p">(</span><span class="s2">&quot;textures&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pname</span><span class="p">:</span>
                <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="n">obj</span><span class="p">)</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">Mode</span>
                <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;ReadFromFile&#39;</span><span class="p">:</span>
                    <span class="n">filename</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">FileName</span>
                    <span class="c1"># repr() will escape the path correctly, especially backslash on Windows.</span>
                    <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                            <span class="s2">&quot;# a texture&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = FindTextureOrCreate(registrationName=</span><span class="si">%s</span><span class="s2">, filename=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">filename</span><span class="p">))])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tp_key</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">TrivialProducerKey</span>
                    <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                            <span class="s2">&quot;# a texture&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = FindTextureOrCreate(registrationName=</span><span class="si">%s</span><span class="s2">, filename=None, trivial_producer_key=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">tp_key</span><span class="p">))])</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;extractors&quot;</span><span class="p">):</span>
            <span class="n">regName</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;extractors&quot;</span><span class="p">)</span>
            <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">regName</span><span class="p">),</span> <span class="n">obj</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# get extractor&quot;</span><span class="p">,</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = FindExtractor(&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">regName</span><span class="p">)])</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Trace.rename_separate_tf_and_get_representation"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Trace.rename_separate_tf_and_get_representation">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">rename_separate_tf_and_get_representation</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">arrayName</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">re</span>
        <span class="n">representation</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">varname</span> <span class="o">=</span> <span class="n">arrayName</span>
        <span class="k">if</span> <span class="n">selector</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(^Separate_)([0-9]*)_(.*$)&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(^Separate_)([0-9]*)_(.*)_(.*$)&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">arrayName</span><span class="p">):</span>
            <span class="n">gid</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">g&lt;2&gt;&quot;</span><span class="p">,</span> <span class="n">arrayName</span><span class="p">)</span>
            <span class="n">representation</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">simple</span><span class="o">.</span><span class="n">GetRepresentations</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">gid</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">representation</span><span class="p">:</span>
                <span class="n">repAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">representation</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">selector</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">arrayName</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">g&lt;3&gt;&quot;</span><span class="p">,</span> <span class="n">arrayName</span><span class="p">)</span>
                    <span class="n">varname</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Separate_</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">repAccessor</span><span class="p">,</span> <span class="n">arrayName</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">arrayName</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">g&lt;4&gt;&quot;</span><span class="p">,</span> <span class="n">arrayName</span><span class="p">)</span>
                    <span class="n">varname</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Separate_</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">repAccessor</span><span class="p">,</span> <span class="n">selector</span><span class="p">,</span> <span class="n">arrayName</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">arrayName</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="n">representation</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_create_accessor_for_tf</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">regname</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">re</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;^[0-9.]*(.+)</span><span class="se">\\</span><span class="s2">.</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">(),</span> <span class="n">regname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
            <span class="n">arrayName</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetXMLGroup</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;lookup_tables&quot;</span><span class="p">:</span>
                <span class="n">arrayName</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="n">rep</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">rename_separate_tf_and_get_representation</span><span class="p">(</span><span class="n">arrayName</span><span class="p">,</span> <span class="n">selector</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">selector</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rep</span><span class="p">:</span>
                        <span class="n">repAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
                        <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;, </span><span class="si">%s</span><span class="s2">, separate=True&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">arrayName</span><span class="p">,</span> <span class="n">repAccessor</span><span class="p">))</span>
                        <span class="n">comment</span> <span class="o">=</span> <span class="s2">&quot;separate color transfer function/color map&quot;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">arrayName</span><span class="p">)</span>
                        <span class="n">comment</span> <span class="o">=</span> <span class="s2">&quot;color transfer function/color map&quot;</span>
                    <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;GetColorTransferFunction&quot;</span>
                    <span class="n">varsuffix</span> <span class="o">=</span> <span class="s2">&quot;LUT&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rep</span><span class="p">:</span>
                        <span class="n">repAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
                        <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;, </span><span class="si">%s</span><span class="s2">, separate=True&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">selector</span><span class="p">,</span> <span class="n">arrayName</span><span class="p">,</span> <span class="n">repAccessor</span><span class="p">))</span>
                        <span class="n">comment</span> <span class="o">=</span> <span class="s2">&quot;separate block color transfer function/block color map&quot;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">selector</span><span class="p">,</span> <span class="n">arrayName</span><span class="p">))</span>
                        <span class="n">comment</span> <span class="o">=</span> <span class="s2">&quot;block color block transfer function/block color map&quot;</span>
                    <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;GetBlockColorTransferFunction&quot;</span>
                    <span class="n">varsuffix</span> <span class="o">=</span> <span class="s2">&quot;BlockLUT&quot;</span>
            <span class="k">elif</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetXMLGroup</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;piecewise_functions&quot;</span><span class="p">:</span>
                <span class="n">arrayName</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="n">rep</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">rename_separate_tf_and_get_representation</span><span class="p">(</span><span class="n">arrayName</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">rep</span><span class="p">:</span>
                    <span class="n">repAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
                    <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;, </span><span class="si">%s</span><span class="s2">, separate=True&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">arrayName</span><span class="p">,</span> <span class="n">repAccessor</span><span class="p">))</span>
                    <span class="n">comment</span> <span class="o">=</span> <span class="s2">&quot;separate opacity transfer function/opacity map&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">arrayName</span><span class="p">)</span>
                    <span class="n">comment</span> <span class="o">=</span> <span class="s2">&quot;opacity transfer function/opacity map&quot;</span>
                <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;GetOpacityTransferFunction&quot;</span>
                <span class="n">varsuffix</span> <span class="o">=</span> <span class="s2">&quot;PWF&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">arrayName</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="n">rep</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">rename_separate_tf_and_get_representation</span><span class="p">(</span><span class="n">arrayName</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">rep</span><span class="p">:</span>
                    <span class="n">repAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
                    <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;, </span><span class="si">%s</span><span class="s2">, separate=True&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">arrayName</span><span class="p">,</span> <span class="n">repAccessor</span><span class="p">))</span>
                    <span class="n">comment</span> <span class="o">=</span> <span class="s2">&quot;separate 2D transfer function&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">arrayName</span><span class="p">)</span>
                    <span class="n">comment</span> <span class="o">=</span> <span class="s2">&quot;2D transfer function&quot;</span>
                <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;GetTransferFunction2D&quot;</span>
                <span class="n">varsuffix</span> <span class="o">=</span> <span class="s2">&quot;TF2D&quot;</span>

            <span class="n">varname</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="n">varsuffix</span><span class="p">))</span>
            <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="n">proxy</span><span class="p">)</span>
            <span class="c1"># cls.Output.append_separated([\</span>
            <span class="c1">#    &quot;# get %s for &#39;%s&#39;&quot; % (comment, arrayName),</span>
            <span class="c1">#    &quot;%s = %s(&#39;%s&#39;)&quot; % (accessor, method, arrayName)])</span>
            <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# get </span><span class="si">%s</span><span class="s2"> for &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">comment</span><span class="p">,</span> <span class="n">arrayName</span><span class="p">))</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span> \
                <span class="n">method</span><span class="p">,</span> <span class="n">SupplementalProxy</span><span class="p">(</span><span class="n">TransferFunctionProxyFilter</span><span class="p">()),</span> <span class="n">ctor_args</span><span class="o">=</span><span class="n">args</span><span class="p">))</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_create_accessor_for_animation_proxies</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">pname</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;animation&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="n">simple</span><span class="o">.</span><span class="n">GetAnimationScene</span><span class="p">():</span>
            <span class="n">sceneAccessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="n">obj</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# get animation scene&quot;</span><span class="p">,</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetAnimationScene()&quot;</span> <span class="o">%</span> <span class="n">sceneAccessor</span><span class="p">])</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="n">simple</span><span class="o">.</span><span class="n">GetTimeTrack</span><span class="p">():</span>
            <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="n">obj</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# get time animation track&quot;</span><span class="p">,</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetTimeTrack()&quot;</span> <span class="o">%</span> <span class="n">accessor</span><span class="p">])</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;CameraAnimationCue&quot;</span><span class="p">:</span>
            <span class="c1"># handle camera animation cue.</span>
            <span class="n">view</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">AnimatedProxy</span>
            <span class="n">viewAccessor</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
            <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="n">obj</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# get camera animation track for the view&quot;</span><span class="p">,</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetCameraTrack(view=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">viewAccessor</span><span class="p">)])</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;KeyFrameAnimationCue&quot;</span><span class="p">:</span>
            <span class="n">animatedProxyAccessor</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">AnimatedProxy</span><span class="p">)</span>
            <span class="n">animatedElement</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">AnimatedElement</span><span class="p">)</span>
            <span class="n">animatedPropertyName</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">AnimatedPropertyName</span>
            <span class="n">varname</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">Track&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">animatedProxyAccessor</span><span class="p">,</span> <span class="n">animatedPropertyName</span><span class="p">))</span>
            <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# get animation track&quot;</span><span class="p">,</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = GetAnimationTrack(&#39;</span><span class="si">%s</span><span class="s2">&#39;, index=</span><span class="si">%d</span><span class="s2">, proxy=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> \
                <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">animatedPropertyName</span><span class="p">,</span> <span class="n">animatedElement</span><span class="p">,</span> <span class="n">animatedProxyAccessor</span><span class="p">)])</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;PythonAnimationCue&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Untraceable</span><span class="p">(</span><span class="s2">&quot;PythonAnimationCue&#39;s are currently not supported in trace&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">GetXMLGroup</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;animation_keyframes&quot;</span><span class="p">:</span>
            <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="n">obj</span><span class="p">)</span>
            <span class="n">ctor</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_make_name_valid</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">GetXMLLabel</span><span class="p">())</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="s2">&quot;# create a new key frame&quot;</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="n">ctor</span><span class="p">,</span> <span class="n">ProxyFilter</span><span class="p">()))</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Untraceable"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Untraceable">[docs]</a><span class="k">class</span> <span class="nc">Untraceable</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">logmessage</span><span class="o">=</span><span class="s2">&quot;&lt;unspecified&gt;&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">LogMessage</span> <span class="o">=</span> <span class="n">logmessage</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">LogMessage</span><span class="p">)</span></div>


<div class="viewcode-block" id="Accessor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Accessor">[docs]</a><span class="k">class</span> <span class="nc">Accessor</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Varname</span> <span class="o">=</span> <span class="n">varname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__Object</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">register_accessor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Accessor.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Accessor.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">unregister_accessor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__Object</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Varname</span>

<div class="viewcode-block" id="Accessor.get_object"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Accessor.get_object">[docs]</a>    <span class="k">def</span> <span class="nf">get_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__Object</span></div></div>


<div class="viewcode-block" id="RealProxyAccessor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RealProxyAccessor">[docs]</a><span class="k">class</span> <span class="nc">RealProxyAccessor</span><span class="p">(</span><span class="n">Accessor</span><span class="p">):</span>
    <span class="n">__CreateCallbacks</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="RealProxyAccessor.register_create_callback"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RealProxyAccessor.register_create_callback">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">register_create_callback</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">__CreateCallbacks</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">function</span><span class="p">)</span></div>

<div class="viewcode-block" id="RealProxyAccessor.unregister_create_callback"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RealProxyAccessor.unregister_create_callback">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">unregister_create_callback</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">__CreateCallbacks</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">function</span><span class="p">)</span></div>

<div class="viewcode-block" id="RealProxyAccessor.create"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RealProxyAccessor.create">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__CreateCallbacks</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">x</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="n">RealProxyAccessor</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="n">proxy</span><span class="p">):</span>
        <span class="n">Accessor</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="n">proxy</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">OrderedProperties</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Create accessors for properties on this proxy.</span>
        <span class="n">oiter</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">vtkSMOrderedPropertyIterator</span><span class="p">()</span>
        <span class="n">oiter</span><span class="o">.</span><span class="n">SetProxy</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">oiter</span><span class="o">.</span><span class="n">IsAtEnd</span><span class="p">():</span>
            <span class="n">prop_name</span> <span class="o">=</span> <span class="n">oiter</span><span class="o">.</span><span class="n">GetKey</span><span class="p">()</span>
            <span class="n">prop_label</span> <span class="o">=</span> <span class="n">oiter</span><span class="o">.</span><span class="n">GetPropertyLabel</span><span class="p">()</span>
            <span class="n">sanitized_label</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_make_name_valid</span><span class="p">(</span><span class="n">prop_label</span><span class="p">)</span>

            <span class="n">prop</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="n">prop_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span> <span class="o">==</span> <span class="n">sm</span><span class="o">.</span><span class="n">Property</span><span class="p">:</span>
                <span class="c1"># Note: when PropertyTraceHelper for a property with ProxyListDomain is</span>
                <span class="c1"># created, it creates accessors for all proxies in the domain as well.</span>
                <span class="n">prop_accessor</span> <span class="o">=</span> <span class="n">PropertyTraceHelper</span><span class="p">(</span><span class="n">sanitized_label</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">OrderedProperties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop_accessor</span><span class="p">)</span>
            <span class="n">oiter</span><span class="o">.</span><span class="n">Next</span><span class="p">()</span>
        <span class="k">del</span> <span class="n">oiter</span>

<div class="viewcode-block" id="RealProxyAccessor.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RealProxyAccessor.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">OrderedProperties</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>
        <span class="n">Accessor</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="RealProxyAccessor.get_property"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RealProxyAccessor.get_property">[docs]</a>    <span class="k">def</span> <span class="nf">get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">OrderedProperties</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">x</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="RealProxyAccessor.get_properties"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RealProxyAccessor.get_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">OrderedProperties</span><span class="p">[:]</span></div>

<div class="viewcode-block" id="RealProxyAccessor.get_ctor_properties"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RealProxyAccessor.get_ctor_properties">[docs]</a>    <span class="k">def</span> <span class="nf">get_ctor_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of property accessors that should be specified</span>
<span class="sd">           in the constructor.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">OrderedProperties</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_ctor_property</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span></div>

<div class="viewcode-block" id="RealProxyAccessor.is_ctor_property"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RealProxyAccessor.is_ctor_property">[docs]</a>    <span class="k">def</span> <span class="nf">is_ctor_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMInputProperty&quot;</span><span class="p">)</span> <span class="ow">or</span> \
            <span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">FindDomain</span><span class="p">(</span><span class="s2">&quot;vtkSMFileListDomain&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="RealProxyAccessor.trace_properties"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RealProxyAccessor.trace_properties">[docs]</a>    <span class="k">def</span> <span class="nf">trace_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">props</span><span class="p">,</span> <span class="n">in_ctor</span><span class="p">):</span>
        <span class="n">joiner</span> <span class="o">=</span> <span class="s2">&quot;,</span><span class="se">\n</span><span class="s2">    &quot;</span> <span class="k">if</span> <span class="n">in_ctor</span> <span class="k">else</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">joiner</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">get_property_trace</span><span class="p">(</span><span class="n">in_ctor</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">props</span><span class="p">])</span></div>

<div class="viewcode-block" id="RealProxyAccessor.trace_ctor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RealProxyAccessor.trace_ctor">[docs]</a>    <span class="k">def</span> <span class="nf">trace_ctor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctor</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">ctor_args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">skip_assignment</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                   <span class="n">ctor_var</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ctor_extra_args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">args_in_ctor</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ctor_args</span><span class="p">)</span> <span class="k">if</span> <span class="n">ctor_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># trace any properties that the &#39;filter&#39; tells us should be traced</span>
        <span class="c1"># in ctor.</span>
        <span class="c1"># when ctor is null, add them to the other props to trace in creation</span>
        <span class="n">other_props</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="n">ctor_props</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">OrderedProperties</span> <span class="k">if</span> <span class="nb">filter</span><span class="o">.</span><span class="n">should_trace_in_ctor</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ctor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
          <span class="n">ctor_props_trace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace_properties</span><span class="p">(</span><span class="n">ctor_props</span><span class="p">,</span> <span class="n">in_ctor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
          <span class="k">if</span> <span class="n">args_in_ctor</span> <span class="ow">and</span> <span class="n">ctor_props_trace</span><span class="p">:</span>
              <span class="n">args_in_ctor</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">args_in_ctor</span><span class="p">,</span> <span class="n">ctor_props_trace</span><span class="p">)</span>
          <span class="k">else</span><span class="p">:</span>
              <span class="n">args_in_ctor</span> <span class="o">+=</span> <span class="n">ctor_props_trace</span>
          <span class="k">if</span> <span class="n">args_in_ctor</span> <span class="ow">and</span> <span class="n">ctor_extra_args</span><span class="p">:</span>
              <span class="n">args_in_ctor</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">args_in_ctor</span><span class="p">,</span> <span class="n">ctor_extra_args</span><span class="p">)</span>
          <span class="k">elif</span> <span class="n">ctor_extra_args</span><span class="p">:</span>
              <span class="n">args_in_ctor</span> <span class="o">=</span> <span class="n">ctor_extra_args</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="n">other_props</span> <span class="o">+=</span> <span class="n">ctor_props</span>

        <span class="c1"># locate all the other properties that should be traced in create.</span>
        <span class="n">other_props</span> <span class="o">+=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">OrderedProperties</span> \
                       <span class="k">if</span> <span class="nb">filter</span><span class="o">.</span><span class="n">should_trace_in_create</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">filter</span><span class="o">.</span><span class="n">should_trace_in_ctor</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ctor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_assignment</span><span class="p">:</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = </span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctor</span><span class="p">,</span> <span class="n">args_in_ctor</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">other_props</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ctor</span><span class="p">,</span> <span class="n">args_in_ctor</span><span class="p">))</span>
                <span class="k">return</span> <span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">()</span>

        <span class="c1"># FIXME: would like trace_properties() to return a list instead of</span>
        <span class="c1"># a string.</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace_properties</span><span class="p">(</span><span class="n">other_props</span><span class="p">,</span> <span class="n">in_ctor</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">txt</span><span class="p">:</span> <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>

        <span class="c1"># Now, if any of the props has ProxyListDomain, we should trace their</span>
        <span class="c1"># &quot;ctors&quot; as well. Tracing ctors for ProxyListDomain proxies simply</span>
        <span class="c1"># means tracing their property values.</span>
        <span class="n">pld_props</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">OrderedProperties</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">has_proxy_list_domain</span><span class="p">()]</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">pld_props</span><span class="p">:</span>
            <span class="n">paccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">get_property_value</span><span class="p">())</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">prop</span><span class="o">.</span><span class="n">DisableSubTrace</span><span class="p">:</span>
                <span class="n">sub_trace</span> <span class="o">=</span> <span class="n">paccessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">sub_trace</span><span class="p">:</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span> \
                        <span class="s2">&quot;# init the </span><span class="si">%s</span><span class="s2"> selected for &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">get_value</span><span class="p">(),</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()))</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_trace</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="ProxyAccessor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ProxyAccessor">[docs]</a><span class="k">def</span> <span class="nf">ProxyAccessor</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">RealProxyAccessor</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="PropertyTraceHelper"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertyTraceHelper">[docs]</a><span class="k">class</span> <span class="nc">PropertyTraceHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;PropertyTraceHelper is used by RealProxyAccessor to help with tracing</span>
<span class="sd">    properites. In its constructor, RealProxyAccessor creates a</span>
<span class="sd">    PropertyTraceHelper for each of its properties that could potentially need</span>
<span class="sd">    to be traced.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">propertyname</span><span class="p">,</span> <span class="n">proxyAccessor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">          :param propertyname: name used to access the property. This is the</span>
<span class="sd">          sanitized property label.</span>
<span class="sd">          :param proxyAccessor: RealProxyAccessor instance for the proxy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">proxyAccessor</span><span class="p">,</span> <span class="n">RealProxyAccessor</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">propertyname</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__PyProperty</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PropertyName</span> <span class="o">=</span> <span class="n">propertyname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ProxyAccessor</span> <span class="o">=</span> <span class="n">proxyAccessor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">FullScopedName</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">proxyAccessor</span><span class="p">,</span> <span class="n">propertyname</span><span class="p">)</span>

        <span class="n">pyprop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="n">pyprop</span> <span class="ow">is</span> <span class="kc">None</span>

        <span class="n">pld_domain</span> <span class="o">=</span> <span class="n">pyprop</span><span class="o">.</span><span class="n">FindDomain</span><span class="p">(</span><span class="s2">&quot;vtkSMProxyListDomain&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">HasProxyListDomain</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pyprop</span><span class="p">,</span> <span class="n">sm</span><span class="o">.</span><span class="n">ProxyProperty</span><span class="p">)</span> <span class="ow">and</span> <span class="n">pld_domain</span> <span class="o">!=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ProxyListDomainProxyAccessors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DisableSubTrace</span> <span class="o">=</span> <span class="n">pyprop</span><span class="o">.</span><span class="n">GetDisableSubTrace</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">HasProxyListDomain</span><span class="p">:</span>
            <span class="c1"># register accessors for proxies in the proxy list domain.</span>
            <span class="c1"># This is cheating. Since there&#39;s no accessor for a proxy in the domain</span>
            <span class="c1"># unless the proxy is &quot;active&quot; in the property. However, since ParaView</span>
            <span class="c1"># UI never modifies the other properties, we cheat</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">pld_domain</span><span class="o">.</span><span class="n">GetNumberOfProxies</span><span class="p">()):</span>
                <span class="n">domain_proxy</span> <span class="o">=</span> <span class="n">pld_domain</span><span class="o">.</span><span class="n">GetProxy</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">plda</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(),</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">domain_proxy</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ProxyListDomainProxyAccessors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">plda</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>

<div class="viewcode-block" id="PropertyTraceHelper.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertyTraceHelper.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ProxyListDomainProxyAccessors</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ProxyListDomainProxyAccessors</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="PropertyTraceHelper.get_object"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertyTraceHelper.get_object">[docs]</a>    <span class="k">def</span> <span class="nf">get_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the servermanager.Property (or subclass) for the</span>
<span class="sd">        vtkSMProperty this trace helper is helping with.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__PyProperty</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">__PyProperty</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># This will raise Untraceable exception is the ProxyAccessor cannot</span>
            <span class="c1"># locate the servermanager.Proxy for the SMProxy it refers to.</span>
            <span class="n">pyproperty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ProxyAccessor</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__PyProperty</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="n">pyproperty</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">pyproperty</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__PyProperty</span><span class="p">()</span></div>

<div class="viewcode-block" id="PropertyTraceHelper.get_property_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertyTraceHelper.get_property_trace">[docs]</a>    <span class="k">def</span> <span class="nf">get_property_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_ctor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return trace-text for the property.</span>

<span class="sd">        :param in_ctor: If False, the trace is generated trace will use</span>
<span class="sd">            fully-scoped name when referring to the property e.g.</span>
<span class="sd">            sphere0.Radius=2, else it will use just the property name, *e.g.*,</span>
<span class="sd">            Radius=2.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">varname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">in_ctor</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">in_ctor</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span></div>

<div class="viewcode-block" id="PropertyTraceHelper.get_varname"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertyTraceHelper.get_varname">[docs]</a>    <span class="k">def</span> <span class="nf">get_varname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">not_fully_scoped</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the variable name to use when referring to this property.</span>

<span class="sd">        :param not_fully_scoped: If False, this will return</span>
<span class="sd">            fully-scoped name when referring to the property e.g. sphere0.Radius,</span>
<span class="sd">            else it will use just the property name, *e.g.*, Radius.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">PropertyName</span> <span class="k">if</span> <span class="n">not_fully_scoped</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">FullScopedName</span></div>

<div class="viewcode-block" id="PropertyTraceHelper.get_value"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertyTraceHelper.get_value">[docs]</a>    <span class="k">def</span> <span class="nf">get_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the property value as a string. For proxy properties, this</span>
<span class="sd">        will either be a string used to refer to another proxy or a string used</span>
<span class="sd">        to refer to the proxy in a proxy list domain.&quot;&quot;&quot;</span>
        <span class="n">myobject</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span>
        <span class="n">fileListDomain</span> <span class="o">=</span> <span class="n">myobject</span><span class="o">.</span><span class="n">SMProperty</span><span class="o">.</span><span class="n">FindDomain</span><span class="p">(</span><span class="s2">&quot;vtkSMFileListDomain&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">myobject</span><span class="p">,</span> <span class="n">sm</span><span class="o">.</span><span class="n">ProxyProperty</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">myobject</span><span class="p">[:]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_proxy_list_domain</span><span class="p">():</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">GetXMLLabel</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">myobject</span><span class="p">,</span> <span class="n">sm</span><span class="o">.</span><span class="n">InputProperty</span><span class="p">):</span>
                    <span class="c1"># this is an input property, we may have to hook on to a</span>
                    <span class="c1"># non-zero output port. If so, we trace `OutputPort(source,</span>
                    <span class="c1"># port)`, else we just trace `source`.</span>
                    <span class="c1"># Fixes #17035</span>
                    <span class="n">ports</span> <span class="o">=</span> <span class="p">[</span><span class="n">myobject</span><span class="o">.</span><span class="n">GetOutputPortForConnection</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))]</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">src</span> <span class="k">if</span> <span class="n">port</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;OutputPort(</span><span class="si">%s</span><span class="s2">,</span><span class="si">%d</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span> \
                            <span class="k">for</span> <span class="n">src</span><span class="p">,</span> <span class="n">port</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ports</span><span class="p">)]</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># Special case for repeatable, should return [] rather than None</span>
                <span class="k">if</span> <span class="n">myobject</span><span class="o">.</span><span class="n">SMProperty</span><span class="o">.</span><span class="n">GetRepeatable</span><span class="p">():</span>
                    <span class="k">return</span> <span class="s2">&quot;[]&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s2">&quot;None&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">myobject</span><span class="o">.</span><span class="n">SMProperty</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMStringVectorProperty&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span>
        <span class="p">(</span><span class="n">fileListDomain</span> <span class="ow">and</span> <span class="n">fileListDomain</span><span class="o">.</span><span class="n">GetIsOptional</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
         <span class="ow">or</span> <span class="n">myobject</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">GetVTKClassName</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;vtkPythonAnnotationFilter&quot;</span><span class="p">)):</span>
            <span class="c1"># handle multiline properties (see #18480)</span>
            <span class="c1"># but, not if the property is a list of files (see #21100)</span>
            <span class="c1"># nor if the filter is a PythonAnnotation (see #21654)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_multiline_string</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">myobject</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="n">myobject</span><span class="p">)</span></div>

<div class="viewcode-block" id="PropertyTraceHelper.has_proxy_list_domain"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertyTraceHelper.has_proxy_list_domain">[docs]</a>    <span class="k">def</span> <span class="nf">has_proxy_list_domain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns True if this property has a ProxyListDomain, else False.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">HasProxyListDomain</span></div>

<div class="viewcode-block" id="PropertyTraceHelper.get_property_name"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertyTraceHelper.get_property_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_property_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">PropertyName</span></div>

<div class="viewcode-block" id="PropertyTraceHelper.get_property_value"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertyTraceHelper.get_property_value">[docs]</a>    <span class="k">def</span> <span class="nf">get_property_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the Property value as would be returned by</span>
<span class="sd">        servermanager.Proxy.GetPropertyValue().&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ProxyAccessor</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">GetPropertyValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">())</span></div>

<div class="viewcode-block" id="PropertyTraceHelper.get_proxy"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertyTraceHelper.get_proxy">[docs]</a>    <span class="k">def</span> <span class="nf">get_proxy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ProxyAccessor</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span></div>

<div class="viewcode-block" id="PropertyTraceHelper.create_multiline_string"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertyTraceHelper.create_multiline_string">[docs]</a>    <span class="k">def</span> <span class="nf">create_multiline_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">astr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;helper to convert a string representation into a multiline string&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">n&#39;</span> <span class="ow">in</span> <span class="n">astr</span><span class="p">:</span>
            <span class="c1"># this happens for multiline string-vector properties.</span>
            <span class="c1"># for those, we ensure that the `astr` has raw \n&#39;s rather than</span>
            <span class="c1"># the escaped version. we also fix the string indicators.</span>

            <span class="c1"># replace &#39;\\n&#39; with real &#39;\n&#39;</span>
            <span class="n">astr</span> <span class="o">=</span> <span class="n">astr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="c1"># escape any `&quot;&quot;&quot;` in the script</span>
            <span class="n">astr</span> <span class="o">=</span> <span class="n">astr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&quot;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&quot;</span><span class="se">\\</span><span class="s1">&quot;</span><span class="se">\\</span><span class="s1">&quot;&#39;</span><span class="p">)</span>

            <span class="c1"># replace first and last characters with `&quot;&quot;&quot;`</span>
            <span class="n">astr</span> <span class="o">=</span> <span class="s1">&#39;&quot;&quot;&quot;&#39;</span> <span class="o">+</span> <span class="n">astr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;&quot;&quot;&quot;&#39;</span>
        <span class="k">return</span> <span class="n">astr</span></div></div>


<span class="c1"># ===================================================================================================</span>
<span class="c1"># === Filters used to filter properties traced ===</span>
<span class="c1"># ===================================================================================================</span>
<div class="viewcode-block" id="ProxyFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ProxyFilter">[docs]</a><span class="k">class</span> <span class="nc">ProxyFilter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trace_all_in_ctor</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace_all_in_ctor</span> <span class="o">=</span> <span class="n">trace_all_in_ctor</span>

<div class="viewcode-block" id="ProxyFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ProxyFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">hide_gui_hidden</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">GetIsInternal</span><span class="p">()</span> <span class="ow">or</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">GetInformationOnly</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># should we hide properties hidden from panels? yes, generally, except</span>
        <span class="c1"># Views.</span>
        <span class="k">if</span> <span class="n">hide_gui_hidden</span> <span class="o">==</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">GetPanelVisibility</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;never&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># if a property is &quot;linked&quot; to settings, then skip it here too. We</span>
        <span class="c1"># should eventually add an option for user to save, yes, save these too.</span>
        <span class="c1"># Note, however, any property that is linked with `unlink_if_modified`</span>
        <span class="c1"># set to 1 should be traced if the link no longer persists -- indicating</span>
        <span class="c1"># the user manually changed it (and hence broke the link).</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">GetHints</span><span class="p">():</span>
            <span class="n">plink</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">GetHints</span><span class="p">()</span><span class="o">.</span><span class="n">FindNestedElementByName</span><span class="p">(</span><span class="s2">&quot;PropertyLink&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">plink</span> <span class="ow">and</span> <span class="n">plink</span><span class="o">.</span><span class="n">GetAttribute</span><span class="p">(</span><span class="s2">&quot;group&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;settings&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">plink</span><span class="o">.</span><span class="n">GetAttribute</span><span class="p">(</span><span class="s2">&quot;unlink_if_modified&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;1&quot;</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
                <span class="n">proxy</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_proxy</span><span class="p">()</span>
                <span class="n">pxm</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetSessionProxyManager</span><span class="p">()</span>
                <span class="n">settings</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetProxy</span><span class="p">(</span><span class="s2">&quot;settings&quot;</span><span class="p">,</span> <span class="n">plink</span><span class="o">.</span><span class="n">GetAttribute</span><span class="p">(</span><span class="s2">&quot;proxy&quot;</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">settings</span> <span class="ow">and</span> <span class="n">settings</span><span class="o">.</span><span class="n">GetSourcePropertyName</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()):</span>
                    <span class="c1"># the settings link still exists, skip tracing</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ProxyFilter.should_trace_in_create"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ProxyFilter.should_trace_in_create">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">user_can_modify_in_create</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="n">prop</span><span class="p">):</span> <span class="k">return</span> <span class="kc">False</span>

        <span class="n">setting</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">vtkSMTrace</span><span class="o">.</span><span class="n">GetActiveTracer</span><span class="p">()</span><span class="o">.</span><span class="n">GetPropertiesToTraceOnCreate</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">setting</span> <span class="o">==</span> <span class="n">sm</span><span class="o">.</span><span class="n">vtkSMTrace</span><span class="o">.</span><span class="n">RECORD_USER_MODIFIED_PROPERTIES</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">user_can_modify_in_create</span><span class="p">:</span>
            <span class="c1"># In ParaView, user never changes properties in Create. It&#39;s only</span>
            <span class="c1"># afterwords, so skip all properties.</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">trace_props_with_default_values</span> <span class="o">=</span> <span class="kc">True</span> \
            <span class="k">if</span> <span class="n">setting</span> <span class="o">==</span> <span class="n">sm</span><span class="o">.</span><span class="n">vtkSMTrace</span><span class="o">.</span><span class="n">RECORD_ALL_PROPERTIES</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">trace_props_with_default_values</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">IsValueDefault</span><span class="p">())</span></div>

<div class="viewcode-block" id="ProxyFilter.should_trace_in_ctor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ProxyFilter.should_trace_in_ctor">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_ctor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">trace_all_in_ctor</span> <span class="k">else</span> \
            <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_trace_in_create</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="PipelineProxyFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PipelineProxyFilter">[docs]</a><span class="k">class</span> <span class="nc">PipelineProxyFilter</span><span class="p">(</span><span class="n">ProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="PipelineProxyFilter.should_trace_in_create"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PipelineProxyFilter.should_trace_in_create">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ProxyFilter</span><span class="o">.</span><span class="n">should_trace_in_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">user_can_modify_in_create</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="PipelineProxyFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PipelineProxyFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;overridden to avoid hiding &quot;non-gui&quot; properties such as FileName.&quot;&quot;&quot;</span>
        <span class="c1"># should we hide properties hidden from panels?</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">FindDomain</span><span class="p">(</span><span class="s2">&quot;vtkSMFileListDomain&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ProxyFilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">)</span></div>

<div class="viewcode-block" id="PipelineProxyFilter.should_trace_in_ctor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PipelineProxyFilter.should_trace_in_ctor">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_ctor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="n">prop</span><span class="p">):</span> <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMInputProperty&quot;</span><span class="p">)</span> <span class="ow">or</span> \
            <span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">FindDomain</span><span class="p">(</span><span class="s2">&quot;vtkSMFileListDomain&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span></div></div>


<div class="viewcode-block" id="ExodusIIReaderFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ExodusIIReaderFilter">[docs]</a><span class="k">class</span> <span class="nc">ExodusIIReaderFilter</span><span class="p">(</span><span class="n">PipelineProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="ExodusIIReaderFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ExodusIIReaderFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">PipelineProxyFilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># Exodus reader has way too many wacky properties tracing them causes</span>
        <span class="c1"># the reader to segfault. We need to either remove those properties</span>
        <span class="c1"># entirely or fix them. Until I get a chance to get to the bottom of it,</span>
        <span class="c1"># I am opting to ignore those properties when tracing.</span>
        <span class="k">return</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span> \
            <span class="s2">&quot;FilePrefix&quot;</span><span class="p">,</span> <span class="s2">&quot;XMLFileName&quot;</span><span class="p">,</span> <span class="s2">&quot;FilePattern&quot;</span><span class="p">,</span> <span class="s2">&quot;FileRange&quot;</span><span class="p">]</span></div></div>


<div class="viewcode-block" id="ExtractSelectionFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ExtractSelectionFilter">[docs]</a><span class="k">class</span> <span class="nc">ExtractSelectionFilter</span><span class="p">(</span><span class="n">PipelineProxyFilter</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trace_all_in_ctor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">trace_all_in_ctor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_selection</span> <span class="o">=</span> <span class="n">save_selection</span>

<div class="viewcode-block" id="ExtractSelectionFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ExtractSelectionFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">PipelineProxyFilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span> <span class="k">return</span> <span class="kc">True</span>

        <span class="c1"># When saving state, Selection property should not be ignored</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_selection</span><span class="p">:</span> <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># Selections are not registered with the proxy manager, so we will not try to trace them.</span>
        <span class="k">return</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Selection&quot;</span><span class="p">]</span></div></div>


<div class="viewcode-block" id="RepresentationProxyFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RepresentationProxyFilter">[docs]</a><span class="k">class</span> <span class="nc">RepresentationProxyFilter</span><span class="p">(</span><span class="n">PipelineProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="RepresentationProxyFilter.should_trace_in_ctor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RepresentationProxyFilter.should_trace_in_ctor">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_ctor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="RepresentationProxyFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RepresentationProxyFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">PipelineProxyFilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Input&quot;</span><span class="p">,</span> \
                                        <span class="s2">&quot;SelectionCellFieldDataArrayName&quot;</span><span class="p">,</span> \
                                        <span class="s2">&quot;SelectionPointFieldDataArrayName&quot;</span><span class="p">]:</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="RepresentationProxyFilter.should_trace_in_create"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RepresentationProxyFilter.should_trace_in_create">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;for representations, we always trace the &#39;Representation&#39; property,</span>
<span class="sd">        even when it&#39;s same as the default value (see issue #17196).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">FindDomain</span><span class="p">(</span><span class="s2">&quot;vtkSMRepresentationTypeDomain&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">PipelineProxyFilter</span><span class="o">.</span><span class="n">should_trace_in_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ViewProxyFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ViewProxyFilter">[docs]</a><span class="k">class</span> <span class="nc">ViewProxyFilter</span><span class="p">(</span><span class="n">ProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="ViewProxyFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ViewProxyFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="c1"># skip &quot;Representations&quot; property and others.</span>
        <span class="c1"># The fact that we need to skip so many properties means that we are</span>
        <span class="c1"># missing something in the design of vtkSMProperties here. We need to</span>
        <span class="c1"># reclassify properties to cleanly address all its &quot;roles&quot;.</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span> \
                <span class="s2">&quot;ViewTime&quot;</span><span class="p">,</span> <span class="s2">&quot;CacheKey&quot;</span><span class="p">,</span> <span class="s2">&quot;Representations&quot;</span><span class="p">]:</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">ProxyFilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">hide_gui_hidden</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TimeKeeperProxyFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TimeKeeperProxyFilter">[docs]</a><span class="k">class</span> <span class="nc">TimeKeeperProxyFilter</span><span class="p">(</span><span class="n">ProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="TimeKeeperProxyFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TimeKeeperProxyFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ProxyFilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Views&quot;</span><span class="p">,</span> <span class="s2">&quot;TimeSources&quot;</span><span class="p">,</span> <span class="s2">&quot;Time&quot;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div></div>


<div class="viewcode-block" id="AnimationProxyFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.AnimationProxyFilter">[docs]</a><span class="k">class</span> <span class="nc">AnimationProxyFilter</span><span class="p">(</span><span class="n">ProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="AnimationProxyFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.AnimationProxyFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ProxyFilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;AnimatedProxy&quot;</span><span class="p">,</span> <span class="s2">&quot;AnimatedPropertyName&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;AnimatedElement&quot;</span><span class="p">,</span> <span class="s2">&quot;AnimatedDomainName&quot;</span><span class="p">,</span> <span class="s2">&quot;TimeKeeper&quot;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div></div>


<div class="viewcode-block" id="ExporterProxyFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ExporterProxyFilter">[docs]</a><span class="k">class</span> <span class="nc">ExporterProxyFilter</span><span class="p">(</span><span class="n">ProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="ExporterProxyFilter.should_trace_in_ctor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ExporterProxyFilter.should_trace_in_ctor">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_ctor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_trace_in_create</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExporterProxyFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ExporterProxyFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ProxyFilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;FileName&quot;</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div></div>


<div class="viewcode-block" id="WriterProxyFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.WriterProxyFilter">[docs]</a><span class="k">class</span> <span class="nc">WriterProxyFilter</span><span class="p">(</span><span class="n">ProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="WriterProxyFilter.should_trace_in_ctor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.WriterProxyFilter.should_trace_in_ctor">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_ctor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_trace_in_create</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span></div>

<div class="viewcode-block" id="WriterProxyFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.WriterProxyFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ProxyFilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;FileName&quot;</span><span class="p">,</span> <span class="s2">&quot;Input&quot;</span><span class="p">]:</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div></div>


<div class="viewcode-block" id="ScreenShotHelperProxyFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ScreenShotHelperProxyFilter">[docs]</a><span class="k">class</span> <span class="nc">ScreenShotHelperProxyFilter</span><span class="p">(</span><span class="n">ProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="ScreenShotHelperProxyFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ScreenShotHelperProxyFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Format&quot;</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">ProxyFilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">)</span></div>

<div class="viewcode-block" id="ScreenShotHelperProxyFilter.should_trace_in_ctor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ScreenShotHelperProxyFilter.should_trace_in_ctor">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_ctor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">should_trace_in_create</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransferFunctionProxyFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TransferFunctionProxyFilter">[docs]</a><span class="k">class</span> <span class="nc">TransferFunctionProxyFilter</span><span class="p">(</span><span class="n">ProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="TransferFunctionProxyFilter.should_trace_in_ctor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TransferFunctionProxyFilter.should_trace_in_ctor">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_ctor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="TransferFunctionProxyFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TransferFunctionProxyFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ProxyFilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">hide_gui_hidden</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ScalarOpacityFunction&quot;</span><span class="p">]:</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div></div>


<div class="viewcode-block" id="ScalarBarProxyFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ScalarBarProxyFilter">[docs]</a><span class="k">class</span> <span class="nc">ScalarBarProxyFilter</span><span class="p">(</span><span class="n">ProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="ScalarBarProxyFilter.should_trace_in_ctor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ScalarBarProxyFilter.should_trace_in_ctor">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_ctor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span> <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ScalarBarProxyFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ScalarBarProxyFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="c1"># despite being hidden from the panel, these properties should not be</span>
        <span class="c1"># skipped in trace.</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Position&quot;</span><span class="p">,</span> <span class="s2">&quot;Position2&quot;</span><span class="p">,</span> <span class="s2">&quot;Orientation&quot;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">ProxyFilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ExtractorFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ExtractorFilter">[docs]</a><span class="k">class</span> <span class="nc">ExtractorFilter</span><span class="p">(</span><span class="n">ProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="ExtractorFilter.should_trace_in_ctor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ExtractorFilter.should_trace_in_ctor">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_ctor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span> <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ExtractorFilter.should_never_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ExtractorFilter.should_never_trace">[docs]</a>    <span class="k">def</span> <span class="nf">should_never_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Writer&quot;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ExtractorFilter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="SaveExtractsFilter"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SaveExtractsFilter">[docs]</a><span class="k">class</span> <span class="nc">SaveExtractsFilter</span><span class="p">(</span><span class="n">ProxyFilter</span><span class="p">):</span>
<div class="viewcode-block" id="SaveExtractsFilter.should_trace_in_ctor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SaveExtractsFilter.should_trace_in_ctor">[docs]</a>    <span class="k">def</span> <span class="nf">should_trace_in_ctor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span> <span class="k">return</span> <span class="kc">True</span></div></div>


<div class="viewcode-block" id="SupplementalProxy"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SupplementalProxy">[docs]</a><span class="k">def</span> <span class="nf">SupplementalProxy</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function decorates a ProxyFilter. Designed to be</span>
<span class="sd">    used for supplemental proxies, so that we can centralize the logic</span>
<span class="sd">    to decide whether to trace any of the properties on the supplemental</span>
<span class="sd">    proxies the first time that proxy is accessed.&quot;&quot;&quot;</span>
    <span class="n">setting</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">vtkSMTrace</span><span class="o">.</span><span class="n">GetActiveTracer</span><span class="p">()</span><span class="o">.</span><span class="n">GetFullyTraceSupplementalProxies</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">setting</span><span class="p">:</span> <span class="k">return</span> <span class="bp">cls</span>

    <span class="k">def</span> <span class="nf">should_trace_in_ctor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">should_trace_in_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="bp">cls</span><span class="o">.</span><span class="n">should_trace_in_create</span> <span class="o">=</span> <span class="n">should_trace_in_create</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">should_trace_in_ctor</span> <span class="o">=</span> <span class="n">should_trace_in_ctor</span>
    <span class="k">return</span> <span class="bp">cls</span></div>


<span class="c1"># ===================================================================================================</span>
<span class="c1"># === TraceItem types ==</span>
<span class="c1"># TraceItems are units of traceable actions triggered by the application using vtkSMTrace</span>
<span class="c1"># ===================================================================================================</span>
<div class="viewcode-block" id="RenderingMixin"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RenderingMixin">[docs]</a><span class="k">class</span> <span class="nc">RenderingMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">skip_from_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">_get_skip_rendering</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="TraceItem"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceItem">[docs]</a><span class="k">class</span> <span class="nc">TraceItem</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">skip_from_trace</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">Untraceable</span><span class="p">(</span><span class="s2">&quot;skipped&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

<div class="viewcode-block" id="TraceItem.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceItem.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="NestableTraceItem"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.NestableTraceItem">[docs]</a><span class="k">class</span> <span class="nc">NestableTraceItem</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for trace item that can be nested i.e.</span>
<span class="sd">    can trace when some other trace item is active.&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="BookkeepingItem"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.BookkeepingItem">[docs]</a><span class="k">class</span> <span class="nc">BookkeepingItem</span><span class="p">(</span><span class="n">NestableTraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for trace items that are only used for</span>
<span class="sd">    book keeping and don&#39;t affect the trace itself.&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="RegisterPipelineProxy"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RegisterPipelineProxy">[docs]</a><span class="k">class</span> <span class="nc">RegisterPipelineProxy</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This traces the creation of a Pipeline Proxy such as</span>
<span class="sd">    sources/filters/readers etc.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">saving_state</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saving_state</span> <span class="o">=</span> <span class="n">saving_state</span>

<div class="viewcode-block" id="RegisterPipelineProxy.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RegisterPipelineProxy.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pname</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="s2">&quot;sources&quot;</span><span class="p">)</span>
        <span class="n">varname</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">)</span>
        <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>

        <span class="n">ctor</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_make_name_valid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">GetXMLLabel</span><span class="p">())</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# create a new &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">GetXMLLabel</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="n">sm</span><span class="o">.</span><span class="n">ExodusIIReaderProxy</span><span class="p">):</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">ExodusIIReaderFilter</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;ExtractSelection&quot;</span><span class="p">:</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">ExtractSelectionFilter</span><span class="p">(</span><span class="n">save_selection</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">saving_state</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">PipelineProxyFilter</span><span class="p">()</span>
        <span class="n">ctor_args</span> <span class="o">=</span> <span class="s2">&quot;registrationName=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">pname</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="n">ctor</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">ctor_args</span><span class="o">=</span><span class="n">ctor_args</span><span class="p">))</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RegisterSelectionProxy"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RegisterSelectionProxy">[docs]</a><span class="k">class</span> <span class="nc">RegisterSelectionProxy</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This traces the creation of a Proxy for selection.</span>
<span class="sd">    This is used only when saving state for now.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>

<div class="viewcode-block" id="RegisterSelectionProxy.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RegisterSelectionProxy.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pname</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="s2">&quot;selection_sources&quot;</span><span class="p">)</span>
        <span class="n">varname</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">)</span>
        <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>

        <span class="n">xmlname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# create a new &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">GetXMLLabel</span><span class="p">())</span>
        <span class="n">filter_type</span> <span class="o">=</span> <span class="n">ProxyFilter</span><span class="p">(</span><span class="n">trace_all_in_ctor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">ctor_args</span> <span class="o">=</span> <span class="s2">&quot;proxyname=&#39;</span><span class="si">%s</span><span class="s2">&#39;, registrationname=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">xmlname</span><span class="p">,</span> <span class="n">pname</span><span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="s2">&quot;CreateSelection&quot;</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">ctor_args</span><span class="o">=</span><span class="n">ctor_args</span><span class="p">))</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Delete"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Delete">[docs]</a><span class="k">class</span> <span class="nc">Delete</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This traces the deletion of a Pipeline proxy&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="n">accessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
            <span class="s2">&quot;# destroy </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">),</span>
            <span class="s2">&quot;Delete(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">),</span>
            <span class="s2">&quot;del </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">accessor</span><span class="p">])</span>
        <span class="n">accessor</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>
        <span class="k">del</span> <span class="n">accessor</span>
        <span class="kn">import</span> <span class="nn">gc</span>
        <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span></div>


<div class="viewcode-block" id="CleanupAccessor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.CleanupAccessor">[docs]</a><span class="k">class</span> <span class="nc">CleanupAccessor</span><span class="p">(</span><span class="n">BookkeepingItem</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>

<div class="viewcode-block" id="CleanupAccessor.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.CleanupAccessor.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">Trace</span><span class="o">.</span><span class="n">has_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">):</span>
            <span class="n">accessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>
            <span class="n">accessor</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>
            <span class="k">del</span> <span class="n">accessor</span>
        <span class="kn">import</span> <span class="nn">gc</span>
        <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="BlockTraceItems"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.BlockTraceItems">[docs]</a><span class="k">class</span> <span class="nc">BlockTraceItems</span><span class="p">(</span><span class="n">NestableTraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Item to block further creation of trace items, even</span>
<span class="sd">    those that are `NestableTraceItem`. Simply create this and</span>
<span class="sd">    no trace items will be created by `_create_trace_item_internal`</span>
<span class="sd">    until this instance is cleaned up.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="PropertiesModified"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertiesModified">[docs]</a><span class="k">class</span> <span class="nc">PropertiesModified</span><span class="p">(</span><span class="n">NestableTraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Traces properties modified on a specific proxy.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ProxyAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">selector</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MTime</span> <span class="o">=</span> <span class="n">vtkTimeStamp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MTime</span><span class="o">.</span><span class="n">Modified</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Comment</span> <span class="o">=</span> <span class="s2">&quot;#</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">comment</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">comment</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> \
            <span class="s2">&quot;# Properties modified on </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ProxyAccessor</span><span class="p">)</span>

<div class="viewcode-block" id="PropertiesModified.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.PropertiesModified.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">props</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ProxyAccessor</span><span class="o">.</span><span class="n">get_properties</span><span class="p">()</span>
        <span class="n">props_to_trace</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">props</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">MTime</span><span class="o">.</span><span class="n">GetMTime</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">k</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">GetMTime</span><span class="p">()]</span>
        <span class="k">if</span> <span class="n">props_to_trace</span><span class="p">:</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Comment</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ProxyAccessor</span><span class="o">.</span><span class="n">trace_properties</span><span class="p">(</span><span class="n">props_to_trace</span><span class="p">,</span> <span class="n">in_ctor</span><span class="o">=</span><span class="kc">False</span><span class="p">)])</span>

        <span class="c1"># Remember, we are monitoring a proxy to trace any properties on it that</span>
        <span class="c1"># are modified. When that&#39;s the case, properties on a proxy-property on</span>
        <span class="c1"># that proxy may have been modified too and it would make sense to trace</span>
        <span class="c1"># those as well (e.g. ScalarOpacityFunction on a PVLookupTable proxy).</span>
        <span class="c1"># This loop handles that. We explicitly skip &quot;InputProperty&quot;s, however</span>
        <span class="c1"># since tracing properties modified on the input should not be a</span>
        <span class="c1"># responsibility of this method.</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">props</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">(),</span> <span class="n">sm</span><span class="o">.</span><span class="n">ProxyProperty</span><span class="p">)</span> <span class="ow">or</span> \
                    <span class="nb">isinstance</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">get_object</span><span class="p">(),</span> <span class="n">sm</span><span class="o">.</span><span class="n">InputProperty</span><span class="p">)</span> <span class="ow">or</span> \
                    <span class="n">prop</span><span class="o">.</span><span class="n">DisableSubTrace</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">get_property_value</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># val can be None or list of proxies. We are not tracing list of</span>
                <span class="c1"># proxies since we don&#39;t want to trace properties like</span>
                <span class="c1"># `view.Representations`.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">val</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">sm</span><span class="o">.</span><span class="n">Proxy</span><span class="p">):</span> <span class="k">continue</span>
                <span class="n">valaccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">Untraceable</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">props</span> <span class="o">=</span> <span class="n">valaccessor</span><span class="o">.</span><span class="n">get_properties</span><span class="p">()</span>
                <span class="n">props_to_trace</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">props</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">MTime</span><span class="o">.</span><span class="n">GetMTime</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">k</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">GetMTime</span><span class="p">()]</span>
                <span class="k">if</span> <span class="n">props_to_trace</span><span class="p">:</span>
                    <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span>
                        <span class="s2">&quot;# Properties modified on </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">valaccessor</span><span class="p">,</span>
                        <span class="n">valaccessor</span><span class="o">.</span><span class="n">trace_properties</span><span class="p">(</span><span class="n">props_to_trace</span><span class="p">,</span> <span class="n">in_ctor</span><span class="o">=</span><span class="kc">False</span><span class="p">)])</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ScalarBarInteraction"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ScalarBarInteraction">[docs]</a><span class="k">class</span> <span class="nc">ScalarBarInteraction</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">NestableTraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Traces scalar bar interactions&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ProxyAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MTime</span> <span class="o">=</span> <span class="n">vtkTimeStamp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MTime</span><span class="o">.</span><span class="n">Modified</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Comment</span> <span class="o">=</span> <span class="s2">&quot;#</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">comment</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">comment</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> \
            <span class="s2">&quot;# Properties modified on </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ProxyAccessor</span><span class="p">)</span>

<div class="viewcode-block" id="ScalarBarInteraction.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ScalarBarInteraction.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">props</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ProxyAccessor</span><span class="o">.</span><span class="n">get_properties</span><span class="p">()</span>
        <span class="n">props_to_trace</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">props</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">MTime</span><span class="o">.</span><span class="n">GetMTime</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">k</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">GetMTime</span><span class="p">()]</span>
        <span class="n">afilter</span> <span class="o">=</span> <span class="n">ScalarBarProxyFilter</span><span class="p">()</span>
        <span class="n">props_to_trace</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">props_to_trace</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">afilter</span><span class="o">.</span><span class="n">should_never_trace</span><span class="p">(</span><span class="n">k</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">props_to_trace</span><span class="p">:</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Comment</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ProxyAccessor</span><span class="o">.</span><span class="n">trace_properties</span><span class="p">(</span><span class="n">props_to_trace</span><span class="p">,</span> <span class="n">in_ctor</span><span class="o">=</span><span class="kc">False</span><span class="p">)])</span></div></div>


<div class="viewcode-block" id="Show"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Show">[docs]</a><span class="k">class</span> <span class="nc">Show</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Traces Show&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">producer</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">display</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">producer</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">producer</span><span class="p">)</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
        <span class="n">display</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">display</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ProducerAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">producer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ViewAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OutputPort</span> <span class="o">=</span> <span class="n">port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Display</span> <span class="o">=</span> <span class="n">display</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Comment</span> <span class="o">=</span> <span class="n">comment</span>

<div class="viewcode-block" id="Show.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Show.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">display</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Display</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Trace</span><span class="o">.</span><span class="n">has_accessor</span><span class="p">(</span><span class="n">display</span><span class="p">):</span>
            <span class="n">pname</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">Display&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ProducerAccessor</span>
            <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="n">display</span><span class="p">)</span>
            <span class="n">trace_ctor</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">accessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">display</span><span class="p">)</span>
            <span class="n">trace_ctor</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">OutputPort</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">Comment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">Comment</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# show data in view&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">port</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = Show(OutputPort(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%d</span><span class="s2">), </span><span class="si">%s</span><span class="s2">, &#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> \
                          <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">accessor</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ProducerAccessor</span><span class="p">),</span> <span class="n">port</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ViewAccessor</span><span class="p">),</span> \
                           <span class="nb">str</span><span class="p">(</span><span class="n">display</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">())))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = Show(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, &#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> \
                          <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">accessor</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ProducerAccessor</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ViewAccessor</span><span class="p">),</span> \
                           <span class="nb">str</span><span class="p">(</span><span class="n">display</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">())))</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span>

        <span class="n">output</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">trace_ctor</span><span class="p">:</span>
            <span class="c1"># Now trace default values.</span>
            <span class="n">ctor_trace</span> <span class="o">=</span> <span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">RepresentationProxyFilter</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">ctor_trace</span><span class="p">:</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# trace defaults for the display properties.&quot;</span><span class="p">)</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ctor_trace</span><span class="p">)</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Hide"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.Hide">[docs]</a><span class="k">class</span> <span class="nc">Hide</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Traces Hide&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">producer</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">producer</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">producer</span><span class="p">)</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
        <span class="n">producerAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">producer</span><span class="p">)</span>
        <span class="n">viewAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>

        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
            <span class="s2">&quot;# hide data in view&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Hide(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">producerAccessor</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">viewAccessor</span><span class="p">))</span> <span class="k">if</span> <span class="n">port</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> \
                <span class="s2">&quot;Hide(OutputPort(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%d</span><span class="s2">), </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">producerAccessor</span><span class="p">),</span> <span class="n">port</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">viewAccessor</span><span class="p">))])</span></div>


<div class="viewcode-block" id="SetScalarColoring"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SetScalarColoring">[docs]</a><span class="k">class</span> <span class="nc">SetScalarColoring</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Trace vtkSMPVRepresentationProxy.SetScalarColoring&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">display</span><span class="p">,</span> <span class="n">arrayname</span><span class="p">,</span> <span class="n">attribute_type</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">separate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">lut</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Display</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">display</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ArrayName</span> <span class="o">=</span> <span class="n">arrayname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AttributeType</span> <span class="o">=</span> <span class="n">attribute_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Component</span> <span class="o">=</span> <span class="n">component</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Lut</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">lut</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Separate</span> <span class="o">=</span> <span class="n">separate</span>

<div class="viewcode-block" id="SetScalarColoring.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SetScalarColoring.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ArrayName</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Component</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Separate</span><span class="p">:</span>
                    <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                        <span class="s2">&quot;# set scalar coloring using an separate color/opacity maps&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ColorBy(</span><span class="si">%s</span><span class="s2">, (&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;), </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span> \
                            <span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Display</span><span class="p">)),</span>
                            <span class="n">sm</span><span class="o">.</span><span class="n">GetAssociationAsString</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AttributeType</span><span class="p">),</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">ArrayName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Separate</span><span class="p">)])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                        <span class="s2">&quot;# set scalar coloring&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ColorBy(</span><span class="si">%s</span><span class="s2">, (&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;))&quot;</span> <span class="o">%</span> <span class="p">(</span> \
                            <span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Display</span><span class="p">)),</span>
                            <span class="n">sm</span><span class="o">.</span><span class="n">GetAssociationAsString</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AttributeType</span><span class="p">),</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">ArrayName</span><span class="p">)])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Separate</span><span class="p">:</span>
                    <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                        <span class="s2">&quot;# set scalar coloring using an separate color/opacity maps&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ColorBy(</span><span class="si">%s</span><span class="s2">, (&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;), </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span> \
                            <span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Display</span><span class="p">)),</span>
                            <span class="n">sm</span><span class="o">.</span><span class="n">GetAssociationAsString</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AttributeType</span><span class="p">),</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">ArrayName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Separate</span><span class="p">)])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                        <span class="s2">&quot;# set scalar coloring&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ColorBy(</span><span class="si">%s</span><span class="s2">, (&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;))&quot;</span> <span class="o">%</span> <span class="p">(</span> \
                            <span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Display</span><span class="p">)),</span>
                            <span class="n">sm</span><span class="o">.</span><span class="n">GetAssociationAsString</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AttributeType</span><span class="p">),</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">ArrayName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Component</span><span class="p">)])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# turn off scalar coloring&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ColorBy(</span><span class="si">%s</span><span class="s2">, None)&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Display</span><span class="p">))])</span>

        <span class="c1"># only for &quot;Fully Trace Supplemental Proxies&quot; support</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Lut</span><span class="p">:</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Lut</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="SetBlocksScalarColoring"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SetBlocksScalarColoring">[docs]</a><span class="k">class</span> <span class="nc">SetBlocksScalarColoring</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Trace vtkSMPVRepresentationProxy.SetBlocksScalarColoring&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">display</span><span class="p">,</span> <span class="n">block_selectors</span><span class="p">,</span> <span class="n">arrayname</span><span class="p">,</span> <span class="n">attribute_type</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">separate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">luts</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Display</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">display</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BlockSelectors</span> <span class="o">=</span> <span class="n">block_selectors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ArrayName</span> <span class="o">=</span> <span class="n">arrayname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AttributeType</span> <span class="o">=</span> <span class="n">attribute_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Component</span> <span class="o">=</span> <span class="n">component</span>
        <span class="c1"># a list of luts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Luts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">luts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">lut</span> <span class="ow">in</span> <span class="n">luts</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Luts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">lut</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Separate</span> <span class="o">=</span> <span class="n">separate</span>

<div class="viewcode-block" id="SetBlocksScalarColoring.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SetBlocksScalarColoring.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">BlockSelectors</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ArrayName</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Component</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Separate</span><span class="p">:</span>
                        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                            <span class="s2">&quot;# set blocks scalar coloring using an separate color/opacity maps&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ColorBlocksBy(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, (&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;), </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span> \
                                <span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Display</span><span class="p">)),</span>
                                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BlockSelectors</span><span class="p">),</span>
                                <span class="n">sm</span><span class="o">.</span><span class="n">GetAssociationAsString</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AttributeType</span><span class="p">),</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">ArrayName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Separate</span><span class="p">)])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                            <span class="s2">&quot;# set blocks scalar coloring&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ColorBlocksBy(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, (&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;))&quot;</span> <span class="o">%</span> <span class="p">(</span> \
                                <span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Display</span><span class="p">)),</span>
                                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BlockSelectors</span><span class="p">),</span>
                                <span class="n">sm</span><span class="o">.</span><span class="n">GetAssociationAsString</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AttributeType</span><span class="p">),</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">ArrayName</span><span class="p">)])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Separate</span><span class="p">:</span>
                        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                            <span class="s2">&quot;# set blocks scalar coloring using an separate color/opacity maps&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ColorBlocksBy(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, (&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;), </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span> \
                                <span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Display</span><span class="p">)),</span>
                                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BlockSelectors</span><span class="p">),</span>
                                <span class="n">sm</span><span class="o">.</span><span class="n">GetAssociationAsString</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AttributeType</span><span class="p">),</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">ArrayName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Component</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Separate</span><span class="p">)])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                            <span class="s2">&quot;# set blocks scalar coloring&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ColorBlocksBy(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, (&#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;, &#39;</span><span class="si">%s</span><span class="s2">&#39;))&quot;</span> <span class="o">%</span> <span class="p">(</span> \
                                <span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Display</span><span class="p">)),</span>
                                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BlockSelectors</span><span class="p">),</span>
                                <span class="n">sm</span><span class="o">.</span><span class="n">GetAssociationAsString</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AttributeType</span><span class="p">),</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">ArrayName</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Component</span><span class="p">)])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                    <span class="s2">&quot;# turn off blocks scalar coloring&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;ColorBlocksBy(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, None)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Display</span><span class="p">)),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BlockSelectors</span><span class="p">))])</span>

            <span class="c1"># only for &quot;Fully Trace Supplemental Proxies&quot; support</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Luts</span><span class="p">)):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Luts</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                    <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Luts</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">BlockSelectors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="RegisterViewProxy"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RegisterViewProxy">[docs]</a><span class="k">class</span> <span class="nc">RegisterViewProxy</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Traces creation of a new view (vtkSMParaViewPipelineController::RegisterViewProxy).&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="ow">is</span> <span class="kc">None</span>

<div class="viewcode-block" id="RegisterViewProxy.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RegisterViewProxy.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pname</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="s2">&quot;views&quot;</span><span class="p">)</span>
        <span class="n">varname</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">)</span>
        <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="c1"># create dynamic lights as needed.</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="s2">&quot;AdditionalLights&quot;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">light</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">AdditionalLights</span><span class="p">:</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;# create light&#39;</span><span class="p">)</span>
                <span class="n">lightTrace</span> <span class="o">=</span> <span class="n">RegisterLightProxy</span><span class="p">(</span><span class="n">light</span><span class="p">)</span>
                <span class="n">lightTrace</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>

        <span class="c1"># unlike for filters/sources, for views the CreateView function still takes the</span>
        <span class="c1"># xml name for the view, not its label.</span>
        <span class="n">ctor_args</span> <span class="o">=</span> <span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# Create a new &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">GetXMLLabel</span><span class="p">())</span>
        <span class="nb">filter</span> <span class="o">=</span> <span class="n">ViewProxyFilter</span><span class="p">()</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="s2">&quot;CreateView&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">ctor_args</span><span class="p">))</span>

        <span class="c1"># append dynamic lights as needed.</span>
        <span class="c1"># if hasattr(self.Proxy, &quot;AdditionalLights&quot;):</span>
        <span class="c1">#     lightsList = []</span>
        <span class="c1">#     for light in self.Proxy.AdditionalLights:</span>
        <span class="c1">#         lightAccessor = Trace.get_accessor(light)</span>
        <span class="c1">#         lightsList.append(lightAccessor)</span>
        <span class="c1">#     trace.append(&quot;%s.AdditionalLights = [%s]&quot; % (Trace.get_accessor(self.Proxy), &quot;, &quot;.join(lightsList)))</span>

        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span>
        <span class="c1"># we assume views don&#39;t have proxy list domains for now, and ignore tracing them.</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RegisterLightProxy"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RegisterLightProxy">[docs]</a><span class="k">class</span> <span class="nc">RegisterLightProxy</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Traces creation of a new light (vtkSMParaViewPipelineController::RegisterLightProxy).&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">View</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="ow">is</span> <span class="kc">None</span>

<div class="viewcode-block" id="RegisterLightProxy.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RegisterLightProxy.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pname</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="s2">&quot;additional_lights&quot;</span><span class="p">)</span>
        <span class="n">varname</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">)</span>
        <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# Create a new &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">GetXMLLabel</span><span class="p">())</span>
        <span class="nb">filter</span> <span class="o">=</span> <span class="n">ProxyFilter</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">View</span><span class="p">:</span>
            <span class="n">viewAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">View</span><span class="p">)</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="s2">&quot;AddLight&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">ctor_args</span><span class="o">=</span><span class="s2">&quot;view=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">viewAccessor</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="s2">&quot;CreateLight&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="p">))</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RegisterTextureProxy"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RegisterTextureProxy">[docs]</a><span class="k">class</span> <span class="nc">RegisterTextureProxy</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Traces creation of a new texture (vtkSMParaViewPipelineController::RegisterTextureProxy)&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">trivial_producer_key</span><span class="p">,</span> <span class="n">proxyname</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trivial_producer_key</span> <span class="o">=</span> <span class="n">trivial_producer_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyname</span> <span class="o">=</span> <span class="n">proxyname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_from_file</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">trivial_producer_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_from_memory</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_from_file</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="ow">is</span> <span class="kc">None</span>

<div class="viewcode-block" id="RegisterTextureProxy.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RegisterTextureProxy.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pname</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="s2">&quot;textures&quot;</span><span class="p">)</span>
        <span class="n">varname</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">)</span>
        <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# Create a new &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">GetXMLLabel</span><span class="p">())</span>
        <span class="nb">filter</span> <span class="o">=</span> <span class="n">ProxyFilter</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_from_file</span><span class="p">:</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="s2">&quot;CreateTexture&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">ctor_args</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;filename=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_from_memory</span><span class="p">:</span>
            <span class="n">ctor_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;filename=None, trivial_producer_key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">trivial_producer_key</span><span class="si">}</span><span class="s2">, proxyname=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">proxyname</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="s2">&quot;CreateTexture&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">ctor_args</span><span class="o">=</span><span class="n">ctor_str</span><span class="p">))</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TraceAnimationProxy"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceAnimationProxy">[docs]</a><span class="k">class</span> <span class="nc">TraceAnimationProxy</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Traces all changes in an animation proxy.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="ow">is</span> <span class="kc">None</span>

<div class="viewcode-block" id="TraceAnimationProxy.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceAnimationProxy.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># trace timekeeper</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="s2">&quot;TimeKeeper&quot;</span><span class="p">):</span>
            <span class="n">tkTrace</span> <span class="o">=</span> <span class="n">TraceProxy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">TimeKeeper</span><span class="p">,</span> <span class="n">TimeKeeperProxyFilter</span><span class="p">(),</span> <span class="s2">&quot;# initialize the timekeeper&quot;</span><span class="p">)</span>
            <span class="n">tkTrace</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>

        <span class="c1"># create dynamic animation cues as needed.</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="s2">&quot;Cues&quot;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">cue</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">Cues</span><span class="p">:</span>
                <span class="n">cueTrace</span> <span class="o">=</span> <span class="n">TraceProxy</span><span class="p">(</span><span class="n">cue</span><span class="p">,</span> <span class="n">AnimationProxyFilter</span><span class="p">(),</span> <span class="s2">&quot;# initialize the animation track&quot;</span><span class="p">)</span>
                <span class="n">cueTrace</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>

        <span class="n">animTrace</span> <span class="o">=</span> <span class="n">TraceProxy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="n">AnimationProxyFilter</span><span class="p">(),</span> <span class="s2">&quot;# initialize the animation scene&quot;</span><span class="p">)</span>
        <span class="n">animTrace</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TraceProxy"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceProxy">[docs]</a><span class="k">class</span> <span class="nc">TraceProxy</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Traces all changes in a provided proxy.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Filter</span> <span class="o">=</span> <span class="nb">filter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="ow">is</span> <span class="kc">None</span>

<div class="viewcode-block" id="TraceProxy.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceProxy.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># We let Trace create an accessor for the proxy. We will then simply log the</span>
        <span class="c1"># default property values.</span>
        <span class="n">accessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>  <span class="c1"># type: RealProxyAccessor</span>

        <span class="c1"># Now trace properties on the proxy.</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Description</span><span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Filter</span><span class="p">))</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span></div></div>


<div class="viewcode-block" id="ExportView"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ExportView">[docs]</a><span class="k">class</span> <span class="nc">ExportView</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">exporter</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">view</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
        <span class="n">exporter</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">exporter</span><span class="p">)</span>

        <span class="n">viewAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
        <span class="n">exporterAccessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="s2">&quot;temporaryExporter&quot;</span><span class="p">,</span> <span class="n">exporter</span><span class="p">)</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# export view&quot;</span><span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> \
            <span class="n">exporterAccessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="s2">&quot;ExportView&quot;</span><span class="p">,</span> <span class="n">ExporterProxyFilter</span><span class="p">(),</span>
                                        <span class="n">ctor_args</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">, view=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="n">viewAccessor</span><span class="p">),</span>
                                        <span class="n">skip_assignment</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="n">exporterAccessor</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>  <span class="c1"># so that it will get deleted</span>
        <span class="k">del</span> <span class="n">exporterAccessor</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span></div>


<div class="viewcode-block" id="ImportView"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ImportView">[docs]</a><span class="k">class</span> <span class="nc">ImportView</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">importer</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">view</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
        <span class="n">importer</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">importer</span><span class="p">)</span>

        <span class="n">viewAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
        <span class="n">importerAccessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="s2">&quot;temporaryImporter&quot;</span><span class="p">,</span> <span class="n">importer</span><span class="p">)</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# import file&quot;</span><span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>\
            <span class="n">importerAccessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="s2">&quot;ImportView&quot;</span><span class="p">,</span> <span class="n">ExporterProxyFilter</span><span class="p">(),</span>
              <span class="n">ctor_args</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">, view=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="n">viewAccessor</span><span class="p">),</span>
              <span class="n">skip_assignment</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="n">importerAccessor</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span> <span class="c1"># so that it will get deleted</span>
        <span class="k">del</span> <span class="n">importerAccessor</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span></div>


<div class="viewcode-block" id="SaveData"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SaveData">[docs]</a><span class="k">class</span> <span class="nc">SaveData</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">writer</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">source</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
        <span class="n">sourceAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">writer</span><span class="p">)</span>
        <span class="n">writerAccessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="s2">&quot;temporaryWriter&quot;</span><span class="p">,</span> <span class="n">writer</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">port</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ctor_args_1</span> <span class="o">=</span> <span class="s2">&quot;OutputPort(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%d</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sourceAccessor</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ctor_args_1</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">sourceAccessor</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# save data&quot;</span><span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> \
            <span class="n">writerAccessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="s2">&quot;SaveData&quot;</span><span class="p">,</span> <span class="n">WriterProxyFilter</span><span class="p">(),</span>
                                      <span class="n">ctor_args</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">, proxy=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="n">ctor_args_1</span><span class="p">),</span>
                                      <span class="n">skip_assignment</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="n">writerAccessor</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>  <span class="c1"># so that it will get deleted.</span>
        <span class="k">del</span> <span class="n">writerAccessor</span>
        <span class="k">del</span> <span class="n">writer</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span></div>


<div class="viewcode-block" id="SaveScreenshotOrAnimation"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SaveScreenshotOrAnimation">[docs]</a><span class="k">class</span> <span class="nc">SaveScreenshotOrAnimation</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">helper</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">layout</span><span class="p">,</span> <span class="n">mode_screenshot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">vtkPVSession</span><span class="o">.</span><span class="n">CLIENT</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">assert</span> <span class="p">(</span><span class="n">view</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">layout</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">helper</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">helper</span><span class="p">)</span>
        <span class="n">helperAccessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="s2">&quot;temporaryHelper&quot;</span><span class="p">,</span> <span class="n">helper</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">view</span><span class="p">:</span>
            <span class="n">view</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
            <span class="n">ctor_args_1</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">layout</span><span class="p">:</span>
            <span class="n">layout</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
            <span class="n">ctor_args_1</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">mode_screenshot</span><span class="p">:</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# save screenshot&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# save animation&quot;</span><span class="p">)</span>

        <span class="n">_filter</span> <span class="o">=</span> <span class="n">ScreenShotHelperProxyFilter</span><span class="p">()</span>

        <span class="c1"># tracing &quot;Format&quot; is handled specially. PLD properties are not traced</span>
        <span class="c1"># in ctor, but we trick it as follows:</span>
        <span class="n">formatAccessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="s2">&quot;temporaryHelperFormat&quot;</span><span class="p">,</span> <span class="n">helper</span><span class="o">.</span><span class="n">Format</span><span class="p">)</span>
        <span class="n">formatProps</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">formatAccessor</span><span class="o">.</span><span class="n">get_properties</span><span class="p">()</span> <span class="k">if</span> <span class="n">_filter</span><span class="o">.</span><span class="n">should_trace_in_ctor</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
        <span class="n">format_txt</span> <span class="o">=</span> <span class="n">formatAccessor</span><span class="o">.</span><span class="n">trace_properties</span><span class="p">(</span><span class="n">formatProps</span><span class="p">,</span> <span class="n">in_ctor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">format_txt</span><span class="p">:</span>
            <span class="n">format_txt</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">    # </span><span class="si">%s</span><span class="s2"> options</span><span class="se">\n</span><span class="s2">    </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">helper</span><span class="o">.</span><span class="n">Format</span><span class="o">.</span><span class="n">GetXMLLabel</span><span class="p">(),</span> <span class="n">format_txt</span><span class="p">)</span>

        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> \
            <span class="n">helperAccessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span> \
                <span class="s2">&quot;SaveScreenshot&quot;</span> <span class="k">if</span> <span class="n">mode_screenshot</span> <span class="k">else</span> <span class="s2">&quot;SaveAnimation&quot;</span><span class="p">,</span>
                <span class="n">ScreenShotHelperProxyFilter</span><span class="p">(),</span>
                <span class="n">ctor_args</span><span class="o">=</span><span class="s2">&quot;filename=&#39;</span><span class="si">%s</span><span class="s2">&#39;, viewOrLayout=</span><span class="si">%s</span><span class="s2">, location=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">ctor_args_1</span><span class="p">,</span> <span class="n">location</span><span class="p">),</span>
                <span class="n">ctor_extra_args</span><span class="o">=</span><span class="n">format_txt</span><span class="p">,</span>
                <span class="n">skip_assignment</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="n">helperAccessor</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>
        <span class="k">del</span> <span class="n">helperAccessor</span>
        <span class="k">del</span> <span class="n">helper</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span></div>


<div class="viewcode-block" id="SaveAnimationExtracts"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SaveAnimationExtracts">[docs]</a><span class="k">class</span> <span class="nc">SaveAnimationExtracts</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Used by vtkSMSaveAnimationExtractsProxy to trace saving of extracts</span>
<span class="sd">    generation.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">assert</span> <span class="p">(</span><span class="n">proxy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="s2">&quot;temporaryWriter&quot;</span><span class="p">,</span> <span class="n">proxy</span><span class="p">)</span>

        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# save extracts&quot;</span><span class="p">)</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> \
            <span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="s2">&quot;SaveExtracts&quot;</span><span class="p">,</span> <span class="n">SaveExtractsFilter</span><span class="p">(),</span>
                                <span class="n">skip_assignment</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="k">del</span> <span class="n">accessor</span>
        <span class="k">del</span> <span class="n">proxy</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span></div>


<div class="viewcode-block" id="LoadState"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.LoadState">[docs]</a><span class="k">class</span> <span class="nc">LoadState</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_options</span> <span class="o">=</span> <span class="n">options</span>

<div class="viewcode-block" id="LoadState.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.LoadState.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">re</span>

        <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span>
        <span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span>

        <span class="n">options</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="s2">&quot;LoadStateDataFileOptions&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">GetElement</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">options</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">USE_FILES_FROM_STATE</span><span class="p">:</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# load state&quot;</span><span class="p">)</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;LoadState(&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">options</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">USE_DATA_DIRECTORY</span><span class="p">:</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# load state using data from chosen directory&quot;</span><span class="p">)</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> \
                <span class="p">[</span><span class="s2">&quot;LoadState(&#39;</span><span class="si">%s</span><span class="s2">&#39;,&quot;</span> <span class="o">%</span> <span class="n">filename</span><span class="p">,</span>
                 <span class="s2">&quot;    data_directory=&#39;</span><span class="si">%s</span><span class="s2">&#39;,&quot;</span> <span class="o">%</span> <span class="n">options</span><span class="o">.</span><span class="n">DataDirectory</span><span class="p">,</span>
                 <span class="s2">&quot;    restrict_to_data_directory=</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                 <span class="kc">True</span> <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">OnlyUseFilesInDataDirectory</span> <span class="k">else</span> <span class="kc">False</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">options</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">CHOOSE_FILES_EXPLICITLY</span><span class="p">:</span>
            <span class="nb">iter</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">PropertyIterator</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">smprop</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">:</span>
                <span class="n">pname</span> <span class="o">=</span> <span class="nb">iter</span><span class="o">.</span><span class="n">GetKey</span><span class="p">()</span>
                <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(\d+)\.(.+)&quot;</span><span class="p">,</span> <span class="n">pname</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">m</span> <span class="ow">and</span> <span class="n">options</span><span class="o">.</span><span class="n">IsPropertyModified</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)):</span>
                    <span class="n">sid</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                    <span class="n">readername</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">GetReaderName</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">sid</span><span class="p">))</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">readername</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">sid</span><span class="p">})</span>
                    <span class="k">if</span> <span class="n">smprop</span><span class="o">.</span><span class="n">GetNumberOfElements</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">d</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span> <span class="o">=</span> <span class="n">smprop</span><span class="o">.</span><span class="n">GetElement</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">d</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[</span><span class="n">smprop</span><span class="o">.</span><span class="n">GetElement</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">smprop</span><span class="o">.</span><span class="n">GetNumberOfElements</span><span class="p">())]</span>
                    <span class="n">params</span><span class="p">[</span><span class="n">sid</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span>
            <span class="k">if</span> <span class="n">params</span><span class="p">:</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# load state using specified data files&quot;</span><span class="p">)</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;LoadState(&#39;</span><span class="si">%s</span><span class="s2">&#39;,&quot;</span> <span class="o">%</span> <span class="n">filename</span><span class="p">)</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_pretty_print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;    filenames=&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># this happens when user didn&#39;t modify any paths.</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# load state&quot;</span><span class="p">)</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;LoadState(&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">options</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span></div></div>


<div class="viewcode-block" id="RegisterLayoutProxy"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RegisterLayoutProxy">[docs]</a><span class="k">class</span> <span class="nc">RegisterLayoutProxy</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

<div class="viewcode-block" id="RegisterLayoutProxy.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RegisterLayoutProxy.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">filter</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span>
        <span class="n">pname</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">,</span> <span class="s2">&quot;layouts&quot;</span><span class="p">)</span>
        <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">pname</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">)</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
            <span class="s2">&quot;# create new layout object &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">pname</span><span class="p">,</span>
            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = CreateLayout(name=&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">pname</span><span class="p">)])</span>

        <span class="c1"># Let&#39;s trace out the state for the layout.</span>
        <span class="k">def</span> <span class="nf">_trace_layout</span><span class="p">(</span><span class="n">layout</span><span class="p">,</span> <span class="n">laccessor</span><span class="p">,</span> <span class="n">location</span><span class="p">):</span>
            <span class="n">sdir</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">GetSplitDirection</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
            <span class="n">sfraction</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">GetSplitFraction</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">sdir</span> <span class="o">==</span> <span class="n">layout</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">:</span>
                <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append</span><span class="p">([</span> \
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.SplitVertical(</span><span class="si">%d</span><span class="s2">, </span><span class="si">%f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">laccessor</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">sfraction</span><span class="p">)])</span>
                <span class="n">_trace_layout</span><span class="p">(</span><span class="n">layout</span><span class="p">,</span> <span class="n">laccessor</span><span class="p">,</span> <span class="n">layout</span><span class="o">.</span><span class="n">GetFirstChild</span><span class="p">(</span><span class="n">location</span><span class="p">))</span>
                <span class="n">_trace_layout</span><span class="p">(</span><span class="n">layout</span><span class="p">,</span> <span class="n">laccessor</span><span class="p">,</span> <span class="n">layout</span><span class="o">.</span><span class="n">GetSecondChild</span><span class="p">(</span><span class="n">location</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">sdir</span> <span class="o">==</span> <span class="n">layout</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">:</span>
                <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append</span><span class="p">([</span> \
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.SplitHorizontal(</span><span class="si">%d</span><span class="s2">, </span><span class="si">%f</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">laccessor</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">sfraction</span><span class="p">)])</span>
                <span class="n">_trace_layout</span><span class="p">(</span><span class="n">layout</span><span class="p">,</span> <span class="n">laccessor</span><span class="p">,</span> <span class="n">layout</span><span class="o">.</span><span class="n">GetFirstChild</span><span class="p">(</span><span class="n">location</span><span class="p">))</span>
                <span class="n">_trace_layout</span><span class="p">(</span><span class="n">layout</span><span class="p">,</span> <span class="n">laccessor</span><span class="p">,</span> <span class="n">layout</span><span class="o">.</span><span class="n">GetSecondChild</span><span class="p">(</span><span class="n">location</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">sdir</span> <span class="o">==</span> <span class="n">layout</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">NONE</span><span class="p">:</span>
                <span class="n">view</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">GetView</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">view</span> <span class="ow">and</span> <span class="nb">filter</span><span class="p">(</span><span class="n">view</span><span class="p">):</span>
                    <span class="n">vaccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
                    <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append</span><span class="p">([</span> \
                        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.AssignView(</span><span class="si">%d</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">laccessor</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">vaccessor</span><span class="p">)])</span>

        <span class="n">_trace_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">,</span> <span class="n">accessor</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># save size, if non-empty.</span>
        <span class="n">lsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="o">.</span><span class="n">GetSize</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">lsize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">lsize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.SetSize(</span><span class="si">%d</span><span class="s2">, </span><span class="si">%d</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">lsize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lsize</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="LoadPlugin"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.LoadPlugin">[docs]</a><span class="k">class</span> <span class="nc">LoadPlugin</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">remote</span><span class="p">):</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
            <span class="s2">&quot;# load plugin&quot;</span><span class="p">,</span>
            <span class="s2">&quot;LoadPlugin(&#39;</span><span class="si">%s</span><span class="s2">&#39;, remote=</span><span class="si">%s</span><span class="s2">, ns=globals())&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">remote</span><span class="p">)])</span></div>


<div class="viewcode-block" id="CreateAnimationTrack"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.CreateAnimationTrack">[docs]</a><span class="k">class</span> <span class="nc">CreateAnimationTrack</span><span class="p">(</span><span class="n">TraceProxy</span><span class="p">):</span>
    <span class="c1"># FIXME: animation tracing support in general needs to be revamped after moving</span>
    <span class="c1"># animation control logic to the server manager from Qt layer.</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cue</span><span class="p">):</span>
        <span class="n">TraceProxy</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cue</span><span class="p">,</span> <span class="n">AnimationProxyFilter</span><span class="p">(),</span> <span class="s2">&quot;# initialize the animation track&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="RenameProxy"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RenameProxy">[docs]</a><span class="k">class</span> <span class="nc">RenameProxy</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="s2">&quot;Trace renaming of a source proxy.&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="s2">&quot;sources&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Accessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="n">proxy</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Untraceable</span><span class="p">(</span><span class="s2">&quot;Only source proxy renames are traced.&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="RenameProxy.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.RenameProxy.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Accessor</span><span class="p">:</span>
            <span class="n">newname</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_registered_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="s2">&quot;sources&quot;</span><span class="p">)</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# rename source object&quot;</span><span class="p">,</span>
                <span class="s2">&quot;RenameSource(&#39;</span><span class="si">%s</span><span class="s2">&#39;, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">newname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Accessor</span><span class="p">)])</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="SetCurrentProxy"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SetCurrentProxy">[docs]</a><span class="k">class</span> <span class="nc">SetCurrentProxy</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Traces change in active view/source etc.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selmodel</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">proxy</span> <span class="ow">and</span> <span class="n">proxy</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMOutputPort&quot;</span><span class="p">):</span>
            <span class="c1"># FIXME: need to handle port number.</span>
            <span class="n">proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">GetSourceProxy</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="n">accessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="n">pxm</span> <span class="o">=</span> <span class="n">selmodel</span><span class="o">.</span><span class="n">GetSessionProxyManager</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">selmodel</span> <span class="ow">is</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetSelectionModel</span><span class="p">(</span><span class="s2">&quot;ActiveView&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">RenderingMixin</span><span class="p">()</span><span class="o">.</span><span class="n">skip_from_trace</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">Untraceable</span><span class="p">(</span><span class="s2">&quot;skipped&quot;</span><span class="p">)</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# set active view&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SetActiveView(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">accessor</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">selmodel</span> <span class="ow">is</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetSelectionModel</span><span class="p">(</span><span class="s2">&quot;ActiveSources&quot;</span><span class="p">):</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# set active source&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SetActiveSource(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">accessor</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Untraceable</span><span class="p">(</span><span class="s2">&quot;Unknown selection model&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="CallMethod"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.CallMethod">[docs]</a><span class="k">class</span> <span class="nc">CallMethod</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">methodname</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">methodname</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">trace</span><span class="p">:</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>

<div class="viewcode-block" id="CallMethod.get_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.CallMethod.get_trace">[docs]</a>    <span class="k">def</span> <span class="nf">get_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">methodname</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="n">to_trace</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">to_trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# &quot;</span> <span class="o">+</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">])</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">accessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">))</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">CallMethod</span><span class="o">.</span><span class="n">marshall</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
        <span class="n">args</span> <span class="o">+=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">CallMethod</span><span class="o">.</span><span class="n">marshall</span><span class="p">(</span><span class="n">val</span><span class="p">))</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
        <span class="n">to_trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">accessor</span><span class="p">,</span> <span class="n">methodname</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">to_trace</span></div>

<div class="viewcode-block" id="CallMethod.marshall"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.CallMethod.marshall">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">marshall</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMProxy&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">x</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span> <span class="k">else</span> <span class="n">x</span></div></div>


<span class="k">def</span> <span class="nf">_bind_on_event</span><span class="p">(</span><span class="n">ref</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_callback</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="n">ref</span><span class="p">()</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_callback</span>


<div class="viewcode-block" id="CallMethodIfPropertiesModified"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.CallMethodIfPropertiesModified">[docs]</a><span class="k">class</span> <span class="nc">CallMethodIfPropertiesModified</span><span class="p">(</span><span class="n">CallMethod</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Similar to CallMethod, except that the trace will get logged only</span>
<span class="sd">    if the proxy fires PropertiesModified event before the trace-item is</span>
<span class="sd">    finalized.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="n">methodname</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span> <span class="o">=</span> <span class="n">proxy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">methodname</span> <span class="o">=</span> <span class="n">methodname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">AddObserver</span><span class="p">(</span><span class="s2">&quot;PropertyModifiedEvent&quot;</span><span class="p">,</span> <span class="n">_bind_on_event</span><span class="p">(</span><span class="n">weakref</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modified</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="CallMethodIfPropertiesModified.on_event"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.CallMethodIfPropertiesModified.on_event">[docs]</a>    <span class="k">def</span> <span class="nf">on_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modified</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="CallMethodIfPropertiesModified.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.CallMethodIfPropertiesModified.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">RemoveObserver</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">modified</span><span class="p">:</span>
            <span class="n">trace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">methodname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>
        <span class="n">CallMethod</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="o">.</span><span class="n">RemoveObserver</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span></div>


<div class="viewcode-block" id="CallFunction"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.CallFunction">[docs]</a><span class="k">class</span> <span class="nc">CallFunction</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">functionname</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">to_trace</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">to_trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# &quot;</span> <span class="o">+</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">])</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">CallMethod</span><span class="o">.</span><span class="n">marshall</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
        <span class="n">args</span> <span class="o">+=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">CallMethod</span><span class="o">.</span><span class="n">marshall</span><span class="p">(</span><span class="n">val</span><span class="p">))</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
        <span class="n">to_trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">functionname</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">)))</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">to_trace</span><span class="p">)</span></div>


<div class="viewcode-block" id="TraceText"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.TraceText">[docs]</a><span class="k">class</span> <span class="nc">TraceText</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add text directly to the trace. For paraview client applications to use with non-proxy objects.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">to_trace</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">to_trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# &quot;</span> <span class="o">+</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">])</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">to_trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">to_trace</span><span class="p">)</span></div>


<div class="viewcode-block" id="ChooseTexture"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.ChooseTexture">[docs]</a><span class="k">class</span> <span class="nc">ChooseTexture</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Traces changes of texture object selection. For example renderview background.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">texture</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="n">TraceItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">owner</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">owner</span><span class="p">)</span>
        <span class="n">texture</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">texture</span><span class="p">)</span>
        <span class="n">ownerAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">owner</span><span class="p">)</span>
        <span class="n">textureAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">texture</span><span class="p">)</span>

        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
            <span class="s2">&quot;# change texture&quot;</span><span class="p">,</span>
            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2"> = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ownerAccessor</span><span class="p">),</span> <span class="n">prop</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">(),</span> <span class="nb">str</span><span class="p">(</span><span class="n">textureAccessor</span><span class="p">))])</span></div>


<div class="viewcode-block" id="SaveCameras"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SaveCameras">[docs]</a><span class="k">class</span> <span class="nc">SaveCameras</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">BookkeepingItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This is used to request recording of cameras in trace&quot;&quot;&quot;</span>

    <span class="c1"># This is a little hackish at this point. We&#39;ll figure something cleaner out</span>
    <span class="c1"># in time.</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s2">&quot;# &quot;</span> <span class="o">+</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]])</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="n">trace</span><span class="p">:</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>

<div class="viewcode-block" id="SaveCameras.get_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SaveCameras.get_trace">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_trace</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">proxy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">views</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">simple</span><span class="o">.</span><span class="n">GetViews</span><span class="p">()</span> <span class="k">if</span> <span class="n">Trace</span><span class="o">.</span><span class="n">has_accessor</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">views</span><span class="p">:</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="n">v</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">proxy</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewLayoutProxy&quot;</span><span class="p">):</span>
            <span class="n">views</span> <span class="o">=</span> <span class="n">simple</span><span class="o">.</span><span class="n">GetViewsInLayout</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">views</span><span class="p">:</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="n">v</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">proxy</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewProxy&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="s2">&quot;CameraPosition&quot;</span><span class="p">):</span>
                <span class="n">accessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
                <span class="n">prop_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;CameraPosition&quot;</span><span class="p">,</span> <span class="s2">&quot;CameraFocalPoint&quot;</span><span class="p">,</span>
                              <span class="s2">&quot;CameraViewUp&quot;</span><span class="p">,</span> <span class="s2">&quot;CameraViewAngle&quot;</span><span class="p">,</span>
                              <span class="s2">&quot;CameraParallelScale&quot;</span><span class="p">,</span> <span class="s2">&quot;CameraParallelProjection&quot;</span><span class="p">,</span>
                              <span class="s2">&quot;EyeAngle&quot;</span><span class="p">,</span> <span class="s2">&quot;InteractionMode&quot;</span><span class="p">]</span>
                <span class="n">props</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">accessor</span><span class="o">.</span><span class="n">get_properties</span><span class="p">()</span> \
                         <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">get_property_name</span><span class="p">()</span> <span class="ow">in</span> <span class="n">prop_names</span> <span class="ow">and</span> \
                         <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span><span class="o">.</span><span class="n">IsValueDefault</span><span class="p">()]</span>
                <span class="k">if</span> <span class="n">props</span><span class="p">:</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# current camera placement for </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">accessor</span><span class="p">)</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">accessor</span><span class="o">.</span><span class="n">trace_properties</span><span class="p">(</span><span class="n">props</span><span class="p">,</span> <span class="n">in_ctor</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># non-camera views</span>
        <span class="k">elif</span> <span class="n">proxy</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMAnimationSceneProxy&quot;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">view</span> <span class="ow">in</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="s2">&quot;ViewModules&quot;</span><span class="p">):</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="n">view</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Untraceable</span><span class="p">(</span><span class="s2">&quot;Invalid argument type </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">proxy</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="SaveLayoutSizes"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SaveLayoutSizes">[docs]</a><span class="k">class</span> <span class="nc">SaveLayoutSizes</span><span class="p">(</span><span class="n">RenderingMixin</span><span class="p">,</span> <span class="n">BookkeepingItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A bookkeeping item to trace sizes for all layouts used by the trace (or</span>
<span class="sd">    the one explicitly passed to the constructor).</span>

<span class="sd">    This ensures that all the layouts (and consequently views in those layout)</span>
<span class="sd">    are setup with sizes similar to those in the UI (BUG #20102).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">trace</span><span class="p">:</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>

<div class="viewcode-block" id="SaveLayoutSizes.get_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.SaveLayoutSizes.get_trace">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_trace</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">proxy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># scan all views we have created trace-accessors for and get layouts</span>
            <span class="c1"># for those views.</span>
            <span class="n">views</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">simple</span><span class="o">.</span><span class="n">GetViews</span><span class="p">()</span> <span class="k">if</span> <span class="n">Trace</span><span class="o">.</span><span class="n">has_accessor</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
            <span class="n">layouts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">simple</span><span class="o">.</span><span class="n">GetLayout</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">views</span> \
                           <span class="k">if</span> <span class="n">simple</span><span class="o">.</span><span class="n">GetLayout</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">layouts</span><span class="p">:</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="n">l</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">proxy</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewLayoutProxy&quot;</span><span class="p">):</span>
            <span class="n">layoutAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
            <span class="n">lsize</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetSize</span><span class="p">()</span>
            <span class="n">trace</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;# layout/tab size in pixels&quot;</span><span class="p">,</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.SetSize(</span><span class="si">%d</span><span class="s2">, </span><span class="si">%d</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">layoutAccessor</span><span class="p">,</span> <span class="n">lsize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lsize</span><span class="p">[</span><span class="mi">1</span><span class="p">])])</span>
        <span class="k">elif</span> <span class="n">proxy</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewProxy&quot;</span><span class="p">):</span>
            <span class="n">l</span> <span class="o">=</span> <span class="n">simple</span><span class="o">.</span><span class="n">GetLayout</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">l</span><span class="p">:</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="n">l</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Untraceable</span><span class="p">(</span><span class="s2">&quot;Invalid argument type </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">proxy</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">trace</span><span class="o">.</span><span class="n">raw_data</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="CreateExtractor"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.CreateExtractor">[docs]</a><span class="k">class</span> <span class="nc">CreateExtractor</span><span class="p">(</span><span class="n">TraceItem</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Traces creation of extractors&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xmlname</span><span class="p">,</span> <span class="n">producer</span><span class="p">,</span> <span class="n">extractor</span><span class="p">,</span> <span class="n">registrationName</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CreateExtractor</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="n">producer</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">producer</span><span class="p">)</span>
        <span class="n">extractor</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">extractor</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ProducerAccessor</span> <span class="o">=</span> <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">producer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OutputPort</span> <span class="o">=</span> <span class="n">producer</span><span class="o">.</span><span class="n">Port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Extractor</span> <span class="o">=</span> <span class="n">extractor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">XMLName</span> <span class="o">=</span> <span class="n">xmlname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Name</span> <span class="o">=</span> <span class="n">registrationName</span>

<div class="viewcode-block" id="CreateExtractor.finalize"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.CreateExtractor.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">TraceOutput</span><span class="p">()</span>
        <span class="n">port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">OutputPort</span>
        <span class="n">regName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Name</span>
        <span class="n">accessor</span> <span class="o">=</span> <span class="n">ProxyAccessor</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">get_varname</span><span class="p">(</span><span class="n">regName</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Extractor</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Comment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Comment</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# create extractor&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">port</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> \
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = CreateExtractor(&#39;</span><span class="si">%s</span><span class="s2">&#39;, OutputPort(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%d</span><span class="s2">), registrationName=&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> \
                <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">accessor</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">XMLName</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ProducerAccessor</span><span class="p">),</span> <span class="n">port</span><span class="p">,</span> <span class="n">regName</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> \
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = CreateExtractor(&#39;</span><span class="si">%s</span><span class="s2">&#39;, </span><span class="si">%s</span><span class="s2">, registrationName=&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span> <span class="o">%</span> \
                <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">accessor</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">XMLName</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ProducerAccessor</span><span class="p">),</span> <span class="n">regName</span><span class="p">))</span>

        <span class="n">ctor_trace</span> <span class="o">=</span> <span class="n">accessor</span><span class="o">.</span><span class="n">trace_ctor</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">ExtractorFilter</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">ctor_trace</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;# trace defaults for the extractor.&quot;</span><span class="p">)</span>
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ctor_trace</span><span class="p">)</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">raw_data</span><span class="p">())</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CreateExtractor</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span></div></div>


<span class="c1"># __ActiveTraceItems is simply used to keep track of items that are currently</span>
<span class="c1"># active to avoid non-nestable trace items from being created when previous</span>
<span class="c1"># items are active.</span>
<span class="n">__ActiveTraceItems</span> <span class="o">=</span> <span class="p">[]</span>


<span class="k">def</span> <span class="nf">_create_trace_item_internal</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">__ActiveTraceItems</span>

    <span class="c1"># trim __ActiveTraceItems to remove None references.</span>
    <span class="n">__ActiveTraceItems</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">__ActiveTraceItems</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">]</span>

    <span class="n">g</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">g</span> <span class="ow">and</span> <span class="n">callable</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="n">key</span><span class="p">]):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">args</span> <span class="k">if</span> <span class="n">args</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span> <span class="k">if</span> <span class="n">kwargs</span> <span class="k">else</span> <span class="p">{}</span>
        <span class="n">traceitemtype</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">__ActiveTraceItems</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> \
                <span class="nb">issubclass</span><span class="p">(</span><span class="n">traceitemtype</span><span class="p">,</span> <span class="n">NestableTraceItem</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">__ActiveTraceItems</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> \
                    <span class="nb">isinstance</span><span class="p">(</span><span class="n">__ActiveTraceItems</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">](),</span> <span class="n">BlockTraceItems</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">Untraceable</span><span class="p">(</span><span class="s2">&quot;Not tracing since `BlockTraceItems` is active.&quot;</span><span class="p">)</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="n">traceitemtype</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">traceitemtype</span><span class="p">,</span> <span class="n">BookkeepingItem</span><span class="p">):</span>
                <span class="n">__ActiveTraceItems</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weakref</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="n">instance</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">instance</span>
        <span class="k">raise</span> <span class="n">Untraceable</span><span class="p">(</span><span class="s2">&quot;Non-nestable trace item. Ignoring in current context.&quot;</span><span class="p">)</span>
    <span class="k">raise</span> <span class="n">Untraceable</span><span class="p">(</span><span class="s2">&quot;Unknown trace item type </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">key</span><span class="p">)</span>
    <span class="c1"># print (&quot;Hello again&quot;, key, args)</span>
    <span class="c1"># return A(key)</span>


<span class="k">def</span> <span class="nf">_start_trace_internal</span><span class="p">(</span><span class="n">preamble</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;**internal** starts tracing. Called by vtkSMTrace::StartTrace().&quot;&quot;&quot;</span>
    <span class="n">Trace</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">preamble</span><span class="p">:</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">preamble</span><span class="p">)</span>
    <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append</span><span class="p">([</span> \
        <span class="s2">&quot;#### import the simple module from the paraview&quot;</span><span class="p">,</span>
        <span class="s2">&quot;from paraview.simple import *&quot;</span><span class="p">])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">_get_skip_rendering</span><span class="p">():</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append</span><span class="p">([</span> \
            <span class="s2">&quot;#### disable automatic camera reset on &#39;Show&#39;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;paraview.simple._DisableFirstRenderCameraReset()&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="kc">True</span>


<span class="k">def</span> <span class="nf">_stop_trace_internal</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;**internal** stops trace. Called by vtkSMTrace::StopTrace().&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">_get_skip_rendering</span><span class="p">():</span>
        <span class="c1"># ensure we trace the active view, so camera changes will be recorded.</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">get_accessor</span><span class="p">(</span><span class="n">simple</span><span class="o">.</span><span class="n">GetActiveView</span><span class="p">())</span>

        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
            <span class="s2">&quot;#================================================================&quot;</span><span class="p">,</span>
            <span class="s2">&quot;# addendum: following script captures some of the application&quot;</span><span class="p">,</span>
            <span class="s2">&quot;# state to faithfully reproduce the visualization during playback&quot;</span><span class="p">,</span>
            <span class="s2">&quot;#================================================================&quot;</span><span class="p">])</span>

        <span class="c1"># save layout sizes</span>
        <span class="n">layout_trace</span> <span class="o">=</span> <span class="n">SaveLayoutSizes</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">layout_trace</span><span class="p">:</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;#--------------------------------&quot;</span><span class="p">,</span>
                <span class="s2">&quot;# saving layout sizes for layouts&quot;</span><span class="p">])</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">layout_trace</span><span class="p">)</span>

        <span class="n">camera_trace</span> <span class="o">=</span> <span class="n">SaveCameras</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">camera_trace</span><span class="p">:</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">([</span> \
                <span class="s2">&quot;#-----------------------------------&quot;</span><span class="p">,</span>
                <span class="s2">&quot;# saving camera placements for views&quot;</span><span class="p">])</span>
            <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">camera_trace</span><span class="p">)</span>
        <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">append_separated</span><span class="p">(</span><span class="n">_get_standard_postamble_comment</span><span class="p">())</span>
    <span class="n">trace</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="p">)</span>
    <span class="n">Trace</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

    <span class="c1"># essential to ensure any obsolete accessor don&#39;t linger can cause havoc</span>
    <span class="c1"># when saving state following a Python trace session</span>
    <span class="c1"># (paraview/paraview#18994)</span>
    <span class="kn">import</span> <span class="nn">gc</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">trace</span>


<span class="k">def</span> <span class="nf">_get_standard_postamble_comment</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;**internal** get a standard postamble comment.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">##--------------------------------------------</span>
<span class="s2">## You may need to add some code at the end of this python script depending on your usage, eg:</span>
<span class="s2">#</span>
<span class="s2">## Render all views to see them appears</span>
<span class="s2"># RenderAllViews()</span>
<span class="s2">#</span>
<span class="s2">## Interact with the view, usefull when running from pvpython</span>
<span class="s2"># Interact()</span>
<span class="s2">#</span>
<span class="s2">## Save a screenshot of the active view</span>
<span class="s2"># SaveScreenshot(&quot;path/to/screenshot.png&quot;)</span>
<span class="s2">#</span>
<span class="s2">## Save a screenshot of a layout (multiple splitted view)</span>
<span class="s2"># SaveScreenshot(&quot;path/to/screenshot.png&quot;, GetLayout())</span>
<span class="s2">#</span>
<span class="s2">## Save all &quot;Extractors&quot; from the pipeline browser</span>
<span class="s2"># SaveExtracts()</span>
<span class="s2">#</span>
<span class="s2">## Save a animation of the current active view</span>
<span class="s2"># SaveAnimation()</span>
<span class="s2">#</span>
<span class="s2">## Please refer to the documentation of paraview.simple</span>
<span class="s2">## https://kitware.github.io/paraview-docs/latest/python/paraview.simple.html</span>
<span class="s2">##--------------------------------------------&quot;&quot;&quot;</span>


<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1"># Public methods</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<div class="viewcode-block" id="start_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.start_trace">[docs]</a><span class="k">def</span> <span class="nf">start_trace</span><span class="p">(</span><span class="n">preamble</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Starting tracing. On successful start, will return a vtkSMTrace object.</span>
<span class="sd">    One can set tracing options on it to control how the tracing. If tracing was</span>
<span class="sd">    already started, calling this contine with the same trace.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sm</span><span class="o">.</span><span class="n">vtkSMTrace</span><span class="o">.</span><span class="n">StartTrace</span><span class="p">(</span><span class="n">preamble</span><span class="p">)</span></div>


<div class="viewcode-block" id="stop_trace"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.stop_trace">[docs]</a><span class="k">def</span> <span class="nf">stop_trace</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Stops the trace and returns the generated trace output string.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sm</span><span class="o">.</span><span class="n">vtkSMTrace</span><span class="o">.</span><span class="n">StopTrace</span><span class="p">()</span></div>


<div class="viewcode-block" id="get_current_trace_output"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.get_current_trace_output">[docs]</a><span class="k">def</span> <span class="nf">get_current_trace_output</span><span class="p">(</span><span class="n">raw</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the trace generated so far in the tracing process.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span> <span class="k">else</span> <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">raw_data</span><span class="p">()</span></div>


<div class="viewcode-block" id="get_current_trace_output_and_reset"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.get_current_trace_output_and_reset">[docs]</a><span class="k">def</span> <span class="nf">get_current_trace_output_and_reset</span><span class="p">(</span><span class="n">raw</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Equivalent to calling the following code:</span>

<span class="sd">        get_current_trace_output(raw)</span>
<span class="sd">        reset_trace_output()</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">get_current_trace_output</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
    <span class="n">reset_trace_output</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">output</span></div>


<div class="viewcode-block" id="reset_trace_output"><a class="viewcode-back" href="../../paraview.smtrace.html#paraview.smtrace.reset_trace_output">[docs]</a><span class="k">def</span> <span class="nf">reset_trace_output</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Resets the trace output without resetting the tracing datastructures</span>
<span class="sd">    themselves.&quot;&quot;&quot;</span>
    <span class="n">Trace</span><span class="o">.</span><span class="n">Output</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span></div>


<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running test&quot;</span><span class="p">)</span>
    <span class="n">start_trace</span><span class="p">()</span>

    <span class="n">s</span> <span class="o">=</span> <span class="n">simple</span><span class="o">.</span><span class="n">Sphere</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">simple</span><span class="o">.</span><span class="n">PlotOverLine</span><span class="p">()</span>
    <span class="n">simple</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;***** TRACE RESULT *****&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">stop_trace</span><span class="p">())</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013, Kitware, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   
  <!-- KW:BEGIN -->
  <script type="text/javascript" src="/paraview-docs/paraview-version.js"></script>
  <!-- KW:END -->
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>