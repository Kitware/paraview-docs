<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>paraview.simple &mdash; ParaView/Python 5.12.1-1406-gaa27439101 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/pvIcon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          <ul>
            <li> <a href="../../index.html">
              <img src="../../_static/paraview-logo-small.png"
              alt="ParaView/Python"></img></a> </li>
            <li class="version"> version 5.12.1-1406-gaa27439101</li>
          </ul>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../quick-start.html">Quick-Start :  A Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.html">The ParaView Python Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.simple.html">simple</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.servermanager.html">servermanager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.catalyst.html">catalyst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.coprocessing.html">coprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.benchmark.html">benchmark</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../paraview.servermanager_proxies.html">Available readers, sources, writers, filters and animation cues</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api-changes.html">API Changes between ParaView versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ParaView/Python</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <a href="../../genindex.html" class="float-right">Index</a> 
          <li><a href="../index.html">Module code</a> &raquo;</li>
      <li>paraview.simple</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for paraview.simple</h1><div class="highlight"><pre>
<span></span><span class="c1"># SPDX-FileCopyrightText: Copyright (c) Kitware Inc.</span>
<span class="c1"># SPDX-License-Identifier: BSD-3-Clause</span>

<span class="sa">r</span><span class="sd">&quot;&quot;&quot;simple is a module for using paraview server manager in Python. It</span>
<span class="sd">provides a simple convenience layer to functionality provided by the</span>
<span class="sd">C++ classes wrapped to Python as well as the servermanager module.</span>

<span class="sd">A simple example::</span>

<span class="sd">  from paraview.simple import *</span>

<span class="sd">  # Create a new sphere proxy on the active connection and register it</span>
<span class="sd">  # in the sources group.</span>
<span class="sd">  sphere = Sphere(ThetaResolution=16, PhiResolution=32)</span>

<span class="sd">  # Apply a shrink filter</span>
<span class="sd">  shrink = Shrink(sphere)</span>

<span class="sd">  # Turn the visibility of the shrink object on.</span>
<span class="sd">  Show(shrink)</span>

<span class="sd">  # Render the scene</span>
<span class="sd">  Render()</span>

<span class="sd">Scripts generated by ParaView&#39;s Python Tracing, Python state saving, and</span>
<span class="sd">Catalyst saving use functions in this module.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span>

<span class="kn">import</span> <span class="nn">paraview</span>
<span class="kn">from</span> <span class="nn">paraview</span> <span class="kn">import</span> <span class="n">servermanager</span>
<span class="kn">import</span> <span class="nn">paraview._backwardscompatibilityhelper</span>
<span class="kn">from</span> <span class="nn">paraview.modules.vtkRemotingCore</span> <span class="kn">import</span> <span class="n">vtkPVSession</span>

<span class="c1"># Bring in OutputPort</span>
<span class="kn">from</span> <span class="nn">paraview.servermanager</span> <span class="kn">import</span> <span class="n">OutputPort</span>

<span class="c1"># Bring in selection functions</span>
<span class="kn">from</span> <span class="nn">.selection</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,):</span>
    <span class="n">xrange</span> <span class="o">=</span> <span class="nb">range</span>


<div class="viewcode-block" id="GetParaViewVersion"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetParaViewVersion">[docs]</a><span class="k">def</span> <span class="nf">GetParaViewVersion</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;:return: The version of the ParaView build in (major, minor) form.</span>
<span class="sd">    :rtype: 2-element tuple&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">paraview</span><span class="o">.</span><span class="n">_version</span><span class="p">(</span><span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetVersionMajor</span><span class="p">(),</span>
                             <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetVersionMinor</span><span class="p">())</span></div>


<div class="viewcode-block" id="GetParaViewSourceVersion"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetParaViewSourceVersion">[docs]</a><span class="k">def</span> <span class="nf">GetParaViewSourceVersion</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;:return: the ParaView source version string, e.g.,</span>
<span class="sd">        &#39;paraview version x.x.x, Date: YYYY-MM-DD&#39;.</span>
<span class="sd">    :rtype: str&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetParaViewSourceVersion</span><span class="p">()</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Client/Server Connection methods</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="Disconnect"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.Disconnect">[docs]</a><span class="k">def</span> <span class="nf">Disconnect</span><span class="p">(</span><span class="n">ns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Disconnect from the currently connected server and free the active</span>
<span class="sd">    session. Does not shut down the client application where the call is executed.</span>

<span class="sd">    :param ns: Namespace in which ParaView functions were created. Optional, defaults</span>
<span class="sd">        to the namespace returned by `globals()`</span>
<span class="sd">    :type ns: Dict or `None`</span>
<span class="sd">    :param force: Force disconnection in a simultaneous connection. Optional, defaults</span>
<span class="sd">        to forcing disconnection.</span>
<span class="sd">    :type force: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ns</span><span class="p">:</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()</span>

    <span class="n">supports_simutaneous_connections</span> <span class="o">=</span> \
        <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkProcessModule</span><span class="o">.</span><span class="n">GetProcessModule</span><span class="p">()</span><span class="o">.</span><span class="n">GetMultipleSessionsSupport</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span> <span class="ow">and</span> <span class="n">supports_simutaneous_connections</span><span class="p">:</span>
        <span class="c1"># This is an internal Disconnect request that doesn&#39;t need to happen in</span>
        <span class="c1"># multi-server setup. Ignore it.</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">:</span>
        <span class="n">_remove_functions</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span>
        <span class="n">servermanager</span><span class="o">.</span><span class="n">Disconnect</span><span class="p">()</span>
        <span class="kn">import</span> <span class="nn">gc</span>
        <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="Connect"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.Connect">[docs]</a><span class="k">def</span> <span class="nf">Connect</span><span class="p">(</span><span class="n">ds_host</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ds_port</span><span class="o">=</span><span class="mi">11111</span><span class="p">,</span> <span class="n">rs_host</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rs_port</span><span class="o">=</span><span class="mi">11111</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a connection to a server.</span>

<span class="sd">    :param ds_host: Data server hostname. Needed to set up a client/data server/render server connection.</span>
<span class="sd">    :type ds_host: string</span>
<span class="sd">    :param ds_port: Data server port to listen on.</span>
<span class="sd">    :type ds_port: int</span>
<span class="sd">    :param rs_host: Render server hostname. Needed to set up a client/data server/render server connection.</span>
<span class="sd">    :type rs_host: string</span>
<span class="sd">    :param rs_port: Render server port to listen on.</span>
<span class="sd">    :type rs_port: int</span>
<span class="sd">    :param timeout: Time in seconds at which the connection is abandoned if not made.</span>
<span class="sd">    :type timeout: int</span>

<span class="sd">    Example usage connecting to a host named &quot;amber&quot;::</span>

<span class="sd">        Connect(&quot;amber&quot;) # Connect to a single server at default port</span>
<span class="sd">        Connect(&quot;amber&quot;, 12345) # Connect to a single server at port 12345</span>
<span class="sd">        Connect(&quot;amber&quot;, 11111, &quot;vis_cluster&quot;, 11111) # connect to data server, render server pair</span>
<span class="sd">        Connect(&quot;amber&quot;, timeout=30) # Connect to a single server at default port with a 30s timeout instead of default 60s</span>
<span class="sd">        Connect(&quot;amber&quot;, timeout=-1) # Connect to a single server at default port with no timeout instead of default 60s</span>
<span class="sd">        Connect(&quot;amber&quot;, timeout=0)  # Connect to a single server at default port without retrying instead of retrying for</span>
<span class="sd">        the default 60s</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Disconnect</span><span class="p">(</span><span class="nb">globals</span><span class="p">(),</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">connection</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">Connect</span><span class="p">(</span><span class="n">ds_host</span><span class="p">,</span> <span class="n">ds_port</span><span class="p">,</span> <span class="n">rs_host</span><span class="p">,</span> <span class="n">rs_port</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">connection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">_initializeSession</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>
        <span class="n">_add_functions</span><span class="p">(</span><span class="nb">globals</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">connection</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="ReverseConnect"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ReverseConnect">[docs]</a><span class="k">def</span> <span class="nf">ReverseConnect</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a reverse connection to a server.  First, disconnects from any servers,</span>
<span class="sd">    then listens on port and waits for an incoming connection from the server.</span>

<span class="sd">    :param port: The port to listen on for incoming connections.</span>
<span class="sd">    :type port: int</span>
<span class="sd">    :return: Connection object</span>
<span class="sd">    :rtype:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Disconnect</span><span class="p">(</span><span class="nb">globals</span><span class="p">(),</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">connection</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ReverseConnect</span><span class="p">(</span><span class="n">port</span><span class="p">)</span>
    <span class="n">_initializeSession</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>
    <span class="n">_add_functions</span><span class="p">(</span><span class="nb">globals</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">connection</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="ResetSession"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ResetSession">[docs]</a><span class="k">def</span> <span class="nf">ResetSession</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Reset the session to its initial state. All pipeline readers, sources,</span>
<span class="sd">    filters extractors, and representations are removed.&quot;&quot;&quot;</span>
    <span class="n">connection</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ResetSession</span><span class="p">()</span>
    <span class="n">_initializeSession</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>
    <span class="n">_add_functions</span><span class="p">(</span><span class="nb">globals</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">connection</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Multi-servers</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="SetActiveConnection"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SetActiveConnection">[docs]</a><span class="k">def</span> <span class="nf">SetActiveConnection</span><span class="p">(</span><span class="n">connection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ns</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the active connection. If the process was run without multi-server</span>
<span class="sd">    enabled and this method is called with a non-None argument while an</span>
<span class="sd">    ActiveConnection is present, it will raise a RuntimeError.</span>

<span class="sd">    :param connection: If provided, changes the current connection.</span>
<span class="sd">    :type connection: Connection object.</span>
<span class="sd">    :param ns: Namespace in which functions from the old Connection are removed</span>
<span class="sd">        and functions in the new Connection are added.</span>
<span class="sd">    :raises RuntimeError: If called when ParaView is not running in multi-server</span>
<span class="sd">        mode, a `RuntimeError` will be raised.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ns</span><span class="p">:</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span> <span class="o">!=</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">_remove_functions</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span>
        <span class="n">servermanager</span><span class="o">.</span><span class="n">SetActiveConnection</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>
        <span class="n">_add_functions</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Views and Layout methods</span>
<span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="CreateView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateView">[docs]</a><span class="k">def</span> <span class="nf">CreateView</span><span class="p">(</span><span class="n">view_xml_name</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates and returns the specified proxy view based on its name/label.</span>
<span class="sd">    Also set params keywords arguments as view properties.</span>

<span class="sd">    :param view_xml_name: Name of the requested View as it appears in the proxy</span>
<span class="sd">        definition XML. Examples include RenderView, ImageChartView,</span>
<span class="sd">        SpreadSheetView, etc.</span>
<span class="sd">    :param params: Dictionary created from named arguments. If one of these</span>
<span class="sd">        arguments is named &#39;registrationName&#39;, the string value associated</span>
<span class="sd">        with it will be used as the name of the proxy. That name will appear</span>
<span class="sd">        in the Pipeline Browser of the ParaView GUI, and it is the name to</span>
<span class="sd">        be passed to the FindView() function to find this view. Any additional</span>
<span class="sd">        named arguments will be passed as properties to initialize the view.</span>
<span class="sd">    :return: The created view Python object.</span>
<span class="sd">    :rtype:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">view</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_create_view</span><span class="p">(</span><span class="n">view_xml_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to create requested view&quot;</span><span class="p">,</span> <span class="n">view_xml_name</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">registrationName</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;registrationName&quot;</span><span class="p">]</span>
        <span class="k">del</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;registrationName&quot;</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">registrationName</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;guiName&quot;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;guiName&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">registrationName</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">PreInitializeProxy</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">PostInitializeProxy</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">RegisterViewProxy</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">registrationName</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">paraview</span><span class="o">.</span><span class="n">compatibility</span><span class="o">.</span><span class="n">GetVersion</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
        <span class="c1"># older versions automatically assigned view to a</span>
        <span class="c1"># layout.</span>
        <span class="n">controller</span><span class="o">.</span><span class="n">AssignViewToLayout</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">paraview</span><span class="o">.</span><span class="n">compatibility</span><span class="o">.</span><span class="n">GetVersion</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;UseColorPaletteForBackground&quot;</span><span class="p">):</span>
            <span class="n">view</span><span class="o">.</span><span class="n">UseColorPaletteForBackground</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># setup an interactor if current process support interaction if an</span>
    <span class="c1"># interactor hasn&#39;t already been set. This overcomes the problem where VTK</span>
    <span class="c1"># segfaults if the interactor is created after the window was created.</span>
    <span class="n">view</span><span class="o">.</span><span class="n">MakeRenderWindowInteractor</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="kn">from</span> <span class="nn">.catalyst.detail</span> <span class="kn">import</span> <span class="n">IsInsitu</span><span class="p">,</span> <span class="n">RegisterView</span>
    <span class="k">if</span> <span class="n">IsInsitu</span><span class="p">():</span>
        <span class="c1"># tag the view to know which pipeline this came from.</span>
        <span class="n">RegisterView</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">view</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="CreateRenderView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateRenderView">[docs]</a><span class="k">def</span> <span class="nf">CreateRenderView</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create standard 3D render view.</span>
<span class="sd">    See :func:`CreateView` for argument documentation&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CreateView</span><span class="p">(</span><span class="s2">&quot;RenderView&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="CreateXYPlotView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateXYPlotView">[docs]</a><span class="k">def</span> <span class="nf">CreateXYPlotView</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create XY plot Chart view.</span>
<span class="sd">    See :func:`CreateView` for argument documentation&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CreateView</span><span class="p">(</span><span class="s2">&quot;XYChartView&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="CreateXYPointPlotView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateXYPointPlotView">[docs]</a><span class="k">def</span> <span class="nf">CreateXYPointPlotView</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create XY plot point Chart view.</span>
<span class="sd">    See :func:`CreateView` for argument documentation&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CreateView</span><span class="p">(</span><span class="s2">&quot;XYPointChartView&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>


<div class="viewcode-block" id="CreateBarChartView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateBarChartView">[docs]</a><span class="k">def</span> <span class="nf">CreateBarChartView</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create Bar Chart view.</span>
<span class="sd">    See :func:`CreateView` for argument documentation&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CreateView</span><span class="p">(</span><span class="s2">&quot;XYBarChartView&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="CreateComparativeRenderView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateComparativeRenderView">[docs]</a><span class="k">def</span> <span class="nf">CreateComparativeRenderView</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create Comparative view.</span>
<span class="sd">    See :func:`CreateView` for argument documentation&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CreateView</span><span class="p">(</span><span class="s2">&quot;ComparativeRenderView&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="CreateComparativeXYPlotView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateComparativeXYPlotView">[docs]</a><span class="k">def</span> <span class="nf">CreateComparativeXYPlotView</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create comparative XY plot Chart view.</span>
<span class="sd">    See :func:`CreateView` for argument documentation&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CreateView</span><span class="p">(</span><span class="s2">&quot;ComparativeXYPlotView&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="CreateComparativeBarChartView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateComparativeBarChartView">[docs]</a><span class="k">def</span> <span class="nf">CreateComparativeBarChartView</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create comparative Bar Chart view.</span>
<span class="sd">    See :func:`CreateView` for argument documentation&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CreateView</span><span class="p">(</span><span class="s2">&quot;ComparativeBarChartView&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="CreateParallelCoordinatesChartView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateParallelCoordinatesChartView">[docs]</a><span class="k">def</span> <span class="nf">CreateParallelCoordinatesChartView</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create Parallel Coordinates Chart view.</span>
<span class="sd">    See :func:`CreateView` for argument documentation&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CreateView</span><span class="p">(</span><span class="s2">&quot;ParallelCoordinatesChartView&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="Create2DRenderView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.Create2DRenderView">[docs]</a><span class="k">def</span> <span class="nf">Create2DRenderView</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create the standard 3D render view with the 2D interaction mode turned on.</span>
<span class="sd">    See :func:`CreateView` for argument documentation&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CreateView</span><span class="p">(</span><span class="s2">&quot;2DRenderView&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetRenderView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetRenderView">[docs]</a><span class="k">def</span> <span class="nf">GetRenderView</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns the active view if there is one. Else creates and returns a new view.</span>
<span class="sd">    :return: the active view&quot;&quot;&quot;</span>
    <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="c1"># it&#39;s possible that there&#39;s no active view, but a render view exists.</span>
        <span class="c1"># If so, locate that and return it (before trying to create a new one).</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">GetRenderView</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">CreateRenderView</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">view</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetRenderViews"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetRenderViews">[docs]</a><span class="k">def</span> <span class="nf">GetRenderViews</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Get all render views in a list.</span>
<span class="sd">    :return: all render views in a list.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">GetRenderViews</span><span class="p">()</span></div>

<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetViews"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetViews">[docs]</a><span class="k">def</span> <span class="nf">GetViews</span><span class="p">(</span><span class="n">viewtype</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns all views in a list.</span>

<span class="sd">    :param viewtype: If provided, only the views of the</span>
<span class="sd">        specified type are returned. Optional, defaults to `None`.</span>
<span class="sd">    :type viewtype: str</span>
<span class="sd">    :return: list of views of the given viewtype, or all views if viewtype is `None`.</span>
<span class="sd">    :rtype: list of view proxies&quot;&quot;&quot;</span>
    <span class="n">val</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">aProxy</span> <span class="ow">in</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetProxiesInGroup</span><span class="p">(</span><span class="s2">&quot;views&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">aProxy</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewProxy&quot;</span><span class="p">)</span> <span class="ow">and</span> \
                <span class="p">(</span><span class="n">viewtype</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">aProxy</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span> <span class="o">==</span> <span class="n">viewtype</span><span class="p">):</span>
            <span class="n">val</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">aProxy</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">val</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="SetViewProperties"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SetViewProperties">[docs]</a><span class="k">def</span> <span class="nf">SetViewProperties</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets one or more properties of the given view. If an argument</span>
<span class="sd">    is not provided, the active view is used. Pass in arguments of the form</span>
<span class="sd">    `property_name=value` to this function to set property values. For example::</span>

<span class="sd">        SetProperties(Background=[1, 0, 0], UseImmediateMode=0)</span>

<span class="sd">    :param view: The view whose properties are to be set. If not provided, the</span>
<span class="sd">        active view is used.</span>
<span class="sd">    :type view: View proxy.</span>
<span class="sd">    :param params: A variadic list of `key=value` pairs giving values of</span>
<span class="sd">        specific named properties in the view. For a list of available properties,</span>
<span class="sd">        call `help(view)`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="Render"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.Render">[docs]</a><span class="k">def</span> <span class="nf">Render</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Renders the given view if given, otherwise renders the active view. If</span>
<span class="sd">    this is the first render and the view is a RenderView, the camera is reset.</span>

<span class="sd">    :param view: The view to render. Optional, defaults to rendering the active</span>
<span class="sd">        view.</span>
<span class="sd">    :type view: View proxy.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;view cannot be None&quot;</span><span class="p">)</span>
    <span class="c1"># setup an interactor if current process support interaction if an</span>
    <span class="c1"># interactor hasn&#39;t already been set. This overcomes the problem where VTK</span>
    <span class="c1"># segfaults if the interactor is created after the window was created.</span>
    <span class="n">view</span><span class="o">.</span><span class="n">MakeRenderWindowInteractor</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">view</span><span class="o">.</span><span class="n">StillRender</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">_funcs_internals</span><span class="o">.</span><span class="n">first_render</span><span class="p">:</span>
        <span class="c1"># Not all views have a ResetCamera method</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">view</span><span class="o">.</span><span class="n">ResetCamera</span><span class="p">()</span>
            <span class="n">view</span><span class="o">.</span><span class="n">StillRender</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">_funcs_internals</span><span class="o">.</span><span class="n">first_render</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="n">view</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="RenderAllViews"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.RenderAllViews">[docs]</a><span class="k">def</span> <span class="nf">RenderAllViews</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Renders all existing views.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">view</span> <span class="ow">in</span> <span class="n">GetViews</span><span class="p">():</span> <span class="n">Render</span><span class="p">(</span><span class="n">view</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="Interact"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.Interact">[docs]</a><span class="k">def</span> <span class="nf">Interact</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Call this method to start interacting with a view. This method will</span>
<span class="sd">    block until the interaction is done. If the local process cannot support</span>
<span class="sd">    interactions, this method will simply return without doing anything.</span>

<span class="sd">    :param view: The interaction occurs with this view. Optional, defaults to</span>
<span class="sd">        the active view.</span>
<span class="sd">    :type view: View proxy.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;view argument cannot be None&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="o">.</span><span class="n">MakeRenderWindowInteractor</span><span class="p">(</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Configuration doesn&#39;t support interaction.&quot;</span><span class="p">)</span>
    <span class="n">paraview</span><span class="o">.</span><span class="n">print_debug_info</span><span class="p">(</span><span class="s2">&quot;Staring interaction. Use &#39;q&#39; to quit.&quot;</span><span class="p">)</span>

    <span class="c1"># Views like ComparativeRenderView require that Render() is called before</span>
    <span class="c1"># the Interaction is begun. Hence we call a Render() before start the</span>
    <span class="c1"># interactor loop. This also avoids the case where there are pending updates</span>
    <span class="c1"># and thus the interaction will be begun on stale datasets.</span>
    <span class="n">Render</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
    <span class="n">view</span><span class="o">.</span><span class="n">GetInteractor</span><span class="p">()</span><span class="o">.</span><span class="n">Start</span><span class="p">()</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="ResetCamera"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ResetCamera">[docs]</a><span class="k">def</span> <span class="nf">ResetCamera</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Resets camera settings to make the whole scene visible while preserving</span>
<span class="sd">    orientation.</span>

<span class="sd">    :param view: The camera for this view is reset. Optional, defaults to the</span>
<span class="sd">        active view.</span>
<span class="sd">    :type view: View proxy.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;ResetCamera&quot;</span><span class="p">):</span>
        <span class="n">view</span><span class="o">.</span><span class="n">ResetCamera</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;ResetDisplay&quot;</span><span class="p">):</span>
        <span class="n">view</span><span class="o">.</span><span class="n">ResetDisplay</span><span class="p">()</span>
    <span class="n">Render</span><span class="p">(</span><span class="n">view</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="ResetCameraToDirection"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ResetCameraToDirection">[docs]</a><span class="k">def</span> <span class="nf">ResetCameraToDirection</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">up</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Resets the settings of the camera to the given position and direction.</span>

<span class="sd">    :param position: Position of the camera.</span>
<span class="sd">    :type position: 3-element tuple or list of floats.</span>
<span class="sd">    :param direction: Direction of the camera.</span>
<span class="sd">    :type direction: 3-element tuple or list of floats.</span>
<span class="sd">    :param up: If provided, will be used as the camera&#39;s up direction.</span>
<span class="sd">    :type up: 3-element tuple or list of floats.</span>
<span class="sd">    :param view: If provided, modifies the camera in this view.</span>
<span class="sd">    :type view: View proxy.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;CameraFocalPoint&quot;</span><span class="p">):</span>
        <span class="n">view</span><span class="o">.</span><span class="n">CameraFocalPoint</span> <span class="o">=</span> <span class="n">position</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;CameraPosition&quot;</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">view</span><span class="o">.</span><span class="n">CameraPosition</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">direction</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;CameraViewUp&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">up</span><span class="p">:</span>
        <span class="n">view</span><span class="o">.</span><span class="n">CameraViewUp</span> <span class="o">=</span> <span class="n">up</span>
    <span class="n">ResetCamera</span><span class="p">(</span><span class="n">view</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="CreateLayout"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateLayout">[docs]</a><span class="k">def</span> <span class="nf">CreateLayout</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a new layout with no active view.</span>

<span class="sd">    :param name: The name of the layout. Optional, defaults to an automatically</span>
<span class="sd">        created name.&quot;&quot;&quot;</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">ViewLayout</span><span class="p">(</span><span class="n">registrationGroup</span><span class="o">=</span><span class="s2">&quot;layouts&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
        <span class="n">RenameLayout</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">layout</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">layout</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="RemoveLayout"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.RemoveLayout">[docs]</a><span class="k">def</span> <span class="nf">RemoveLayout</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove the provided layout. If none is provided, remove the layout</span>
<span class="sd">    containing the active view. If it is the only layout it will create a new</span>
<span class="sd">    one with the same name as the removed one.</span>

<span class="sd">    :param proxy: The layout proxy to remove. Optional, defaults to the</span>
<span class="sd">        layout containing the active view.</span>
<span class="sd">    :type proxy: Layout proxy or `None`.&quot;&quot;&quot;</span>
    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetLayout</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetProxyName</span><span class="p">(</span><span class="s1">&#39;layouts&#39;</span><span class="p">,</span> <span class="n">proxy</span><span class="p">)</span>
    <span class="n">pxm</span><span class="o">.</span><span class="n">UnRegisterProxy</span><span class="p">(</span><span class="s1">&#39;layouts&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">proxy</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">GetLayouts</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">CreateLayout</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetLayouts"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetLayouts">[docs]</a><span class="k">def</span> <span class="nf">GetLayouts</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns all the layout proxies.</span>

<span class="sd">    :return: A list of all the layouts.</span>
<span class="sd">    :rtype: list of layout proxies&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetProxiesInGroup</span><span class="p">(</span><span class="s2">&quot;layouts&quot;</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetLayout"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetLayout">[docs]</a><span class="k">def</span> <span class="nf">GetLayout</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the layout containing the given view, if any.</span>

<span class="sd">    :param view: A view in the layout to be removed. Optional, defaults to the</span>
<span class="sd">        active view.</span>
<span class="sd">    :return: The layout containing the view</span>
<span class="sd">    :rtype: :class:`paraview.servermanager.ViewLayout`&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">GetActiveView</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No active view was found.&quot;</span><span class="p">)</span>
    <span class="n">lproxy</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMViewLayoutProxy</span><span class="o">.</span><span class="n">FindLayout</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">lproxy</span><span class="p">)</span></div>


<div class="viewcode-block" id="GetLayoutByName"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetLayoutByName">[docs]</a><span class="k">def</span> <span class="nf">GetLayoutByName</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the first layout with the given name, if any.</span>

<span class="sd">    :param name: Name of the layout</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :return: The named layout if it exists</span>
<span class="sd">    :rtype: Layout proxy or `None`&quot;&quot;&quot;</span>
    <span class="n">layouts</span> <span class="o">=</span> <span class="n">GetLayouts</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">layouts</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">layouts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="GetViewsInLayout"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetViewsInLayout">[docs]</a><span class="k">def</span> <span class="nf">GetViewsInLayout</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns a list of views in the given layout.</span>

<span class="sd">    :param layout: Layout whose views should be returned. Optional, defaults to the</span>
<span class="sd">        layout for the active view, if possible.</span>
<span class="sd">    :type layout: Layout proxy.</span>
<span class="sd">    :return: List of views in the layout.</span>
<span class="sd">    :rtype: list&quot;&quot;&quot;</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">layout</span> <span class="k">if</span> <span class="n">layout</span> <span class="k">else</span> <span class="n">GetLayout</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">layout</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Layout couldn&#39;t be determined. Please specify a valid layout.&quot;</span><span class="p">)</span>
    <span class="n">views</span> <span class="o">=</span> <span class="n">GetViews</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">views</span> <span class="k">if</span> <span class="n">layout</span><span class="o">.</span><span class="n">GetViewLocation</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span></div>


<div class="viewcode-block" id="AssignViewToLayout"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.AssignViewToLayout">[docs]</a><span class="k">def</span> <span class="nf">AssignViewToLayout</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hint</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Assigns the view provided to the layout provided. If no layout exists,</span>
<span class="sd">    then a new layout will be created.</span>

<span class="sd">    It is an error to assign the same view to multiple layouts.</span>

<span class="sd">    :param view: The view to assign to the layout. Optional, defaults to the active view.</span>
<span class="sd">    :type view: View proxy.</span>
<span class="sd">    :param layout: If layout is `None`, then either the active layout or an</span>
<span class="sd">                   existing layout on the same server will be used.</span>
<span class="sd">    :type layout: Layout proxy.</span>
<span class="sd">    :return: Returns `True` on success.</span>
<span class="sd">    :rtype: bool</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">view</span> <span class="o">=</span> <span class="n">view</span> <span class="k">if</span> <span class="n">view</span> <span class="k">else</span> <span class="n">GetActiveView</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No active view was found.&quot;</span><span class="p">)</span>

    <span class="n">layout</span> <span class="o">=</span> <span class="n">layout</span> <span class="k">if</span> <span class="n">layout</span> <span class="k">else</span> <span class="n">GetLayout</span><span class="p">()</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">controller</span><span class="o">.</span><span class="n">AssignViewToLayout</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">layout</span><span class="p">,</span> <span class="n">hint</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="RemoveViewsAndLayouts"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.RemoveViewsAndLayouts">[docs]</a><span class="k">def</span> <span class="nf">RemoveViewsAndLayouts</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Removes all existing views and layouts.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">layouts</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetProxiesInGroup</span><span class="p">(</span><span class="s2">&quot;layouts&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">view</span> <span class="ow">in</span> <span class="n">GetRenderViews</span><span class="p">():</span>
        <span class="n">Delete</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>

    <span class="c1"># Can not use regular delete for layouts</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">layouts</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">layouts</span><span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="nb">id</span><span class="p">)]</span>
        <span class="n">pxm</span><span class="o">.</span><span class="n">UnRegisterProxy</span><span class="p">(</span><span class="s1">&#39;layouts&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">layouts</span><span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="nb">id</span><span class="p">)])</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Extracts and Extractors</span>
<span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="CreateExtractor"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateExtractor">[docs]</a><span class="k">def</span> <span class="nf">CreateExtractor</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">registrationName</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a new extractor and returns it.</span>

<span class="sd">    :param name: The type of the extractor to create.</span>
<span class="sd">    :type name: `str`</span>
<span class="sd">    :param proxy: The proxy to generate the extract from. If not specified</span>
<span class="sd">        the active source is used.</span>
<span class="sd">    :type proxy: :class:`paraview.servermanager.Proxy`, optional</span>
<span class="sd">    :param registrationName: The registration name to use to register</span>
<span class="sd">        the extractor with the ProxyManager. If not specified a unique name</span>
<span class="sd">        will be generated.</span>
<span class="sd">    :type name: `str`, optional</span>

<span class="sd">    :return: The extractor created, on success, else None</span>
<span class="sd">    :rtype: :class:`paraview.servermanager.Proxy` or `None`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">proxy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetActiveSource</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Could determine input for extractor&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">proxy</span><span class="o">.</span><span class="n">Port</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">rawProxy</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">Port</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rawProxy</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span>

    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMExtractsController</span><span class="p">()</span>

    <span class="c1"># Special case of &#39;steering&#39; extractors : add it to the steerable extractors list</span>
    <span class="c1"># managed by the in situ helper class, not to the extracts controller, because</span>
    <span class="c1"># they are not associated with a writer.</span>
    <span class="kn">from</span> <span class="nn">.catalyst.detail</span> <span class="kn">import</span> <span class="n">IsInsitu</span><span class="p">,</span> <span class="n">RegisterExtractor</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;steering&quot;</span> <span class="ow">and</span> <span class="n">IsInsitu</span><span class="p">():</span>
        <span class="n">rawExtractor</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">CreateSteeringExtractor</span><span class="p">(</span><span class="n">rawProxy</span><span class="p">,</span> <span class="n">registrationName</span><span class="p">)</span>
        <span class="n">extractor</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">rawExtractor</span><span class="p">)</span>
        <span class="n">UpdateSteerableParameters</span><span class="p">(</span><span class="n">extractor</span><span class="p">,</span> <span class="n">registrationName</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rawExtractor</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">CreateExtractor</span><span class="p">(</span><span class="n">rawProxy</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">registrationName</span><span class="p">)</span>
        <span class="n">extractor</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">rawExtractor</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">IsInsitu</span><span class="p">():</span>
            <span class="c1"># tag the extractor to know which pipeline this came from.</span>
            <span class="n">RegisterExtractor</span><span class="p">(</span><span class="n">extractor</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">extractor</span></div>


<div class="viewcode-block" id="GetExtractors"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetExtractors">[docs]</a><span class="k">def</span> <span class="nf">GetExtractors</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns a list of extractors associated with the proxy.</span>

<span class="sd">    :param proxy: The proxy to return the extractors associated with.</span>
<span class="sd">                  If not specified (or is None) then all extractors are returned.</span>
<span class="sd">    :type proxy: :class:`paraview.servermanager.Proxy`, optional</span>

<span class="sd">    :return: List of associated extractors if any. May return an empty list.</span>
<span class="sd">    :rtype: list of :class:`paraview.servermanager.Proxy`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMExtractsController</span><span class="p">()</span>
    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">extractors</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetProxiesInGroup</span><span class="p">(</span><span class="s2">&quot;extractors&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">proxy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">extractors</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">g</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">extractors</span> <span class="k">if</span> <span class="n">controller</span><span class="o">.</span><span class="n">IsExtractor</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)]</span></div>


<div class="viewcode-block" id="FindExtractor"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.FindExtractor">[docs]</a><span class="k">def</span> <span class="nf">FindExtractor</span><span class="p">(</span><span class="n">registrationName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns an extractor with a specific registrationName.</span>

<span class="sd">    :param registrationName: Registration name for the extractor.</span>
<span class="sd">    :type registrationName: `str`</span>

<span class="sd">    :return: The extractor or None</span>
<span class="sd">    :rtype: :class:`paraview.servermanager.Proxy` or `None`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetProxy</span><span class="p">(</span><span class="s2">&quot;extractors&quot;</span><span class="p">,</span> <span class="n">registrationName</span><span class="p">)</span></div>


<div class="viewcode-block" id="SaveExtractsUsingCatalystOptions"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SaveExtractsUsingCatalystOptions">[docs]</a><span class="k">def</span> <span class="nf">SaveExtractsUsingCatalystOptions</span><span class="p">(</span><span class="n">options</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate extracts using a :class:`CatalystOptions` object. This is intended for</span>
<span class="sd">    use when a Catalyst analysis script is being run in batch mode.</span>

<span class="sd">    :param options: Catalyst options proxy</span>
<span class="sd">    :type options: :class:`CatalystOptions`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># handle the case where options is CatalystOptions</span>
    <span class="k">return</span> <span class="n">SaveExtracts</span><span class="p">(</span><span class="n">ExtractsOutputDirectory</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">ExtractsOutputDirectory</span><span class="p">,</span>
                        <span class="n">GenerateCinemaSpecification</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">GenerateCinemaSpecification</span><span class="p">)</span></div>


<div class="viewcode-block" id="SaveExtracts"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SaveExtracts">[docs]</a><span class="k">def</span> <span class="nf">SaveExtracts</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate extracts. Parameters are forwarded for &#39;SaveAnimationExtracts&#39;</span>
<span class="sd">    Currently, supported keyword parameters are:</span>

<span class="sd">    :param ExtractsOutputDirectory: root directory for extracts. If the directory</span>
<span class="sd">        does not exist, it will be created.</span>
<span class="sd">    :type ExtractsOutputDirectory: `str`</span>
<span class="sd">    :param GenerateCinemaSpecification: If set to `True`, enables generation of a</span>
<span class="sd">        cinema specification.</span>
<span class="sd">    :type GenerateCinemaSpecification: bool</span>
<span class="sd">    :param FrameRate: The frame rate in frames-per-second if the extractor</span>
<span class="sd">        supports it.</span>
<span class="sd">    :type FrameRate: int</span>
<span class="sd">    :param FrameStride: The number of timesteps to skip after a timestep is saved.</span>
<span class="sd">    :type FrameStride: int</span>
<span class="sd">    :param FrameWindow: The range of timesteps to extract.</span>
<span class="sd">    :type FrameWindow: 2-element tuple or list of ints</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># currently, Python state files don&#39;t have anything about animation,</span>
    <span class="c1"># however, we rely on animation to generate the extracts, so we ensure</span>
    <span class="c1"># that the animation is updated based on timesteps in data by explicitly</span>
    <span class="c1"># calling UpdateAnimationUsingDataTimeSteps.</span>
    <span class="n">scene</span> <span class="o">=</span> <span class="n">GetAnimationScene</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">scene</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">print_warning</span>
        <span class="n">print_warning</span><span class="p">(</span><span class="s2">&quot;This Edition does not support animations. Cannot save extracts.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">scene</span><span class="o">.</span><span class="n">UpdateAnimationUsingDataTimeSteps</span><span class="p">()</span>

    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">SaveAnimationExtracts</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">PreInitializeProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
    <span class="n">proxy</span><span class="o">.</span><span class="n">AnimationScene</span> <span class="o">=</span> <span class="n">scene</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">PostInitializeProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">proxy</span><span class="o">.</span><span class="n">SaveExtracts</span><span class="p">()</span></div>


<div class="viewcode-block" id="CreateSteerableParameters"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateSteerableParameters">[docs]</a><span class="k">def</span> <span class="nf">CreateSteerableParameters</span><span class="p">(</span><span class="n">steerable_proxy_type_name</span><span class="p">,</span>
                              <span class="n">steerable_proxy_registration_name</span><span class="o">=</span>
                              <span class="s2">&quot;SteeringParameters&quot;</span><span class="p">,</span>
                              <span class="n">result_mesh_name</span><span class="o">=</span><span class="s2">&quot;steerable&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a steerable proxy for Catalyst use cases.</span>

<span class="sd">    :param steerable_proxy_type_name: Name of the proxy type to create.</span>
<span class="sd">    :type steerable_proxy_type_name: str</span>
<span class="sd">    :param steerable_proxy_registration_name: Registration name of the proxy</span>
<span class="sd">        created by this function. If not provided, defaults to &quot;SteeringParameters&quot;.</span>
<span class="sd">    :type steerable_proxy_registration_name: str</span>
<span class="sd">    :param result_mesh_name: The name of the resulting mesh. If not provided,</span>
<span class="sd">        defaults to &quot;steerable&quot;.</span>
<span class="sd">    :type result_mesh_name: str</span>
<span class="sd">    :return: Proxy of the specified type.</span>
<span class="sd">    :rtype: Steerable proxy.&quot;&quot;&quot;</span>
    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">steerable_proxy</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">NewProxy</span><span class="p">(</span><span class="s2">&quot;sources&quot;</span><span class="p">,</span> <span class="n">steerable_proxy_type_name</span><span class="p">)</span>
    <span class="n">pxm</span><span class="o">.</span><span class="n">RegisterProxy</span><span class="p">(</span><span class="s2">&quot;sources&quot;</span><span class="p">,</span> <span class="n">steerable_proxy_registration_name</span><span class="p">,</span>
                      <span class="n">steerable_proxy</span><span class="p">)</span>
    <span class="n">steerable_proxy_wrapper</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">steerable_proxy</span><span class="p">)</span>
    <span class="n">UpdateSteerableParameters</span><span class="p">(</span><span class="n">steerable_proxy_wrapper</span><span class="p">,</span> <span class="n">result_mesh_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">steerable_proxy_wrapper</span></div>


<div class="viewcode-block" id="UpdateSteerableParameters"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.UpdateSteerableParameters">[docs]</a><span class="k">def</span> <span class="nf">UpdateSteerableParameters</span><span class="p">(</span><span class="n">steerable_proxy</span><span class="p">,</span> <span class="n">steerable_source_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Updates a steerable proxy of a provided source name.</span>

<span class="sd">    :param steerable_proxy: The steerable proxy to update.</span>
<span class="sd">    :type steerable_proxy: Source proxy.</span>
<span class="sd">    :param steerable_source_name: The name of the steerable source proxy.</span>
<span class="sd">    :type steerable_source_name: str&quot;&quot;&quot;</span>
    <span class="n">helper</span> <span class="o">=</span> <span class="n">paraview</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">vtkPVInSitu</span><span class="o">.</span><span class="n">vtkInSituInitializationHelper</span>
    <span class="n">helper</span><span class="o">.</span><span class="n">UpdateSteerableParameters</span><span class="p">(</span><span class="n">steerable_proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span>
                                     <span class="n">steerable_source_name</span><span class="p">)</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># XML State management</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="LoadState"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.LoadState">[docs]</a><span class="k">def</span> <span class="nf">LoadState</span><span class="p">(</span><span class="n">statefile</span><span class="p">,</span> <span class="n">data_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">restrict_to_data_directory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
              <span class="n">filenames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">vtkPVSession</span><span class="o">.</span><span class="n">CLIENT</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load PVSM state file.</span>

<span class="sd">    This will load the state specified in the `statefile`.</span>

<span class="sd">    ParaView can update absolute paths for data files used in the state which</span>
<span class="sd">    can be useful to portably load state file across different systems.</span>

<span class="sd">    Alternatively, `filenames` can be used to specify a list of filenames explicitly.</span>
<span class="sd">    This must be list of the following form:</span>

<span class="sd">    .. code-block:: json</span>

<span class="sd">        [</span>
<span class="sd">            {</span>
<span class="sd">                # either &#39;name&#39; or &#39;id&#39; are required. if both are provided, &#39;id&#39;</span>
<span class="sd">                # is checked first.</span>
<span class="sd">                &quot;name&quot; : &quot;[reader name shown in pipeline browser]&quot;,</span>
<span class="sd">                &quot;id&quot;   : &quot;[reader id used in the pvsm state file]&quot;,</span>

<span class="sd">                # all modified filename-like properties on this reader</span>
<span class="sd">                &quot;FileName&quot; : ...</span>
<span class="sd">                ....</span>
<span class="sd">            },</span>

<span class="sd">            ...</span>
<span class="sd">        ]</span>

<span class="sd">    Calling this function with other positional or keyword arguments</span>
<span class="sd">    will invoke the legacy signature of this function `_LoadStateLegacy`.</span>

<span class="sd">    :param statefile: Path to the statefile to load</span>
<span class="sd">    :type statefile: str</span>

<span class="sd">    :param data_directory: If not `None`, then ParaView searches for files matching</span>
<span class="sd">                           those used in the state under the specified directory and if found, replaces</span>
<span class="sd">                           the state to use the found files instead. Optional, defaults to `None`.</span>
<span class="sd">    :type data_directory: str</span>

<span class="sd">    :param restrict_to_data_directory: If set to `True`,  if a file is not found under</span>
<span class="sd">                                       the `data_directory`, it will raise an error, otherwise it is left unchanged.</span>
<span class="sd">                                       Optional, defaults to `False`.</span>
<span class="sd">    :type restrict_to_data_directory: bool</span>

<span class="sd">    :param filenames: JSON-formatted string to specify a list of filenames.</span>
<span class="sd">    :type filenames: str</span>

<span class="sd">    :param location: Where the statefile is located, e.g., pass `vtkPVSession.CLIENT`</span>
<span class="sd">                     if the statefile is located on the client system (default value), pass in</span>
<span class="sd">                     `vtkPVSession.SERVERS` if on the server. Optional, defaults to client.</span>
<span class="sd">    :type location: `vtkPVServer.ServerFlags` enum value</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_LoadStateLegacy</span><span class="p">(</span><span class="n">statefile</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">RemoveViewsAndLayouts</span><span class="p">()</span>

    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">pyproxy</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">pxm</span><span class="o">.</span><span class="n">NewProxy</span><span class="p">(</span><span class="s1">&#39;options&#39;</span><span class="p">,</span> <span class="s1">&#39;LoadStateOptions&#39;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">pyproxy</span><span class="o">.</span><span class="n">PrepareToLoad</span><span class="p">(</span><span class="n">statefile</span><span class="p">,</span> <span class="n">location</span><span class="p">):</span>
        <span class="n">pyproxy</span><span class="o">.</span><span class="n">LoadStateDataFileOptions</span> <span class="o">=</span> <span class="n">pyproxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">USE_FILES_FROM_STATE</span>
        <span class="k">if</span> <span class="n">pyproxy</span><span class="o">.</span><span class="n">HasDataFiles</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">data_directory</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">pyproxy</span><span class="o">.</span><span class="n">LoadStateDataFileOptions</span> <span class="o">=</span> <span class="n">pyproxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">USE_DATA_DIRECTORY</span>
                <span class="n">pyproxy</span><span class="o">.</span><span class="n">DataDirectory</span> <span class="o">=</span> <span class="n">data_directory</span>
                <span class="k">if</span> <span class="n">restrict_to_data_directory</span><span class="p">:</span>
                    <span class="n">pyproxy</span><span class="o">.</span><span class="n">OnlyUseFilesInDataDirectory</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="n">filenames</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">pyproxy</span><span class="o">.</span><span class="n">LoadStateDataFileOptions</span> <span class="o">=</span> <span class="n">pyproxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">CHOOSE_FILES_EXPLICITLY</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">pname</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">pname</span> <span class="o">==</span> <span class="s2">&quot;name&quot;</span> <span class="ow">or</span> <span class="n">pname</span> <span class="o">==</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span>
                            <span class="k">continue</span>
                        <span class="n">smprop</span> <span class="o">=</span> <span class="n">pyproxy</span><span class="o">.</span><span class="n">FindProperty</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)),</span> <span class="n">pname</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">smprop</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Invalid item specified in &#39;filenames&#39;: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
                        <span class="n">prop</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_wrap_property</span><span class="p">(</span><span class="n">pyproxy</span><span class="p">,</span> <span class="n">smprop</span><span class="p">)</span>
                        <span class="n">prop</span><span class="o">.</span><span class="n">SetData</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="n">pname</span><span class="p">])</span>
        <span class="n">pyproxy</span><span class="o">.</span><span class="n">Load</span><span class="p">()</span>

    <span class="c1"># Try to set the new view active</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">GetRenderViews</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">SetActiveView</span><span class="p">(</span><span class="n">GetRenderViews</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span></div>


<span class="k">def</span> <span class="nf">_LoadStateLegacy</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">connection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">extraArgs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Python scripts from version &lt; 5.9 used a different signature. This</span>
<span class="sd">    function supports that.</span>

<span class="sd">    :param filename: Name of the statefile to load.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param connection: Unused.</span>
<span class="sd">    :type connection: `None`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">RemoveViewsAndLayouts</span><span class="p">()</span>

    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">pyproxy</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">pxm</span><span class="o">.</span><span class="n">NewProxy</span><span class="p">(</span><span class="s1">&#39;options&#39;</span><span class="p">,</span> <span class="s1">&#39;LoadStateOptions&#39;</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">pyproxy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="n">pyproxy</span><span class="o">.</span><span class="n">PrepareToLoad</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">pyproxy</span><span class="o">.</span><span class="n">HasDataFiles</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span><span class="n">extraArgs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">pname</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">extraArgs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">smprop</span> <span class="o">=</span> <span class="n">pyproxy</span><span class="o">.</span><span class="n">FindLegacyProperty</span><span class="p">(</span><span class="n">pname</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">smprop</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">smprop</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Invalid argument &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">pname</span><span class="p">)</span>
                    <span class="n">prop</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_wrap_property</span><span class="p">(</span><span class="n">pyproxy</span><span class="p">,</span> <span class="n">smprop</span><span class="p">)</span>
                    <span class="n">prop</span><span class="o">.</span><span class="n">SetData</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pyproxy</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">pname</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">pyproxy</span><span class="o">.</span><span class="n">Load</span><span class="p">()</span>

    <span class="c1"># Try to set the new view active</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">GetRenderViews</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">SetActiveView</span><span class="p">(</span><span class="n">GetRenderViews</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="SaveState"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SaveState">[docs]</a><span class="k">def</span> <span class="nf">SaveState</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">vtkPVSession</span><span class="o">.</span><span class="n">CLIENT</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save a ParaView statefile (.pvsm) to disk on a system provided by the</span>
<span class="sd">    location parameter.</span>

<span class="sd">    :param filename: Path where the state file should be saved.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param location: Where the statefile should be save, e.g., pass `vtkPVSession.CLIENT`</span>
<span class="sd">        if the statefile is located on the client system (default value), pass in</span>
<span class="sd">        `vtkPVSession.SERVERS` if on the server.</span>
<span class="sd">    :type location: `vtkPVServer.ServerFlags` enum value&quot;&quot;&quot;</span>
    <span class="n">servermanager</span><span class="o">.</span><span class="n">SaveState</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Representation methods</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="GetRepresentation"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetRepresentation">[docs]</a><span class="k">def</span> <span class="nf">GetRepresentation</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given a pipeline proxy and a view, returns the corresponding representation object.</span>
<span class="sd">    If proxy and view are not specified, active objects are used.</span>

<span class="sd">    :param proxy: Pipeline proxy whose representation in the given view is</span>
<span class="sd">        requested. Optional, defaults to the active view.</span>
<span class="sd">    :type proxy: Source proxy</span>
<span class="sd">    :param view: The view associated with the requested representation. Optional,</span>
<span class="sd">        defaults to returning the representation associated with the active view.</span>
<span class="sd">    :type view: View proxy</span>
<span class="sd">    :return: The representation for the given proxy in the view.</span>
<span class="sd">    :rtype: Representation proxy</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;view argument cannot be None.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">source</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;proxy argument cannot be None.&quot;</span><span class="p">)</span>
    <span class="n">rep</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">GetRepresentation</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">rep</span><span class="p">:</span>
        <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">controller</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">Port</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">rep</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="GetDisplayProperties"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetDisplayProperties">[docs]</a><span class="k">def</span> <span class="nf">GetDisplayProperties</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Identical to `GetRepresentation()`&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">GetRepresentation</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="Show"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.Show">[docs]</a><span class="k">def</span> <span class="nf">Show</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">representationType</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Turns on the visibility of a given pipeline proxy in the given view.</span>
<span class="sd">    If pipeline proxy and/or view are not specified, active objects are used.</span>

<span class="sd">    :param proxy: The pipeline proxy to show. If not provided, uses the active source.</span>
<span class="sd">    :type proxy: Source proxy.</span>
<span class="sd">    :param view: The view proxy to show the source proxy in. Optional, defaults</span>
<span class="sd">        to the active view.</span>
<span class="sd">    :type view: View proxy.</span>
<span class="sd">    :param representationType: Name of the representation type to use. Optional,</span>
<span class="sd">        defaults to a suitable representation for the source proxy and view.</span>
<span class="sd">    :type representationType: str</span>
<span class="sd">    :return: The representation proxy for the source proxy in the view.</span>
<span class="sd">    :rtype: Representation proxy.:&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">proxy</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetActiveSource</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="s2">&quot;GetNumberOfOutputPorts&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetNumberOfOutputPorts</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Cannot show a sink i.e. algorithm with no output.&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">proxy</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Show() needs a proxy argument or that an active source is set.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="c1"># If there&#39;s no active view, controller.Show() will create a new preferred view.</span>
        <span class="c1"># if possible.</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">rep</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">Port</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">representationType</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rep</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Could not create a representation object for proxy </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetXMLLabel</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">rep</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">params</span><span class="p">[</span><span class="n">param</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">rep</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="ShowAll"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ShowAll">[docs]</a><span class="k">def</span> <span class="nf">ShowAll</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Show all pipeline sources in the given view.</span>

<span class="sd">    :param view: The view in which to show all pipeline sources.</span>
<span class="sd">    :type view: View proxy. Optional, defaults to the active view.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">ShowAll</span><span class="p">(</span><span class="n">view</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="Hide"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.Hide">[docs]</a><span class="k">def</span> <span class="nf">Hide</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Turns the visibility of a given pipeline source off in the given view.</span>
<span class="sd">    If pipeline object and/or view are not specified, active objects are used.</span>

<span class="sd">    :param proxy: The pipeline source. Optional, defaults to the active source.</span>
<span class="sd">    :type proxy: Pipeline source proxy to hide.</span>
<span class="sd">    :param view: The view in which the pipeline source should be hidden. Optional,</span>
<span class="sd">        defaults to the active view.</span>
<span class="sd">    :type view: View proxy.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">source</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;proxy argument cannot be None when no active source is present.&quot;</span><span class="p">)</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">Hide</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">Port</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="HideAll"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.HideAll">[docs]</a><span class="k">def</span> <span class="nf">HideAll</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Hide all pipeline sources in the given view.</span>

<span class="sd">    :param view: The view in which to hide all pipeline sources. Optional, defaults</span>
<span class="sd">        to the active view.</span>
<span class="sd">    :type view: View proxy.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">HideAll</span><span class="p">(</span><span class="n">view</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="SetDisplayProperties"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SetDisplayProperties">[docs]</a><span class="k">def</span> <span class="nf">SetDisplayProperties</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets one or more display properties of the given pipeline source.</span>

<span class="sd">    Pass a list of `property_name=value` pairs to this function to set property values.</span>
<span class="sd">    For example::</span>

<span class="sd">        SetProperties(Color=[1, 0, 0], LineWidth=2)</span>

<span class="sd">    :param proxy: Pipeline source whose display properties should be set. Optional,</span>
<span class="sd">        defaults to the active source.</span>
<span class="sd">    :type proxy: Source proxy</span>
<span class="sd">    :param view: The view in which to make the display property changes. Optional,</span>
<span class="sd">        defaults to the active view.</span>
<span class="sd">    :type view: View proxy</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rep</span> <span class="o">=</span> <span class="n">GetDisplayProperties</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">rep</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="ColorBy"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ColorBy">[docs]</a><span class="k">def</span> <span class="nf">ColorBy</span><span class="p">(</span><span class="n">rep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">separate</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set data array to color a representation by. This will automatically set</span>
<span class="sd">    up the color maps and others necessary state for the representations.</span>

<span class="sd">    :param rep: Must be a representation proxy i.e. the value returned by</span>
<span class="sd">        the :func:`GetRepresentation`. Optional, defaults to the display properties</span>
<span class="sd">        for the active source, if possible.</span>
<span class="sd">    :type rep: Representation proxy</span>
<span class="sd">    :param value: Name of the array to color by.</span>
<span class="sd">    :type value: str</span>
<span class="sd">    :param separate: Set to `True` to create a color map unique to this</span>
<span class="sd">        representation. Optional, defaults to the global color map ParaView uses</span>
<span class="sd">        for any object colored by an array of the same name.</span>
<span class="sd">    :type separate: bool&quot;&quot;&quot;</span>
    <span class="n">rep</span> <span class="o">=</span> <span class="n">rep</span> <span class="k">if</span> <span class="n">rep</span> <span class="k">else</span> <span class="n">GetDisplayProperties</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">rep</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No display properties can be determined.&quot;</span><span class="p">)</span>

    <span class="n">rep</span><span class="o">.</span><span class="n">UseSeparateColorMap</span> <span class="o">=</span> <span class="n">separate</span>
    <span class="n">association</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">ColorArrayName</span><span class="o">.</span><span class="n">GetAssociation</span><span class="p">()</span>
    <span class="n">arrayname</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">ColorArrayName</span><span class="o">.</span><span class="n">GetArrayName</span><span class="p">()</span>
    <span class="n">component</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">rep</span><span class="o">.</span><span class="n">SetScalarColoring</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">GetAssociationFromString</span><span class="p">(</span><span class="n">association</span><span class="p">))</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="p">,)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">arrayname</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">association</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">arrayname</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="c1"># component name provided</span>
        <span class="n">componentName</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">componentName</span> <span class="o">==</span> <span class="s2">&quot;Magnitude&quot;</span><span class="p">:</span>
            <span class="n">component</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">association</span> <span class="o">==</span> <span class="s2">&quot;POINTS&quot;</span><span class="p">:</span>
                <span class="n">array</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">Input</span><span class="o">.</span><span class="n">PointData</span><span class="o">.</span><span class="n">GetArray</span><span class="p">(</span><span class="n">arrayname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">association</span> <span class="o">==</span> <span class="s2">&quot;CELLS&quot;</span><span class="p">:</span>
                <span class="n">array</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">Input</span><span class="o">.</span><span class="n">CellData</span><span class="o">.</span><span class="n">GetArray</span><span class="p">(</span><span class="n">arrayname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">array</span><span class="p">:</span>
                <span class="c1"># looking for corresponding component name</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">array</span><span class="o">.</span><span class="n">GetNumberOfComponents</span><span class="p">()):</span>
                    <span class="k">if</span> <span class="n">componentName</span> <span class="o">==</span> <span class="n">array</span><span class="o">.</span><span class="n">GetComponentName</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
                        <span class="n">component</span> <span class="o">=</span> <span class="n">i</span>
                        <span class="k">break</span>
                    <span class="c1"># none have been found, try to use the name as an int</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">array</span><span class="o">.</span><span class="n">GetNumberOfComponents</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">component</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">componentName</span><span class="p">)</span>
                        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                            <span class="k">pass</span>
    <span class="k">if</span> <span class="n">component</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">rep</span><span class="o">.</span><span class="n">SetScalarColoring</span><span class="p">(</span><span class="n">arrayname</span><span class="p">,</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">GetAssociationFromString</span><span class="p">(</span><span class="n">association</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rep</span><span class="o">.</span><span class="n">SetScalarColoring</span><span class="p">(</span><span class="n">arrayname</span><span class="p">,</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">GetAssociationFromString</span><span class="p">(</span><span class="n">association</span><span class="p">),</span> <span class="n">component</span><span class="p">)</span>
    <span class="n">rep</span><span class="o">.</span><span class="n">RescaleTransferFunctionToDataRange</span><span class="p">()</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="ColorBlocksBy"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ColorBlocksBy">[docs]</a><span class="k">def</span> <span class="nf">ColorBlocksBy</span><span class="p">(</span><span class="n">rep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">separate</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Like :func:`ColorBy`, set data array by which to color selected blocks within a</span>
<span class="sd">    representation, but color only selected blocks with the specified properties.</span>
<span class="sd">    This will automatically set up the color maps and others necessary state</span>
<span class="sd">    for the representations.</span>

<span class="sd">    :param rep: Must be a representation proxy i.e. the value returned by</span>
<span class="sd">        the :func:`GetRepresentation`. Optional, defaults to the display properties</span>
<span class="sd">        for the active source, if possible.</span>
<span class="sd">    :type rep: Representation proxy</span>
<span class="sd">    :param selectors: List of block selectors that choose which blocks to modify</span>
<span class="sd">        with this call.</span>
<span class="sd">    :type selectors: list of str</span>
<span class="sd">    :param value: Name of the array to color by.</span>
<span class="sd">    :type value: str</span>
<span class="sd">    :param separate: Set to `True` to create a color map unique to this</span>
<span class="sd">        representation. Optional, default is that the color map used will be the global</span>
<span class="sd">        color map ParaView uses for any object colored by an array of the same name.</span>
<span class="sd">    :type separate: bool&quot;&quot;&quot;</span>
    <span class="n">rep</span> <span class="o">=</span> <span class="n">rep</span> <span class="k">if</span> <span class="n">rep</span> <span class="k">else</span> <span class="n">GetDisplayProperties</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">rep</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No display properties can be determined.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">selectors</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">selectors</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No selector can be determined.&quot;</span><span class="p">)</span>

    <span class="n">rep</span><span class="o">.</span><span class="n">SetBlocksUseSeparateColorMap</span><span class="p">(</span><span class="n">selectors</span><span class="p">,</span> <span class="n">separate</span><span class="p">)</span>

    <span class="n">firstSelector</span> <span class="o">=</span> <span class="n">selectors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">associationInt</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">GetBlockColorArrayAssociation</span><span class="p">(</span><span class="n">firstSelector</span><span class="p">)</span>
    <span class="n">association</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">GetAssociationAsString</span><span class="p">(</span><span class="n">associationInt</span><span class="p">)</span> <span class="k">if</span> <span class="n">associationInt</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">arrayname</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">GetBlockColorArrayName</span><span class="p">(</span><span class="n">firstSelector</span><span class="p">)</span>
    <span class="n">component</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">association</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rep</span><span class="o">.</span><span class="n">SetBlocksScalarColoring</span><span class="p">(</span><span class="n">selectors</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">GetAssociationFromString</span><span class="p">(</span><span class="n">association</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rep</span><span class="o">.</span><span class="n">SetBlocksScalarColoring</span><span class="p">(</span><span class="n">selectors</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="p">,)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">arrayname</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">association</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">arrayname</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="c1"># component name provided</span>
        <span class="n">componentName</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">componentName</span> <span class="o">==</span> <span class="s2">&quot;Magnitude&quot;</span><span class="p">:</span>
            <span class="n">component</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">association</span> <span class="o">==</span> <span class="s2">&quot;POINTS&quot;</span><span class="p">:</span>
                <span class="n">array</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">Input</span><span class="o">.</span><span class="n">PointData</span><span class="o">.</span><span class="n">GetArray</span><span class="p">(</span><span class="n">arrayname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">association</span> <span class="o">==</span> <span class="s2">&quot;CELLS&quot;</span><span class="p">:</span>
                <span class="n">array</span> <span class="o">=</span> <span class="n">rep</span><span class="o">.</span><span class="n">Input</span><span class="o">.</span><span class="n">CellData</span><span class="o">.</span><span class="n">GetArray</span><span class="p">(</span><span class="n">arrayname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">array</span><span class="p">:</span>
                <span class="c1"># looking for corresponding component name</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">array</span><span class="o">.</span><span class="n">GetNumberOfComponents</span><span class="p">()):</span>
                    <span class="k">if</span> <span class="n">componentName</span> <span class="o">==</span> <span class="n">array</span><span class="o">.</span><span class="n">GetComponentName</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
                        <span class="n">component</span> <span class="o">=</span> <span class="n">i</span>
                        <span class="k">break</span>
                    <span class="c1"># none have been found, try to use the name as an int</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">array</span><span class="o">.</span><span class="n">GetNumberOfComponents</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">component</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">componentName</span><span class="p">)</span>
                        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                            <span class="k">pass</span>
    <span class="k">if</span> <span class="n">component</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">rep</span><span class="o">.</span><span class="n">SetBlocksScalarColoring</span><span class="p">(</span><span class="n">selectors</span><span class="p">,</span> <span class="n">arrayname</span><span class="p">,</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">GetAssociationFromString</span><span class="p">(</span><span class="n">association</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rep</span><span class="o">.</span><span class="n">SetBlocksScalarColoring</span><span class="p">(</span><span class="n">selectors</span><span class="p">,</span> <span class="n">arrayname</span><span class="p">,</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">GetAssociationFromString</span><span class="p">(</span><span class="n">association</span><span class="p">),</span> <span class="n">component</span><span class="p">)</span>
    <span class="n">rep</span><span class="o">.</span><span class="n">RescaleBlocksTransferFunctionToDataRange</span><span class="p">(</span><span class="n">selectors</span><span class="p">)</span></div>

<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="k">def</span> <span class="nf">_DisableFirstRenderCameraReset</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Normally a ResetCamera is called automatically when Render is called for</span>
<span class="sd">    the first time after importing the `paraview.simple` module. Calling this</span>
<span class="sd">    function disables this first render camera reset.&quot;&quot;&quot;</span>
    <span class="n">_funcs_internals</span><span class="o">.</span><span class="n">first_render</span> <span class="o">=</span> <span class="kc">False</span>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Proxy handling methods</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="SetProperties"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SetProperties">[docs]</a><span class="k">def</span> <span class="nf">SetProperties</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets one or more properties of the given pipeline source. If an argument</span>
<span class="sd">    is not provided, the active source is used. Pass in arguments of the form</span>
<span class="sd">    `property_name=value` to this function to set property values. For example::</span>

<span class="sd">        SetProperties(Center=[1, 2, 3], Radius=3.5)</span>

<span class="sd">    :param proxy: The pipeline source whose properties should be set. Optional,</span>
<span class="sd">        defaultst to the active source.</span>
<span class="sd">    :type proxy: Source proxy</span>
<span class="sd">    :param params: A variadic list of `key=value` pairs giving values of</span>
<span class="sd">        specific named properties in the pipeline source. For a list of available</span>
<span class="sd">        properties, call `help(proxy)`.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">source</span>
    <span class="n">properties</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">ListProperties</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">pyproxy</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
        <span class="n">pyproxy</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">params</span><span class="p">[</span><span class="n">param</span><span class="p">])</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetProperty"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetProperty">[docs]</a><span class="k">def</span> <span class="nf">GetProperty</span><span class="p">(</span><span class="o">*</span><span class="n">arguments</span><span class="p">,</span> <span class="o">**</span><span class="n">keywords</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get one property of the given pipeline object. If keywords are used,</span>
<span class="sd">    you can set the proxy and the name of the property that you want to get</span>
<span class="sd">    as shown in the following example::</span>

<span class="sd">        GetProperty({proxy=sphere, name=&quot;Radius&quot;})</span>

<span class="sd">    If arguments are used, then you have two cases:</span>

<span class="sd">    - if only one argument is used that argument will be</span>
<span class="sd">      the property name.</span>

<span class="sd">    - if two arguments are used then the first one will be</span>
<span class="sd">      the proxy and the second one the property name.</span>

<span class="sd">    Several example are given below::</span>

<span class="sd">        GetProperty({name=&quot;Radius&quot;})</span>
<span class="sd">        GetProperty({proxy=sphereProxy, name=&quot;Radius&quot;})</span>
<span class="sd">        GetProperty( sphereProxy, &quot;Radius&quot; )</span>
<span class="sd">        GetProperty( &quot;Radius&quot; )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">keywords</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;proxy&quot;</span><span class="p">:</span>
            <span class="n">proxy</span> <span class="o">=</span> <span class="n">keywords</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Expecting at least a property name as input. Otherwise keyword could be used to set &#39;proxy&#39; and property &#39;name&#39;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">source</span>
    <span class="k">return</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="GetDisplayProperty"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetDisplayProperty">[docs]</a><span class="k">def</span> <span class="nf">GetDisplayProperty</span><span class="p">(</span><span class="o">*</span><span class="n">arguments</span><span class="p">,</span> <span class="o">**</span><span class="n">keywords</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Same as :func:`GetProperty()`, except that if no `proxy` parameter is passed,</span>
<span class="sd">    it will use the active representation, rather than the active source.&quot;&quot;&quot;</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">keywords</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;proxy&quot;</span><span class="p">:</span>
            <span class="n">proxy</span> <span class="o">=</span> <span class="n">keywords</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetDisplayProperties</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">GetProperty</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="GetViewProperty"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetViewProperty">[docs]</a><span class="k">def</span> <span class="nf">GetViewProperty</span><span class="p">(</span><span class="o">*</span><span class="n">arguments</span><span class="p">,</span> <span class="o">**</span><span class="n">keywords</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Same as :func:`GetProperty()`, except that if no &#39;proxy&#39; parameter is passed,</span>
<span class="sd">    it will use the active view properties, rather than the active source.&quot;&quot;&quot;</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">keywords</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;proxy&quot;</span><span class="p">:</span>
            <span class="n">proxy</span> <span class="o">=</span> <span class="n">keywords</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetViewProperties</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">GetProperty</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="GetViewProperties"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetViewProperties">[docs]</a><span class="k">def</span> <span class="nf">GetViewProperties</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Same as :func:`GetActiveView()`. this API is provided just for consistency with</span>
<span class="sd">    :func:`GetDisplayProperties()`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">GetActiveView</span><span class="p">()</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="LoadPalette"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.LoadPalette">[docs]</a><span class="k">def</span> <span class="nf">LoadPalette</span><span class="p">(</span><span class="n">paletteName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load a color palette to override the default foreground and background</span>
<span class="sd">    colors used by ParaView views. The current global palette&#39;s colors are set</span>
<span class="sd">    to the colors in the loaded palette.</span>

<span class="sd">    :param paletteName: Name of the palette to load from this list:</span>
<span class="sd">        &#39;WarmGrayBackground&#39;, &#39;DarkGrayBackground&#39;, &#39;NeutralGrayBackground&#39;,</span>
<span class="sd">        &#39;LightGrayBackground&#39;, &#39;WhiteBackground&#39;, &#39;BlackBackground&#39;,</span>
<span class="sd">        &#39;GradientBackground&#39;.</span>
<span class="sd">    :type paletteName: str&quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">paletteName</span>

    <span class="c1"># Handling backward compatibility</span>
    <span class="k">if</span> <span class="n">paraview</span><span class="o">.</span><span class="n">compatibility</span><span class="o">.</span><span class="n">GetVersion</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">paletteName</span> <span class="o">==</span> <span class="s2">&quot;DefaultBackground&quot;</span> <span class="ow">or</span> <span class="n">paletteName</span> <span class="o">==</span> <span class="s2">&quot;GrayBackground&quot;</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;BlueGrayBackground&quot;</span>
        <span class="k">elif</span> <span class="n">paletteName</span> <span class="o">==</span> <span class="s2">&quot;PrintBackground&quot;</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;WhiteBackground&quot;</span>
    <span class="k">if</span> <span class="n">paraview</span><span class="o">.</span><span class="n">compatibility</span><span class="o">.</span><span class="n">GetVersion</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">paletteName</span> <span class="o">==</span> <span class="s2">&quot;WarmGrayBackground&quot;</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;DarkGrayBackground&quot;</span>

    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">palette</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetProxy</span><span class="p">(</span><span class="s2">&quot;settings&quot;</span><span class="p">,</span> <span class="s2">&quot;ColorPalette&quot;</span><span class="p">)</span>
    <span class="n">prototype</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetPrototypeProxy</span><span class="p">(</span><span class="s2">&quot;palettes&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">palette</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">prototype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">palette</span><span class="o">.</span><span class="n">Copy</span><span class="p">(</span><span class="n">prototype</span><span class="p">)</span>
    <span class="n">palette</span><span class="o">.</span><span class="n">UpdateVTKObjects</span><span class="p">()</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># ServerManager methods</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="RenameProxy"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.RenameProxy">[docs]</a><span class="k">def</span> <span class="nf">RenameProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">newName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Renames the given proxy. This is the name used by :func:`FindSource` and</span>
<span class="sd">    is displayed in the Pipeline Browser.</span>

<span class="sd">    :param proxy: The proxy to be renamed</span>
<span class="sd">    :type proxy: Proxy object</span>
<span class="sd">    :param group: The group in which the proxy lives. Can be retrieved with</span>
<span class="sd">        `proxy.GetXMLGroup()`</span>
<span class="sd">    :type group: str</span>
<span class="sd">    :param newName: The new name of the proxy.</span>
<span class="sd">    :type newName: str&quot;&quot;&quot;</span>
    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">oldName</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetProxyName</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">proxy</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">oldName</span> <span class="ow">and</span> <span class="n">newName</span> <span class="o">!=</span> <span class="n">oldName</span><span class="p">:</span>
        <span class="n">pxm</span><span class="o">.</span><span class="n">RegisterProxy</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">newName</span><span class="p">,</span> <span class="n">proxy</span><span class="p">)</span>
        <span class="n">pxm</span><span class="o">.</span><span class="n">UnRegisterProxy</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">oldName</span><span class="p">,</span> <span class="n">proxy</span><span class="p">)</span></div>


<div class="viewcode-block" id="RenameSource"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.RenameSource">[docs]</a><span class="k">def</span> <span class="nf">RenameSource</span><span class="p">(</span><span class="n">newName</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Renames the given source proxy. If the given proxy is not registered</span>
<span class="sd">    in the &#39;sources&#39; group this function will have no effect.</span>

<span class="sd">    :param newName: The new name of the source proxy</span>
<span class="sd">    :type newName: str</span>
<span class="sd">    :param proxy: The source proxy to rename. It must be a member</span>
<span class="sd">        of the &#39;sources&#39; group. Optional, defaults to renaming the active source.</span>
<span class="sd">    :type proxy: Source proxy&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetActiveSource</span><span class="p">()</span>
    <span class="n">RenameProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="s2">&quot;sources&quot;</span><span class="p">,</span> <span class="n">newName</span><span class="p">)</span></div>


<div class="viewcode-block" id="RenameView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.RenameView">[docs]</a><span class="k">def</span> <span class="nf">RenameView</span><span class="p">(</span><span class="n">newName</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Renames the given view. If the given proxy is not registered</span>
<span class="sd">    in the &#39;views&#39; group this method will have no effect.</span>

<span class="sd">    :param newName: The new name of the view proxy</span>
<span class="sd">    :type newName: str</span>
<span class="sd">    :param proxy: The view proxy to rename. It must be a member</span>
<span class="sd">        of the &#39;views&#39; group. Optional, defaults to renaming the active view.</span>
<span class="sd">    :type proxy: View proxy&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetActiveView</span><span class="p">()</span>
    <span class="n">RenameProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="s2">&quot;views&quot;</span><span class="p">,</span> <span class="n">newName</span><span class="p">)</span></div>


<div class="viewcode-block" id="RenameLayout"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.RenameLayout">[docs]</a><span class="k">def</span> <span class="nf">RenameLayout</span><span class="p">(</span><span class="n">newName</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Renames the given layout. If the given proxy is not registered</span>
<span class="sd">    in the &#39;layouts&#39; group this method will have no effect.</span>

<span class="sd">    :param newName: The new name of the layout proxy</span>
<span class="sd">    :type newName: str</span>
<span class="sd">    :param layout: The layout proxy to rename. It must be a member</span>
<span class="sd">        of the &#39;layouts&#39; groupd. Optional, defaults to renaming the active layout.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetLayout</span><span class="p">()</span>
    <span class="n">RenameProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="s2">&quot;layouts&quot;</span><span class="p">,</span> <span class="n">newName</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="FindSource"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.FindSource">[docs]</a><span class="k">def</span> <span class="nf">FindSource</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Return a pipeline source based on the name that was used to register it</span>
<span class="sd">    with ParaView.</span>

<span class="sd">    Example usage::</span>

<span class="sd">       Cone(guiName=&#39;MySuperCone&#39;)</span>
<span class="sd">       Show()</span>
<span class="sd">       Render()</span>
<span class="sd">       myCone = FindSource(&#39;MySuperCone&#39;)</span>

<span class="sd">    :param name: The name that the pipeline source was registered with during</span>
<span class="sd">        creation or after renaming.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :return: The pipeline source if found.</span>
<span class="sd">    :rtype: Pipeline source proxy.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetProxy</span><span class="p">(</span><span class="s2">&quot;sources&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="FindView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.FindView">[docs]</a><span class="k">def</span> <span class="nf">FindView</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a view proxy based on the name that was used to register it with</span>
<span class="sd">    ParaView.</span>

<span class="sd">    Example usage::</span>

<span class="sd">       CreateRenderView(guiName=&#39;RenderView1&#39;)</span>
<span class="sd">       myView = FindSource(&#39;RenderView1&#39;)</span>

<span class="sd">    :param name: The name that the view was registered with during creation or</span>
<span class="sd">        after renaming.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :return: The view if found.</span>
<span class="sd">    :rtype: View proxy.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetProxy</span><span class="p">(</span><span class="s2">&quot;views&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="GetActiveViewOrCreate"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetActiveViewOrCreate">[docs]</a><span class="k">def</span> <span class="nf">GetActiveViewOrCreate</span><span class="p">(</span><span class="n">viewtype</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the active view if the active view is of the given type,</span>
<span class="sd">    otherwise creates a new view of the requested type. Note, if a new view is</span>
<span class="sd">    created, it will be assigned to a layout by calling :func:`AssignViewToLayout`.</span>

<span class="sd">    :param viewtype: The type of view to access if it is the active view or create if it doesn&#39;t exist.</span>
<span class="sd">    :type viewtype: str</span>

<span class="sd">    :return: The active view if it is of type `viewtype`.</span>
<span class="sd">    :rtype: View proxy.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">view</span> <span class="o">=</span> <span class="n">GetActiveView</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">view</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">view</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span> <span class="o">!=</span> <span class="n">viewtype</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">CreateView</span><span class="p">(</span><span class="n">viewtype</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">view</span><span class="p">:</span>
            <span class="c1"># if a new view is created, we assign it to a layout.</span>
            <span class="c1"># Since this method gets used when tracing existing views, it makes</span>
            <span class="c1"># sense to assign it to a layout during playback.</span>
            <span class="n">AssignViewToLayout</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to create/locate the specified view&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">view</span></div>


<div class="viewcode-block" id="FindViewOrCreate"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.FindViewOrCreate">[docs]</a><span class="k">def</span> <span class="nf">FindViewOrCreate</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">viewtype</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the view if a view with the given name exists and is of the</span>
<span class="sd">    the given `viewtype`, otherwise creates a new view of the requested type.</span>
<span class="sd">    Note, if a new view is created, it will be assigned to a layout</span>
<span class="sd">    by calling `AssignViewToLayout`.</span>

<span class="sd">    :param name: Name of the view to find.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param viewtype: Type of the view to create.</span>
<span class="sd">    :type viewtype: str&quot;&quot;&quot;</span>
    <span class="n">view</span> <span class="o">=</span> <span class="n">FindView</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">view</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">view</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span> <span class="o">!=</span> <span class="n">viewtype</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">CreateView</span><span class="p">(</span><span class="n">viewtype</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">view</span><span class="p">:</span>
            <span class="c1"># if a new view is created, we assign it to a layout.</span>
            <span class="c1"># Since this method gets used when tracing existing views, it makes</span>
            <span class="c1"># sense to assign it to a layout during playback.</span>
            <span class="n">AssignViewToLayout</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to create/locate the specified view&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">view</span></div>


<div class="viewcode-block" id="LocateView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.LocateView">[docs]</a><span class="k">def</span> <span class="nf">LocateView</span><span class="p">(</span><span class="n">displayProperties</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the view associated with the given `displayProperties`/representation</span>
<span class="sd">    object if it exists.</span>

<span class="sd">    :param displayProperties: a representation proxy returned by</span>
<span class="sd">        :func:`GetRepresentation()`, :func:`GetDisplayProperties()`, or :func:`Show()`</span>
<span class="sd">        functions. Optional, defaults to the active representation.</span>
<span class="sd">    :type displayProperties: representation proxy</span>
<span class="sd">    :return: The view associated with the representation if it exists, otherwise `None`</span>
<span class="sd">    :rtype: View proxy or `None`&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">displayProperties</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">displayProperties</span> <span class="o">=</span> <span class="n">GetDisplayProperties</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">displayProperties</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;displayProperties&#39; must be set&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">view</span> <span class="ow">in</span> <span class="n">GetViews</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">displayProperties</span> <span class="ow">in</span> <span class="n">view</span><span class="o">.</span><span class="n">Representations</span><span class="p">:</span> <span class="k">return</span> <span class="n">view</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="GetSettingsProxy"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetSettingsProxy">[docs]</a><span class="k">def</span> <span class="nf">GetSettingsProxy</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given a string giving the type of settings to access, returns the</span>
<span class="sd">    proxy for those settings.</span>

<span class="sd">    :param type: The type of settings to access. Valid types may be found</span>
<span class="sd">        by calling :func:`GetAllSettings()`.</span>
<span class="sd">    :type type: str&quot;&quot;&quot;</span>
    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetProxy</span><span class="p">(</span><span class="s2">&quot;settings&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">proxy</span></div>


<div class="viewcode-block" id="GetAllSettings"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetAllSettings">[docs]</a><span class="k">def</span> <span class="nf">GetAllSettings</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Get a list of strings that return valid settings proxy types for the</span>
<span class="sd">    :func:GetSettingsProxy() function.</span>

<span class="sd">    :return: List of valid settings proxy names</span>
<span class="sd">    :rtype: list of str&quot;&quot;&quot;</span>
    <span class="n">settingsList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">pdm</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetProxyDefinitionManager</span><span class="p">()</span>
    <span class="nb">iter</span> <span class="o">=</span> <span class="n">pdm</span><span class="o">.</span><span class="n">NewSingleGroupIterator</span><span class="p">(</span><span class="s2">&quot;settings&quot;</span><span class="p">)</span>
    <span class="nb">iter</span><span class="o">.</span><span class="n">GoToFirstItem</span><span class="p">()</span>

    <span class="k">while</span> <span class="ow">not</span> <span class="nb">iter</span><span class="o">.</span><span class="n">IsDoneWithTraversal</span><span class="p">():</span>
        <span class="n">settingsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">iter</span><span class="o">.</span><span class="n">GetProxyName</span><span class="p">())</span>
        <span class="nb">iter</span><span class="o">.</span><span class="n">GoToNextItem</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">settingsList</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetSources"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetSources">[docs]</a><span class="k">def</span> <span class="nf">GetSources</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Get all available pipeline sources.</span>

<span class="sd">    :return: dictionary of pipeline sources. Keys are tuples consisting of the registration</span>
<span class="sd">             name and integer ID of the proxy, and values are the pipeline sources themselves.</span>
<span class="sd">    :rtype: dictionary</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetProxiesInGroup</span><span class="p">(</span><span class="s2">&quot;sources&quot;</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetRepresentations"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetRepresentations">[docs]</a><span class="k">def</span> <span class="nf">GetRepresentations</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns all available representation proxies (display properties) in all views.</span>

<span class="sd">    :return: dictionary of representations. Keys are tuples consisting of the</span>
<span class="sd">             registration name and integer ID of the representation proxy, and values</span>
<span class="sd">             are the representation proxies themselves.</span>
<span class="sd">    :rtype: dict</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetProxiesInGroup</span><span class="p">(</span><span class="s2">&quot;representations&quot;</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="UpdatePipeline"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.UpdatePipeline">[docs]</a><span class="k">def</span> <span class="nf">UpdatePipeline</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Updates (executes) the given pipeline object for the given time as</span>
<span class="sd">    necessary (i.e., if it did not already execute).</span>

<span class="sd">    :param time: The time at which to update the pipeline. Optional, defaults</span>
<span class="sd">        to updating the currently loaded timestep.</span>
<span class="sd">    :type time: float</span>
<span class="sd">    :param proxy: Source proxy to update. Optional, defaults to updating the</span>
<span class="sd">        active source.</span>
<span class="sd">    :type proxy: Source proxy.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">source</span>
    <span class="k">if</span> <span class="n">time</span><span class="p">:</span>
        <span class="n">proxy</span><span class="o">.</span><span class="n">UpdatePipeline</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">proxy</span><span class="o">.</span><span class="n">UpdatePipeline</span><span class="p">()</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="Delete"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.Delete">[docs]</a><span class="k">def</span> <span class="nf">Delete</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Deletes the given pipeline source or the active source if no argument</span>
<span class="sd">    is specified.</span>

<span class="sd">    :param proxy: the proxy to remove</span>
<span class="sd">    :type proxy: Source proxy. Optional, defaults to deleting the active source.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">source</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Could not locate proxy to &#39;Delete&#39;&quot;</span><span class="p">)</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">UnRegisterProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Active Source / View / Camera / AnimationScene</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="GetActiveView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetActiveView">[docs]</a><span class="k">def</span> <span class="nf">GetActiveView</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns the active view.</span>

<span class="sd">    :return: Active view.</span>
<span class="sd">    :rtype: View proxy.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="SetActiveView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SetActiveView">[docs]</a><span class="k">def</span> <span class="nf">SetActiveView</span><span class="p">(</span><span class="n">view</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets the active view.</span>

<span class="sd">    :param view: The view to make active.</span>
<span class="sd">    :type view: View proxy.&quot;&quot;&quot;</span>
    <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetActiveSource"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetActiveSource">[docs]</a><span class="k">def</span> <span class="nf">GetActiveSource</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns the active source.</span>

<span class="sd">    :return: Active pipeline source.</span>
<span class="sd">    :rtype: Source proxy&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">source</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="SetActiveSource"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SetActiveSource">[docs]</a><span class="k">def</span> <span class="nf">SetActiveSource</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets the active source.</span>

<span class="sd">    :param source: The source</span>
<span class="sd">    :type source: Source proxy&quot;&quot;&quot;</span>
    <span class="n">active_objects</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">source</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetActiveCamera"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetActiveCamera">[docs]</a><span class="k">def</span> <span class="nf">GetActiveCamera</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns the active camera for the active view.</span>

<span class="sd">    :return: The active camera</span>
<span class="sd">    :rtype: `vtkCamera`&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">GetActiveView</span><span class="p">()</span><span class="o">.</span><span class="n">GetActiveCamera</span><span class="p">()</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># I/O methods</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="OpenDataFile"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.OpenDataFile">[docs]</a><span class="k">def</span> <span class="nf">OpenDataFile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">extraArgs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a reader to read the give file, if possible.</span>
<span class="sd">    This uses extension matching to determine the best reader possible.</span>

<span class="sd">    :return: Returns a suitable reader if found. If a reader cannot be identified,</span>
<span class="sd">             then this returns `None`.</span>
<span class="sd">    :rtype: Reader proxy, or `None`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">Session</span>
    <span class="n">reader_factor</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetReaderFactory</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">reader_factor</span><span class="o">.</span><span class="n">GetNumberOfRegisteredPrototypes</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">reader_factor</span><span class="o">.</span><span class="n">UpdateAvailableReaders</span><span class="p">()</span>
    <span class="n">first_file</span> <span class="o">=</span> <span class="n">filename</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
        <span class="n">first_file</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">reader_factor</span><span class="o">.</span><span class="n">TestFileReadability</span><span class="p">(</span><span class="n">first_file</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;File not readable: </span><span class="si">%s</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="n">first_file</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">reader_factor</span><span class="o">.</span><span class="n">CanReadFile</span><span class="p">(</span><span class="n">first_file</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;File not readable. No reader found for &#39;</span><span class="si">%s</span><span class="s2">&#39; &quot;</span> <span class="o">%</span> <span class="n">first_file</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="n">prototype</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetPrototypeProxy</span><span class="p">(</span>
        <span class="n">reader_factor</span><span class="o">.</span><span class="n">GetReaderGroup</span><span class="p">(),</span> <span class="n">reader_factor</span><span class="o">.</span><span class="n">GetReaderName</span><span class="p">())</span>
    <span class="n">xml_name</span> <span class="o">=</span> <span class="n">paraview</span><span class="o">.</span><span class="n">make_name_valid</span><span class="p">(</span><span class="n">prototype</span><span class="o">.</span><span class="n">GetXMLLabel</span><span class="p">())</span>
    <span class="n">reader_func</span> <span class="o">=</span> <span class="n">_create_func</span><span class="p">(</span><span class="n">xml_name</span><span class="p">,</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">sources</span><span class="p">)</span>
    <span class="n">pname</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMCoreUtilities</span><span class="o">.</span><span class="n">GetFileNameProperty</span><span class="p">(</span><span class="n">prototype</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pname</span><span class="p">:</span>
        <span class="n">extraArgs</span><span class="p">[</span><span class="n">pname</span><span class="p">]</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">reader_func</span><span class="p">(</span><span class="o">**</span><span class="n">extraArgs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">reader</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="ReloadFiles"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ReloadFiles">[docs]</a><span class="k">def</span> <span class="nf">ReloadFiles</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Forces a reader proxy to reload the data files.</span>

<span class="sd">    :param proxy: Reader proxy whose files should be reloaded. Optional, defaults</span>
<span class="sd">        to reloading files in the active source.</span>
<span class="sd">    :type proxy: Reader proxy</span>
<span class="sd">    :return: Returns `True` if files reloaded successfully, `False` otherwise</span>
<span class="sd">    :rtype: bool&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetActiveSource</span><span class="p">()</span>
    <span class="n">helper</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMReaderReloadHelper</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">helper</span><span class="o">.</span><span class="n">ReloadFiles</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span></div>


<div class="viewcode-block" id="ExtendFileSeries"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ExtendFileSeries">[docs]</a><span class="k">def</span> <span class="nf">ExtendFileSeries</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;For a reader proxy that supports reading files series, detect any new files</span>
<span class="sd">    added to the series and update the reader&#39;s filename property.</span>

<span class="sd">    :param proxy: Reader proxy that should check for a extended file series. Optional,</span>
<span class="sd">        defaults to extending file series in the active source.</span>
<span class="sd">    :return: `True` if the operation succeeded, `False` otherwise</span>
<span class="sd">    :rtype: bool&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetActiveSource</span><span class="p">()</span>
    <span class="n">helper</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMReaderReloadHelper</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">helper</span><span class="o">.</span><span class="n">ExtendFileSeries</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="ReplaceReaderFileName"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ReplaceReaderFileName">[docs]</a><span class="k">def</span> <span class="nf">ReplaceReaderFileName</span><span class="p">(</span><span class="n">readerProxy</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">propName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Replaces the readerProxy by a new one given a list of files.</span>

<span class="sd">    :param readerProxy: Reader proxy whose filename should be updated.</span>
<span class="sd">    :type readerProxy: Reader proxy.</span>
<span class="sd">    :param files: List of file names to be read by the reader.</span>
<span class="sd">    :type files: list of str</span>
<span class="sd">    :param propName: should be &quot;FileNames&quot; or &quot;FileName&quot; depending on the property</span>
<span class="sd">        name in the reader.</span>
<span class="sd">    :type propName: str&quot;&quot;&quot;</span>
    <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMCoreUtilities</span><span class="o">.</span><span class="n">ReplaceReaderFileName</span><span class="p">(</span><span class="n">readerProxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">propName</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="CreateWriter"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateWriter">[docs]</a><span class="k">def</span> <span class="nf">CreateWriter</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">extraArgs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a writer that can write the data produced by the source proxy in</span>
<span class="sd">    the given file format (identified by the extension). This function doesn&#39;t</span>
<span class="sd">    actually write the data, it simply creates the writer and returns it</span>

<span class="sd">    :param filename: The name of the output data file.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param proxy: Source proxy whose output should be written. Optional, defaults to</span>
<span class="sd">        the creating a writer for the active source.</span>
<span class="sd">    :type proxy: Source proxy.</span>
<span class="sd">    :param extraArgs: Additional arguments that should be passed to the writer</span>
<span class="sd">        proxy.</span>
<span class="sd">    :type extraArgs: A variadic list of `key=value` pairs giving values of</span>
<span class="sd">        specific named properties in the writer.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;filename must be specified&quot;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">Session</span>
    <span class="n">writer_factory</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetWriterFactory</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">writer_factory</span><span class="o">.</span><span class="n">GetNumberOfRegisteredPrototypes</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">writer_factory</span><span class="o">.</span><span class="n">UpdateAvailableWriters</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetActiveSource</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Could not locate source to write&quot;</span><span class="p">)</span>
    <span class="n">writer_proxy</span> <span class="o">=</span> <span class="n">writer_factory</span><span class="o">.</span><span class="n">CreateWriter</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">proxy</span><span class="o">.</span><span class="n">Port</span><span class="p">)</span>
    <span class="n">writer_proxy</span><span class="o">.</span><span class="n">UnRegister</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">pyproxy</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">writer_proxy</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pyproxy</span> <span class="ow">and</span> <span class="n">extraArgs</span><span class="p">:</span>
        <span class="n">SetProperties</span><span class="p">(</span><span class="n">pyproxy</span><span class="p">,</span> <span class="o">**</span><span class="n">extraArgs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pyproxy</span></div>


<div class="viewcode-block" id="SaveData"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SaveData">[docs]</a><span class="k">def</span> <span class="nf">SaveData</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">extraArgs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save data produced by the `proxy` parameter into a file.</span>

<span class="sd">    Properties to configure the writer can be passed in</span>
<span class="sd">    as keyword arguments. Example usage::</span>

<span class="sd">        SaveData(&quot;sample.pvtp&quot;, source0)</span>
<span class="sd">        SaveData(&quot;sample.csv&quot;, FieldAssociation=&quot;Points&quot;)</span>

<span class="sd">    :param filenam: Path where output file should be saved.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param proxy: Proxy to save. Optional, defaults to saving the active source.</span>
<span class="sd">    :type proxy: Source proxy.</span>
<span class="sd">    :param extraArgs: A variadic list of `key=value` pairs giving values of</span>
<span class="sd">        specific named properties in the writer.&quot;&quot;&quot;</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">CreateWriter</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">proxy</span><span class="p">,</span> <span class="o">**</span><span class="n">extraArgs</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">writer</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Could not create writer for specified file or data type&quot;</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">UpdateVTKObjects</span><span class="p">()</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">UpdatePipeline</span><span class="p">()</span>
    <span class="k">del</span> <span class="n">writer</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="k">def</span> <span class="nf">_SaveScreenshotLegacy</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span>
                          <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">magnification</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quality</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Legacy funcion for saving a screenshot.</span>

<span class="sd">    :param filename: Path where output screenshot should be saved.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param view: View proxy. Optional, defaults to using the active view.</span>
<span class="sd">    :type view: View proxy</span>
<span class="sd">    :param layout: Layout proxy containing the view. Optional, defaults to using the active</span>
<span class="sd">        layout.</span>
<span class="sd">    :type layout: Layout proxy.</span>
<span class="sd">    :param magnification: Integer magnification factor for the screenshot. Optional,</span>
<span class="sd">        defaults to no magnification.</span>
<span class="sd">    :type magnification: int</span>
<span class="sd">    :param quality: Integer quality level for the saved file. Optional, defaults</span>
<span class="sd">        to 100, or highest quality.</span>
<span class="sd">    :type quality: int</span>
<span class="sd">    :param params: A variadic list of `key=value` pairs giving values of</span>
<span class="sd">        named properties in the screenshot writer proxy.</span>
<span class="sd">    :return: `True` if writing was successful, `False` otherwise.</span>
<span class="sd">    :rtype: bool&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">view</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">layout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;both view and layout cannot be specified&quot;</span><span class="p">)</span>

    <span class="n">viewOrLayout</span> <span class="o">=</span> <span class="n">view</span> <span class="k">if</span> <span class="n">view</span> <span class="k">else</span> <span class="n">layout</span>
    <span class="n">viewOrLayout</span> <span class="o">=</span> <span class="n">viewOrLayout</span> <span class="k">if</span> <span class="n">viewOrLayout</span> <span class="k">else</span> <span class="n">GetActiveView</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">viewOrLayout</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;view or layout needs to be specified&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">magnification</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">magnification</span><span class="p">)</span> <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">magnification</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="n">magnification</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">quality</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">quality</span><span class="p">)))</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="n">quality</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="c1"># convert magnification to image resolution.</span>
    <span class="k">if</span> <span class="n">viewOrLayout</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewProxy&quot;</span><span class="p">):</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">viewOrLayout</span><span class="o">.</span><span class="n">ViewSize</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">assert</span> <span class="p">(</span><span class="n">viewOrLayout</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewLayoutProxy&quot;</span><span class="p">))</span>
        <span class="n">exts</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span>
        <span class="n">viewOrLayout</span><span class="o">.</span><span class="n">GetLayoutExtent</span><span class="p">(</span><span class="n">exts</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="p">[</span><span class="n">exts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">exts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">exts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">exts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

    <span class="n">imageResolution</span> <span class="o">=</span> <span class="p">(</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">magnification</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">magnification</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">os.path</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">extension</span> <span class="o">==</span> <span class="s1">&#39;.jpg&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">SaveScreenshot</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">viewOrLayout</span><span class="p">,</span>
                              <span class="n">ImageResolution</span><span class="o">=</span><span class="n">imageResolution</span><span class="p">,</span>
                              <span class="n">Quality</span><span class="o">=</span><span class="n">quality</span><span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">extension</span> <span class="o">==</span> <span class="s1">&#39;.png&#39;</span><span class="p">):</span>
        <span class="n">compression</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(((</span><span class="n">quality</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="mf">9.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SaveScreenshot</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">viewOrLayout</span><span class="p">,</span>
                              <span class="n">ImageResolution</span><span class="o">=</span><span class="n">imageResolution</span><span class="p">,</span>
                              <span class="n">CompressionLevel</span><span class="o">=</span><span class="n">compression</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">SaveScreenshot</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">viewOrLayout</span><span class="p">,</span>
                              <span class="n">ImageResolution</span><span class="o">=</span><span class="n">imageResolution</span><span class="p">)</span>


<div class="viewcode-block" id="SaveScreenshot"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SaveScreenshot">[docs]</a><span class="k">def</span> <span class="nf">SaveScreenshot</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">viewOrLayout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">saveInBackground</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">vtkPVSession</span><span class="o">.</span><span class="n">CLIENT</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save screenshot for a view or layout (collection of views) to an image.</span>

<span class="sd">    `SaveScreenshot` is used to save the rendering results to an image.</span>

<span class="sd">    :param filename: Name of the image file to save to. The filename extension is</span>
<span class="sd">        used to determine the type of image file generated. Supported extensions are</span>
<span class="sd">        `png`, `jpg`, `tif`, `bmp`, and `ppm`.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param viewOrLayout: The view or layout to save image from, defaults to `None`.</span>
<span class="sd">        If `None`, then the active view is used, if available. To save image from</span>
<span class="sd">        a single view, this must be set to a view, to save an image from all views in a</span>
<span class="sd">        layout, pass the layout.</span>
<span class="sd">    :type viewOrLayout: View or layout proxy. Optional.</span>
<span class="sd">    :param saveInBackground: If set to `True`, the screenshot will be saved by a</span>
<span class="sd">        different thread and run in the background. In such circumstances, one can</span>
<span class="sd">        wait until the file is written by calling :func:`WaitForScreenshot(filename)`.</span>
<span class="sd">    :type saveInBackground: bool</span>
<span class="sd">    :param location: Location where the screenshot should be saved. This can be one</span>
<span class="sd">        of the following values: `vtkPVSession.CLIENT`, `vtkPVSession.DATA_SERVER`.</span>
<span class="sd">        Optional, defaults to `vtkPVSession.CLIENT`.</span>
<span class="sd">    :type location: `vtkPVSession.ServerFlags` enum</span>

<span class="sd">    **Keyword Parameters (optional)**</span>

<span class="sd">        ImageResolution (tuple(int, int))</span>
<span class="sd">            A 2-tuple to specify the output image resolution in pixels as</span>
<span class="sd">            `(width, height)`. If not specified, the view (or layout) size is</span>
<span class="sd">            used.</span>

<span class="sd">        FontScaling (str)</span>
<span class="sd">            Specify whether to scale fonts proportionally (`&quot;Scale fonts</span>
<span class="sd">            proportionally&quot;`) or not (`&quot;Do not scale fonts&quot;`). Defaults to</span>
<span class="sd">            `&quot;Scale fonts proportionally&quot;`.</span>

<span class="sd">        SeparatorWidth (int)</span>
<span class="sd">            When saving multiple views in a layout, specify the width (in</span>
<span class="sd">            approximate pixels) for a separator between views in the generated</span>
<span class="sd">            image.</span>

<span class="sd">        SeparatorColor (tuple(float, float, float))</span>
<span class="sd">            Specify the color for separator between views, if applicable.</span>

<span class="sd">        OverrideColorPalette (:obj:str, optional)</span>
<span class="sd">            Name of the color palette to use, if any. If none specified, current</span>
<span class="sd">            color palette remains unchanged.</span>

<span class="sd">        StereoMode (str)</span>
<span class="sd">            Stereo mode to use, if any. Available values are `&quot;No stereo&quot;`,</span>
<span class="sd">            `&quot;Red-Blue&quot;`, `&quot;Interlaced&quot;`, `&quot;Left Eye Only&quot;`, `&quot;Right Eye Only&quot;`,</span>
<span class="sd">            `&quot;Dresden&quot;`, `&quot;Anaglyph&quot;`, `&quot;Checkerboard&quot;`,</span>
<span class="sd">            `&quot;Side-by-Side Horizontal&quot;`, and the default `&quot;No change&quot;`.</span>

<span class="sd">        TransparentBackground (int)</span>
<span class="sd">            Set to 1 (or True) to save an image with background set to alpha=0, if</span>
<span class="sd">            supported by the output image format.</span>

<span class="sd">    In addition, several format-specific keyword parameters can be specified.</span>
<span class="sd">    The format is chosen based on the file extension.</span>

<span class="sd">    For JPEG (`*.jpg`), the following parameters are available (optional)</span>

<span class="sd">        Quality (int) [0, 100]</span>
<span class="sd">            Specify the JPEG compression quality. `O` is low quality (maximum compression)</span>
<span class="sd">            and `100` is high quality (least compression).</span>

<span class="sd">        Progressive (int):</span>
<span class="sd">            Set to 1 (or True) to save progressive JPEG.</span>

<span class="sd">    For PNG (`*.png`), the following parameters are available (optional)</span>

<span class="sd">        CompressionLevel (int) [0, 9]</span>
<span class="sd">            Specify the *zlib* compression level. `0` is no compression, while `9` is</span>
<span class="sd">            maximum compression.</span>

<span class="sd">    **Legacy Parameters**</span>

<span class="sd">        Prior to ParaView version 5.4, the following parameters were available</span>
<span class="sd">        and are still supported. However, they cannot be used together with</span>
<span class="sd">        other keyword parameters documented earlier.</span>

<span class="sd">        view (proxy)</span>
<span class="sd">            Single view to save image from.</span>

<span class="sd">        layout (proxy)</span>
<span class="sd">            Layout to save image from.</span>

<span class="sd">        magnification (int)</span>
<span class="sd">            Magnification factor to use to save the output image. The current view</span>
<span class="sd">            (or layout) size is scaled by the magnification factor provided.</span>

<span class="sd">        quality (int)</span>
<span class="sd">            Output image quality, a number in the range [0, 100].</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Let&#39;s handle backwards compatibility.</span>
    <span class="c1"># Previous API for this method took the following arguments:</span>
    <span class="c1"># SaveScreenshot(filename, view=None, layout=None, magnification=None, quality=None)</span>
    <span class="c1"># If we notice any of the old arguments, call legacy method.</span>
    <span class="k">if</span> <span class="s2">&quot;magnification&quot;</span> <span class="ow">in</span> <span class="n">params</span> <span class="ow">or</span> <span class="s2">&quot;quality&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">viewOrLayout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s2">&quot;view&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="c1"># since in previous variant, view could have been passed as a</span>
            <span class="c1"># positional argument, we handle it.</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;view&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">viewOrLayout</span>
        <span class="k">return</span> <span class="n">_SaveScreenshotLegacy</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>

    <span class="c1"># sometimes users love to pass &#39;view&#39; or &#39;layout&#39; as keyword arguments</span>
    <span class="c1"># even though the signature for this function doesn&#39;t support it. let&#39;s</span>
    <span class="c1"># handle that, it&#39;s easy enough.</span>
    <span class="k">if</span> <span class="n">viewOrLayout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;view&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="n">viewOrLayout</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;view&quot;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;view&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="n">viewOrLayout</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">params</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span>

    <span class="c1"># use active view if no view or layout is specified.</span>
    <span class="n">viewOrLayout</span> <span class="o">=</span> <span class="n">viewOrLayout</span> <span class="k">if</span> <span class="n">viewOrLayout</span> <span class="k">else</span> <span class="n">GetActiveView</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">viewOrLayout</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A view or layout must be specified.&quot;</span><span class="p">)</span>

    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">SaveScreenshot</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">PreInitializeProxy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

    <span class="n">options</span><span class="o">.</span><span class="n">SaveInBackground</span> <span class="o">=</span> <span class="n">saveInBackground</span>
    <span class="n">options</span><span class="o">.</span><span class="n">Layout</span> <span class="o">=</span> <span class="n">viewOrLayout</span> <span class="k">if</span> <span class="n">viewOrLayout</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewLayoutProxy&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">options</span><span class="o">.</span><span class="n">View</span> <span class="o">=</span> <span class="n">viewOrLayout</span> <span class="k">if</span> <span class="n">viewOrLayout</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewProxy&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">options</span><span class="o">.</span><span class="n">SaveAllViews</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">viewOrLayout</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewLayoutProxy&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span>

    <span class="c1"># this will choose the correct format.</span>
    <span class="n">options</span><span class="o">.</span><span class="n">UpdateDefaultsAndVisibilities</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="n">controller</span><span class="o">.</span><span class="n">PostInitializeProxy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

    <span class="c1"># explicitly process format properties.</span>
    <span class="n">formatProxy</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">Format</span>
    <span class="n">formatProperties</span> <span class="o">=</span> <span class="n">formatProxy</span><span class="o">.</span><span class="n">ListProperties</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">formatProperties</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="n">formatProxy</span><span class="o">.</span><span class="n">SetPropertyWithName</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">params</span><span class="p">[</span><span class="n">prop</span><span class="p">])</span>
            <span class="k">del</span> <span class="n">params</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span>

    <span class="n">SetProperties</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">options</span><span class="o">.</span><span class="n">WriteImage</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="SetNumberOfCallbackThreads"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SetNumberOfCallbackThreads">[docs]</a><span class="k">def</span> <span class="nf">SetNumberOfCallbackThreads</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets the number of threads used by the threaded callback queue that can be</span>
<span class="sd">    used for saving screenshots.</span>

<span class="sd">    :parameter n: Number of callback threads.</span>
<span class="sd">    :type n: int&quot;&quot;&quot;</span>
    <span class="n">paraview</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">vtkRemotingSetting</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">.</span><span class="n">SetNumberOfCallbackThreads</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></div>

<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="GetNumberOfCallbackThreads"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetNumberOfCallbackThreads">[docs]</a><span class="k">def</span> <span class="nf">GetNumberOfCallbackThreads</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gets the number of threads used by the threaded callback queue that can be</span>
<span class="sd">    used for saving screenshots.</span>

<span class="sd">    :parameter n: Not used</span>
<span class="sd">    :type n: int&quot;&quot;&quot;</span>
    <span class="n">paraview</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">vtkRemotingSetting</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">.</span><span class="n">GetNumberOfCallbackThreads</span><span class="p">()</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="SetNumberOfSMPThreads"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SetNumberOfSMPThreads">[docs]</a><span class="k">def</span> <span class="nf">SetNumberOfSMPThreads</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sets the number of threads used by vtkSMPTools. It is used in various filters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">paraview</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">vtkRemotingSetting</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">.</span><span class="n">SetNumberOfSMPThreads</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="c1"># -----------------------------------------------------------------------------</span>
    <span class="sd">&quot;&quot;&quot;Gets the number of threads used by vtkSMPTools. It is used in various filters.</span>
<span class="sd">    &quot;&quot;&quot;</span></div>
<div class="viewcode-block" id="GetNumberOfSMPThreads"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetNumberOfSMPThreads">[docs]</a><span class="k">def</span> <span class="nf">GetNumberOfSMPThreads</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">paraview</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">vtkRemotingSetting</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span><span class="o">.</span><span class="n">GetNumberOfSMPThreads</span><span class="p">()</span></div>

<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="WaitForScreenshot"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.WaitForScreenshot">[docs]</a><span class="k">def</span> <span class="nf">WaitForScreenshot</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pause this thread until saving a screenshot has terminated.</span>

<span class="sd">    :param filename: Path where screenshot should be saved. If no filename is</span>
<span class="sd">       provided, then this thread pauses until all screenshots have been saved.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
        <span class="n">paraview</span><span class="o">.</span><span class="n">servermanager</span><span class="o">.</span><span class="n">vtkRemoteWriterHelper</span><span class="o">.</span><span class="n">Wait</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">paraview</span><span class="o">.</span><span class="n">servermanager</span><span class="o">.</span><span class="n">vtkRemoteWriterHelper</span><span class="o">.</span><span class="n">Wait</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="SaveAnimation"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SaveAnimation">[docs]</a><span class="k">def</span> <span class="nf">SaveAnimation</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">viewOrLayout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scene</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">vtkPVSession</span><span class="o">.</span><span class="n">CLIENT</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save animation as a movie file or series of images.</span>

<span class="sd">    `SaveAnimation` is used to save an animation as a movie file (avi, mp4, or ogv) or</span>
<span class="sd">    a series of images.</span>

<span class="sd">    :param filename: Name of the output file. The extension is used to determine</span>
<span class="sd">        the type of the output. Supported extensions are `png`, `jpg`, `tif`,</span>
<span class="sd">        `bmp`, and `ppm`. Based on platform (and build) configuration, `avi`, `mp4`,</span>
<span class="sd">        and `ogv` may be supported as well.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param viewOrLayout: The view or layout to save image from, defaults to `None`.</span>
<span class="sd">        If `None`, then the active view is used, if available. To save an image from</span>
<span class="sd">        a single view, this must be set to a view, to save an image from all views</span>
<span class="sd">        in a layout, pass the layout.</span>
<span class="sd">    :type viewOrLayout: View or layout proxy.</span>
<span class="sd">    :param scene: Animation scene to save. If not provided, then the active scene</span>
<span class="sd">        returned by `GetAnimationScene` is used.</span>
<span class="sd">    :type scene: Animation scene proxy</span>
<span class="sd">    :param location: Location where the screenshot should be saved. This can be one</span>
<span class="sd">        of the following values: `vtkPVSession.CLIENT`, `vtkPVSession.DATA_SERVER`.</span>
<span class="sd">        The default is `vtkPVSession.CLIENT`.</span>
<span class="sd">    :type location: `vtkPVSession.ServerFlags` enum</span>

<span class="sd">    **Keyword Parameters (optional)**</span>

<span class="sd">        `SaveAnimation` supports all keyword parameters supported by</span>
<span class="sd">        `SaveScreenshot`. In addition, the following parameters are supported:</span>

<span class="sd">        FrameRate (int):</span>
<span class="sd">            Frame rate in frames per second for the output. This only affects the</span>
<span class="sd">            output when generated movies (`avi` or `ogv`), and not when saving the</span>
<span class="sd">            animation out as a series of images.</span>

<span class="sd">        FrameWindow (tuple(int,int))</span>
<span class="sd">            To save a part of the animation, provide the range in frames or</span>
<span class="sd">            timesteps index.</span>

<span class="sd">    In addition, several format-specific keyword parameters can be specified.</span>
<span class="sd">    The format is chosen based on the file extension.</span>

<span class="sd">    For Image-based file-formats that save series of images e.g. PNG, JPEG,</span>
<span class="sd">    following parameters are available.</span>

<span class="sd">        SuffixFormat (string):</span>
<span class="sd">            Format string used to convert the frame number to file name suffix.</span>

<span class="sd">    FFMPEG avi file format supports following parameters.</span>

<span class="sd">        Compression (int)</span>
<span class="sd">            Set to 1 or True to enable compression.</span>

<span class="sd">        Quality:</span>
<span class="sd">            When compression is 1 (or True), this specifies the compression</span>
<span class="sd">            quality. `0` is worst quality (smallest file size) and `2` is best</span>
<span class="sd">            quality (largest file size).</span>

<span class="sd">    VideoForWindows (VFW) avi file format supports following parameters.</span>

<span class="sd">        Quality:</span>
<span class="sd">            This specifies the compression quality. `0` is worst quality</span>
<span class="sd">            (smallest file size) and `2` is best quality (largest file size).</span>

<span class="sd">    OGG/Theora file format supports following parameters.</span>

<span class="sd">        Quality:</span>
<span class="sd">            This specifies the compression quality. `0` is worst quality</span>
<span class="sd">            (smallest file size) and `2` is best quality (largest file size).</span>

<span class="sd">        UseSubsampling:</span>
<span class="sd">            When set to 1 (or True), the video will be encoded using 4:2:0</span>
<span class="sd">            subsampling for the color channels.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># use active view if no view or layout is specified.</span>
    <span class="n">viewOrLayout</span> <span class="o">=</span> <span class="n">viewOrLayout</span> <span class="k">if</span> <span class="n">viewOrLayout</span> <span class="k">else</span> <span class="n">GetActiveView</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">viewOrLayout</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A view or layout must be specified.&quot;</span><span class="p">)</span>

    <span class="n">scene</span> <span class="o">=</span> <span class="n">scene</span> <span class="k">if</span> <span class="n">scene</span> <span class="k">else</span> <span class="n">GetAnimationScene</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">scene</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Missing animation scene.&quot;</span><span class="p">)</span>

    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">SaveAnimation</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">PreInitializeProxy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

    <span class="n">options</span><span class="o">.</span><span class="n">AnimationScene</span> <span class="o">=</span> <span class="n">scene</span>
    <span class="n">options</span><span class="o">.</span><span class="n">Layout</span> <span class="o">=</span> <span class="n">viewOrLayout</span> <span class="k">if</span> <span class="n">viewOrLayout</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewLayoutProxy&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">options</span><span class="o">.</span><span class="n">View</span> <span class="o">=</span> <span class="n">viewOrLayout</span> <span class="k">if</span> <span class="n">viewOrLayout</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewProxy&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="n">options</span><span class="o">.</span><span class="n">SaveAllViews</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">viewOrLayout</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMViewLayoutProxy&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span>

    <span class="c1"># this will choose the correct format.</span>
    <span class="n">options</span><span class="o">.</span><span class="n">UpdateDefaultsAndVisibilities</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="n">controller</span><span class="o">.</span><span class="n">PostInitializeProxy</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>

    <span class="c1"># explicitly process format properties.</span>
    <span class="n">formatProxy</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">Format</span>
    <span class="n">formatProperties</span> <span class="o">=</span> <span class="n">formatProxy</span><span class="o">.</span><span class="n">ListProperties</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">formatProperties</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="c1"># see comment at vtkSMSaveAnimationProxy.cxx:327</span>
            <span class="c1"># certain &#39;prop&#39; (such as FrameRate) are present</span>
            <span class="c1"># in both SaveAnimation and formatProxy (FFMPEG with</span>
            <span class="c1"># panel_visibility=&quot;never&quot;). In this case save it only</span>
            <span class="c1"># in SaveAnimation</span>
            <span class="k">if</span> <span class="n">formatProxy</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span><span class="o">.</span><span class="n">GetPanelVisibility</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;never&quot;</span><span class="p">:</span>
                <span class="n">formatProxy</span><span class="o">.</span><span class="n">SetPropertyWithName</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">params</span><span class="p">[</span><span class="n">prop</span><span class="p">])</span>
                <span class="k">del</span> <span class="n">params</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span>

    <span class="n">SetProperties</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">options</span><span class="o">.</span><span class="n">WriteAnimation</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span></div>


<div class="viewcode-block" id="WriteAnimationGeometry"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.WriteAnimationGeometry">[docs]</a><span class="k">def</span> <span class="nf">WriteAnimationGeometry</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save the animation geometry from a specific view to a file specified.</span>
<span class="sd">    The animation geometry is written out as a PVD file.</span>

<span class="sd">    :param filename: The file path of the PVD file to write.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param view: The view holding the geometry that should be saved. Optional,</span>
<span class="sd">        defaults to the active view if possible.</span>
<span class="sd">    :type view: View proxy&quot;&quot;&quot;</span>
    <span class="n">view</span> <span class="o">=</span> <span class="n">view</span> <span class="k">if</span> <span class="n">view</span> <span class="k">else</span> <span class="n">GetActiveView</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Please specify the view to use&quot;</span><span class="p">)</span>
    <span class="n">scene</span> <span class="o">=</span> <span class="n">GetAnimationScene</span><span class="p">()</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMAnimationSceneGeometryWriter</span><span class="p">()</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">SetAnimationScene</span><span class="p">(</span><span class="n">scene</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">SetViewModule</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">Save</span><span class="p">()</span></div>


<div class="viewcode-block" id="FetchData"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.FetchData">[docs]</a><span class="k">def</span> <span class="nf">FetchData</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fetches data from the specified data producer for processing locally. Use this</span>
<span class="sd">    function with caution since this can cause large amounts of data to be</span>
<span class="sd">    gathered and delivered to the client.</span>

<span class="sd">    If no producer is specified, the active source is used.</span>

<span class="sd">    **Basic Usage**</span>

<span class="sd">        #to fetch data from port 0</span>

<span class="sd">        dataMap = FetchData(producer)</span>

<span class="sd">        # to fetch data from a specific port</span>

<span class="sd">        dataMap = FetchData(OutputPort(producer, 1))</span>


<span class="sd">    `FetchData()` does not explicitly update the pipeline. It is expected that the</span>
<span class="sd">    pipeline is already updated. This will simply deliver the current data.</span>

<span class="sd">    Returns a map where the key is an integer representing a rank and value is</span>
<span class="sd">    the dataset fetched from that rank.</span>

<span class="sd">    **Keyword Parameters**</span>

<span class="sd">    The following keyword parameters can be used to customize the fetchs.</span>

<span class="sd">        GatherOnAllRanks (bool/int, optional):</span>
<span class="sd">            This is used only in symmetric batch (or ParaView-Catalyst) mode.</span>
<span class="sd">            If True, then FetchData() will gather the data on all ranks. Default</span>
<span class="sd">            is to only gather the data on the root node.</span>

<span class="sd">        SourceRanks (list(int), optional):</span>
<span class="sd">            List of ints to specity explicitly the ranks from which to fetch</span>
<span class="sd">            data. By default, data from all ranks is fetched.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">proxy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetActiveSource</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Cannot fetch data from invalid proxy&quot;</span><span class="p">)</span>

    <span class="n">dataMover</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">DataMover</span><span class="p">()</span>
    <span class="n">dataMover</span><span class="o">.</span><span class="n">Producer</span> <span class="o">=</span> <span class="n">proxy</span>
    <span class="n">dataMover</span><span class="o">.</span><span class="n">PortNumber</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">Port</span>
    <span class="c1"># set properties on dataMover</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">dataMover</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">dataMover</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">InvokeCommand</span><span class="p">(</span><span class="s2">&quot;Execute&quot;</span><span class="p">)</span>

    <span class="n">vtkObj</span> <span class="o">=</span> <span class="n">dataMover</span><span class="o">.</span><span class="n">GetClientSideObject</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">vtkObj</span><span class="o">.</span><span class="n">GetNumberOfDataSets</span><span class="p">()):</span>
        <span class="n">result</span><span class="p">[</span><span class="n">vtkObj</span><span class="o">.</span><span class="n">GetDataSetRank</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">=</span> <span class="n">vtkObj</span><span class="o">.</span><span class="n">GetDataSetAtIndex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">del</span> <span class="n">dataMover</span>
    <span class="k">return</span> <span class="n">result</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Lookup Table / Scalarbar methods</span>
<span class="c1"># ==============================================================================</span>
<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="HideUnusedScalarBars"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.HideUnusedScalarBars">[docs]</a><span class="k">def</span> <span class="nf">HideUnusedScalarBars</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Hides all unused scalar bars from the view. A scalar bar is used if some</span>
<span class="sd">    data is shown in that view that is coloring using the transfer function</span>
<span class="sd">    shown by the scalar bar.</span>

<span class="sd">    :param view: View in which unused scalar bars should be hidden. Optional,</span>
<span class="sd">        defaults to the active view.</span>
<span class="sd">    :type view: View proxy&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;view&#39; argument cannot be None with no active is present.&quot;</span><span class="p">)</span>
    <span class="n">tfmgr</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionManager</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">tfmgr</span><span class="o">.</span><span class="n">UpdateScalarBars</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">tfmgr</span><span class="o">.</span><span class="n">HIDE_UNUSED_SCALAR_BARS</span><span class="p">)</span></div>


<div class="viewcode-block" id="HideScalarBarIfNotNeeded"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.HideScalarBarIfNotNeeded">[docs]</a><span class="k">def</span> <span class="nf">HideScalarBarIfNotNeeded</span><span class="p">(</span><span class="n">lut</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Hides the given scalar bar if it is not used by any of the displayed data.</span>

<span class="sd">    :param lut: The lookup table (lut) or scalar bar proxy</span>
<span class="sd">    :type lut: Scalar bar proxy</span>
<span class="sd">    :param view: The view in which the scalar bar should be hidden. Optional,</span>
<span class="sd">        defaults to hiding scalar bars in the active view.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;view&#39; argument cannot be None with no active present.&quot;</span><span class="p">)</span>
    <span class="n">tfmgr</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionManager</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">tfmgr</span><span class="o">.</span><span class="n">HideScalarBarIfNotNeeded</span><span class="p">(</span><span class="n">lut</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">view</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span></div>


<div class="viewcode-block" id="UpdateScalarBars"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.UpdateScalarBars">[docs]</a><span class="k">def</span> <span class="nf">UpdateScalarBars</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Hides all unused scalar bars and shows used scalar bars. A scalar bar is used</span>
<span class="sd">    if some data is shown in that view that is coloring using the transfer function</span>
<span class="sd">    shown by the scalar bar.</span>

<span class="sd">    :param view: The view in which scalar bar visibility should be changed. Optional,</span>
<span class="sd">        defaults to using the active view.</span>
<span class="sd">    :type view: View proxy&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;view&#39; argument cannot be None with no active is present.&quot;</span><span class="p">)</span>
    <span class="n">tfmgr</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionManager</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">tfmgr</span><span class="o">.</span><span class="n">UpdateScalarBars</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">tfmgr</span><span class="o">.</span><span class="n">HIDE_UNUSED_SCALAR_BARS</span> <span class="o">|</span> <span class="n">tfmgr</span><span class="o">.</span><span class="n">SHOW_USED_SCALAR_BARS</span><span class="p">)</span></div>


<div class="viewcode-block" id="UpdateScalarBarsComponentTitle"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.UpdateScalarBarsComponentTitle">[docs]</a><span class="k">def</span> <span class="nf">UpdateScalarBarsComponentTitle</span><span class="p">(</span><span class="n">ctf</span><span class="p">,</span> <span class="n">representation</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Update the component portion of the title in all scalar bars using the provided</span>
<span class="sd">    lookup table. The representation is used to recover the array from which the</span>
<span class="sd">    component title was obtained.</span>

<span class="sd">    :param ctf: The lookup table that the scalar bar represents. Optional, defaults to</span>
<span class="sd">        the representation of the active source in the active view.</span>
<span class="sd">    :type ctf: Transfer function proxy.</span>
<span class="sd">    :param representation: If provided, it is the representation to use to recover</span>
<span class="sd">        the array that provides the component title portion. Optional, defaults to the</span>
<span class="sd">        active representation.</span>
<span class="sd">    :type representation: Representation proxy</span>
<span class="sd">    :return: `True` if operation succeeded, `False` otherwise.</span>
<span class="sd">    :rtype: bool&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">representation</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">source</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;representation&#39; argument cannot be None with no active view.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;representation&#39; argument cannot be None with no active source.&quot;</span><span class="p">)</span>
        <span class="n">representation</span> <span class="o">=</span> <span class="n">GetRepresentation</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">proxy</span><span class="p">)</span>
    <span class="n">tfmgr</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionManager</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">tfmgr</span><span class="o">.</span><span class="n">UpdateScalarBarsComponentTitle</span><span class="p">(</span><span class="n">ctf</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">representation</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span></div>


<div class="viewcode-block" id="GetScalarBar"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetScalarBar">[docs]</a><span class="k">def</span> <span class="nf">GetScalarBar</span><span class="p">(</span><span class="n">ctf</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the scalar bar for the given color transfer function in the given view.</span>

<span class="sd">    :param ctf: The color transfer function proxy whose scalar bar representation should</span>
<span class="sd">        be returned.</span>
<span class="sd">    :type ctf: Color transfer function proxy.</span>
<span class="sd">    :param view: View from which the scalar bar proxy should be retrieved.</span>
<span class="sd">        Optional, defaults to the active view, if possible.</span>
<span class="sd">    :type view: View proxy.</span>
<span class="sd">    :return: The scalar bar proxy for the color transfer function if found. his will</span>
<span class="sd">        either return an existing scalar bar or create a new one.</span>
<span class="sd">    :rtype: Scalar bar proxy&quot;&quot;&quot;</span>
    <span class="n">view</span> <span class="o">=</span> <span class="n">view</span> <span class="k">if</span> <span class="n">view</span> <span class="k">else</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;view&#39; argument cannot be None when no active view is present&quot;</span><span class="p">)</span>
    <span class="n">tfmgr</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionManager</span><span class="p">()</span>
    <span class="n">sb</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span> \
        <span class="n">tfmgr</span><span class="o">.</span><span class="n">GetScalarBarRepresentation</span><span class="p">(</span><span class="n">ctf</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">view</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">sb</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="GetColorTransferFunction"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetColorTransferFunction">[docs]</a><span class="k">def</span> <span class="nf">GetColorTransferFunction</span><span class="p">(</span><span class="n">arrayname</span><span class="p">,</span> <span class="n">representation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">separate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the color transfer function used to map a data array with the given name to</span>
<span class="sd">    colors.</span>

<span class="sd">    :param arrayname: Name of the array whose color transfer function is requested.</span>
<span class="sd">    :type arrayname: str</span>
<span class="sd">    :param representation: Used to modify the array name when using a separate color</span>
<span class="sd">        transfer function. Optional, defaults to the active proxy.</span>
<span class="sd">    :type representation: Representation proxy.</span>
<span class="sd">    :param separate: If `True`, used to recover the separate color transfer function</span>
<span class="sd">        even if it is not used currently by the representation. Optional, defaults to</span>
<span class="sd">        `False`.</span>
<span class="sd">    :type separate: bool</span>
<span class="sd">    :return: This may create a new color transfer function if none exists, or return an</span>
<span class="sd">        existing one if found.</span>
<span class="sd">    :rtype: Color transfer function proxy&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">representation</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">separate</span> <span class="ow">or</span> <span class="n">representation</span><span class="o">.</span><span class="n">UseSeparateColorMap</span><span class="p">:</span>
            <span class="n">arrayname</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;Separate&quot;</span><span class="p">,</span> <span class="n">representation</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetGlobalIDAsString</span><span class="p">(),</span> <span class="n">arrayname</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Missing active session&quot;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">Session</span>
    <span class="n">tfmgr</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionManager</span><span class="p">()</span>
    <span class="n">lut</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span> \
        <span class="n">tfmgr</span><span class="o">.</span><span class="n">GetColorTransferFunction</span><span class="p">(</span><span class="n">arrayname</span><span class="p">,</span> <span class="n">session</span><span class="o">.</span><span class="n">GetSessionProxyManager</span><span class="p">()))</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">lut</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lut</span></div>


<div class="viewcode-block" id="GetBlockColorTransferFunction"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetBlockColorTransferFunction">[docs]</a><span class="k">def</span> <span class="nf">GetBlockColorTransferFunction</span><span class="p">(</span><span class="n">selector</span><span class="p">,</span> <span class="n">arrayname</span><span class="p">,</span> <span class="n">representation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">separate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the color transfer function used to map a data array with the given name to</span>
<span class="sd">    colors in the blocks referred to by a selector expresson.</span>

<span class="sd">    :param selector: Selector expression used to select blocks from whom the color</span>
<span class="sd">        transfer should be retrieved.</span>
<span class="sd">    :type selector: str</span>
<span class="sd">    :param arrayname: Name of the array whose color transfer function is requested.</span>
<span class="sd">    :type arrayname: str</span>
<span class="sd">    :param representation: Used to modify the array name when using a separate color</span>
<span class="sd">        transfer function. Optional, defaults to the active proxy.</span>
<span class="sd">    :type representation: Representation proxy.</span>
<span class="sd">    :param separate: If `True`, used to recover the separate color transfer function</span>
<span class="sd">        even if it is not used currently by the representation. Optional, defaults to</span>
<span class="sd">        `False`.</span>
<span class="sd">    :type separate: bool</span>
<span class="sd">    :return: This may create a new color transfer function if none exists, or return an</span>
<span class="sd">        existing one if found.</span>
<span class="sd">    :rtype: Color transfer function proxy&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">representation</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">representation</span><span class="o">.</span><span class="n">GetBlockUseSeparateColorMap</span><span class="p">(</span><span class="n">selector</span><span class="p">):</span>
            <span class="n">arrayname</span> <span class="o">=</span> \
                <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;Separate_&quot;</span><span class="p">,</span> <span class="n">representation</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetGlobalIDAsString</span><span class="p">(),</span> <span class="n">selector</span><span class="p">,</span> <span class="n">arrayname</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">separate</span> <span class="ow">or</span> <span class="n">representation</span><span class="o">.</span><span class="n">UseSeparateColorMap</span><span class="p">:</span>
            <span class="n">arrayname</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;Separate&quot;</span><span class="p">,</span> <span class="n">representation</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetGlobalIDAsString</span><span class="p">(),</span> <span class="n">arrayname</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Missing active session&quot;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">Session</span>
    <span class="n">tfmgr</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionManager</span><span class="p">()</span>
    <span class="n">lut</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span> \
        <span class="n">tfmgr</span><span class="o">.</span><span class="n">GetColorTransferFunction</span><span class="p">(</span><span class="n">arrayname</span><span class="p">,</span> <span class="n">session</span><span class="o">.</span><span class="n">GetSessionProxyManager</span><span class="p">()))</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">lut</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lut</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="GetOpacityTransferFunction"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetOpacityTransferFunction">[docs]</a><span class="k">def</span> <span class="nf">GetOpacityTransferFunction</span><span class="p">(</span><span class="n">arrayname</span><span class="p">,</span> <span class="n">representation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">separate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the opacity transfer function used to map a data array with the given name to</span>
<span class="sd">    opacities in the blocks referred to by a selector expresson.</span>

<span class="sd">    :param arrayname: Name of the array whose opacity transfer function is requested.</span>
<span class="sd">    :type arrayname: str</span>
<span class="sd">    :param representation: Used to modify the array name when using a separate opacity</span>
<span class="sd">        transfer function. Optional, defaults to the active representation.</span>
<span class="sd">    :type representation: Representation proxy.</span>
<span class="sd">    :param separate: If `True`, used to recover the separate opacity transfer function</span>
<span class="sd">        even if it is not used currently by the representation. Optional, defaults to</span>
<span class="sd">        `False`.</span>
<span class="sd">    :type separate: bool</span>
<span class="sd">    :return: This may create a new opacity transfer function if none exists, or return an</span>
<span class="sd">        existing one if found.</span>
<span class="sd">    :rtype: Opacity transfer function proxy&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">representation</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">separate</span> <span class="ow">or</span> <span class="n">representation</span><span class="o">.</span><span class="n">UseSeparateColorMap</span><span class="p">:</span>
            <span class="n">arrayname</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;Separate_&quot;</span><span class="p">,</span> <span class="n">representation</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetGlobalIDAsString</span><span class="p">(),</span> <span class="n">arrayname</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Missing active session&quot;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">Session</span>
    <span class="n">tfmgr</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionManager</span><span class="p">()</span>
    <span class="n">otf</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span> \
        <span class="n">tfmgr</span><span class="o">.</span><span class="n">GetOpacityTransferFunction</span><span class="p">(</span><span class="n">arrayname</span><span class="p">,</span> <span class="n">session</span><span class="o">.</span><span class="n">GetSessionProxyManager</span><span class="p">()))</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">otf</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">otf</span></div>


<div class="viewcode-block" id="GetTransferFunction2D"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetTransferFunction2D">[docs]</a><span class="k">def</span> <span class="nf">GetTransferFunction2D</span><span class="p">(</span><span class="n">arrayname</span><span class="p">,</span> <span class="n">array2name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">representation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">separate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the 2D color transfer function used to map a data array with the given name to</span>
<span class="sd">    colors.</span>

<span class="sd">    :param arrayname: Name of the first array whose color transfer function is requested.</span>
<span class="sd">    :type arrayname: str</span>
<span class="sd">    :param array2name: Name of the second array whose color transfer function is requested.</span>
<span class="sd">    :type array2name: str</span>
<span class="sd">    :param representation: Used to modify the array name when using a separate color</span>
<span class="sd">        transfer function. Optional, defaults to the active representation.</span>
<span class="sd">    :type representation: Representation proxy.</span>
<span class="sd">    :param separate: If `True`, used to recover the separate color transfer function</span>
<span class="sd">        even if it is not used currently by the representation. Optional, defaults to</span>
<span class="sd">        `False`.</span>
<span class="sd">    :type separate: bool</span>
<span class="sd">    :return: This may create a new 2D color transfer function if none exists, or return an</span>
<span class="sd">        existing one if found.</span>
<span class="sd">    :rtype: 2D color transfer function proxy&quot;&quot;&quot;</span>
    <span class="n">array2name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">array2name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">(</span><span class="s2">&quot;_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">array2name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">representation</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">separate</span> <span class="ow">or</span> <span class="n">representation</span><span class="o">.</span><span class="n">UseSeparateColorMap</span><span class="p">:</span>
            <span class="n">arrayname</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">_</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;Separate_&quot;</span><span class="p">,</span> <span class="n">representation</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetGlobalIDAsString</span><span class="p">(),</span>
                                        <span class="n">arrayname</span><span class="p">,</span> <span class="n">array2name</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Missing active session&quot;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">Session</span>
    <span class="n">tfmgr</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionManager</span><span class="p">()</span>
    <span class="n">tf2d</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span> \
        <span class="n">tfmgr</span><span class="o">.</span><span class="n">GetTransferFunction2D</span><span class="p">(</span><span class="n">arrayname</span><span class="p">,</span> <span class="n">session</span><span class="o">.</span><span class="n">GetSessionProxyManager</span><span class="p">()))</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">tf2d</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tf2d</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="ImportPresets"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ImportPresets">[docs]</a><span class="k">def</span> <span class="nf">ImportPresets</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">vtkPVSession</span><span class="o">.</span><span class="n">CLIENT</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Import presets from a file. The file can be in the legacy color map XML</span>
<span class="sd">    format or in the new JSON format.</span>

<span class="sd">    :param filename: Path of the file containing the presets.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param location: Where the statefile should be save, e.g., pass `vtkPVSession.CLIENT`</span>
<span class="sd">        if the statefile is located on the client system (default value), pass in</span>
<span class="sd">        `vtkPVSession.SERVERS` if on the server. Optional, defaults to</span>
<span class="sd">        `vtkPVSession.CLIENT`.</span>
<span class="sd">    :type location: `vtkPVServer.ServerFlags` enum value</span>
<span class="sd">    :return: `True` on success, `False` otherwise.&quot;&quot;&quot;</span>
    <span class="n">presets</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionPresets</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">presets</span><span class="o">.</span><span class="n">ImportPresets</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="ExportTransferFunction"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ExportTransferFunction">[docs]</a><span class="k">def</span> <span class="nf">ExportTransferFunction</span><span class="p">(</span><span class="n">colortransferfunction</span><span class="p">,</span> <span class="n">opacitytransferfunction</span><span class="p">,</span> <span class="n">tfname</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">vtkPVSession</span><span class="o">.</span><span class="n">CLIENT</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Export transfer function to a file. The file will be saved in the new JSON format.</span>

<span class="sd">    :param colortransferfunction: The color transfer function to export.</span>
<span class="sd">    :type colortransferfunction: Color transfer function proxy.</span>
<span class="sd">    :param opacitytransferfunction: The opacity transfer functon to export, if provided.</span>
<span class="sd">        can be None.</span>
<span class="sd">    :type opacitytransferfunction: Opacity transfer function proxy.</span>
<span class="sd">    :param tfname: The name that will be given to the transfer function preset if imported</span>
<span class="sd">        back into ParaView.</span>
<span class="sd">    :type tfname: str</span>
<span class="sd">    :param filename: Path to file where exported transfer function should be saved.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param location: Where the statefile should be saved, e.g., pass `vtkPVSession.CLIENT`</span>
<span class="sd">        if the statefile is located on the client system (default value), pass in</span>
<span class="sd">        `vtkPVSession.SERVERS` if on the server. Optional, defaults to `vtkPVSession.CLIENT`.</span>
<span class="sd">    :type location: `vtkPVServer.ServerFlags` enum value</span>
<span class="sd">    :return: `True` on success, `False` otherwise.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionProxy</span><span class="o">.</span><span class="n">ExportTransferFunction</span><span class="p">(</span> \
        <span class="n">colortransferfunction</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">opacitytransferfunction</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">tfname</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="CreateLookupTable"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateLookupTable">[docs]</a><span class="k">def</span> <span class="nf">CreateLookupTable</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create and return a lookup table.</span>

<span class="sd">    :param params: A variadic list of `key=value` pairs giving values of</span>
<span class="sd">        specific named properties of the lookup table.</span>
<span class="sd">    :return: Lookup table</span>
<span class="sd">    :rtype: Lookup table proxy&quot;&quot;&quot;</span>
    <span class="n">lt</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">rendering</span><span class="o">.</span><span class="n">PVLookupTable</span><span class="p">()</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">InitializeProxy</span><span class="p">(</span><span class="n">lt</span><span class="p">)</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">lt</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">RegisterColorTransferFunctionProxy</span><span class="p">(</span><span class="n">lt</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lt</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="CreatePiecewiseFunction"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreatePiecewiseFunction">[docs]</a><span class="k">def</span> <span class="nf">CreatePiecewiseFunction</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create and return a piecewise function.</span>

<span class="sd">    :param params: A variadic list of `key=value` pairs giving values of</span>
<span class="sd">        specific named properties of the opacity function.</span>
<span class="sd">    :return: Piecewise opacity function</span>
<span class="sd">    :rtype: Opacity functon proxy&quot;&quot;&quot;</span>
    <span class="n">pfunc</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">piecewise_functions</span><span class="o">.</span><span class="n">PiecewiseFunction</span><span class="p">()</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">InitializeProxy</span><span class="p">(</span><span class="n">pfunc</span><span class="p">)</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">pfunc</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">RegisterOpacityTransferFunction</span><span class="p">(</span><span class="n">pfunc</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pfunc</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="AssignLookupTable"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.AssignLookupTable">[docs]</a><span class="k">def</span> <span class="nf">AssignLookupTable</span><span class="p">(</span><span class="n">arrayInfo</span><span class="p">,</span> <span class="n">lutName</span><span class="p">,</span> <span class="n">rangeOveride</span><span class="o">=</span><span class="p">[]):</span>
    <span class="sd">&quot;&quot;&quot;Assign a lookup table to an array by lookup table name.</span>

<span class="sd">    Example usage::</span>

<span class="sd">        track = GetAnimationTrack(&quot;Center&quot;, 0, sphere) or</span>
<span class="sd">        arrayInfo = source.PointData[&quot;Temperature&quot;]</span>
<span class="sd">        AssignLookupTable(arrayInfo, &quot;Cool to Warm&quot;)</span>

<span class="sd">    :param arrayInfo: The information object for the array. The array name and its</span>
<span class="sd">        range is determined using the info object provided.</span>
<span class="sd">    :type arrayInfo: `paraview.modules.vtkRemotingCore.vtkPVArrayInformation`</span>
<span class="sd">    :param lutName: The name for the transfer function preset.</span>
<span class="sd">    :type lutName: str</span>
<span class="sd">    :param rangeOveride: The range to use instead of the range of the</span>
<span class="sd">        array determined using the `arrayInfo` parameter. Defaults to `[]`,</span>
<span class="sd">        meaning the array info range will be used.</span>
<span class="sd">    :type rangeOveride: 2-element tuple or list of floats</span>
<span class="sd">    :return: `True` on success, `False` otherwise.</span>
<span class="sd">    :rtype: bool&quot;&quot;&quot;</span>

    <span class="c1"># If the named LUT is not in the presets, see if it was one that was removed and</span>
    <span class="c1"># substitute it with the backwards compatibility helper</span>
    <span class="n">presets</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionPresets</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span>
    <span class="n">reverse</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">presets</span><span class="o">.</span><span class="n">HasPreset</span><span class="p">(</span><span class="n">lutName</span><span class="p">):</span>
        <span class="p">(</span><span class="n">lutName</span><span class="p">,</span> <span class="n">reverse</span><span class="p">)</span> <span class="o">=</span> <span class="n">paraview</span><span class="o">.</span><span class="n">_backwardscompatibilityhelper</span><span class="o">.</span><span class="n">lookupTableUpdate</span><span class="p">(</span><span class="n">lutName</span><span class="p">)</span>

    <span class="c1"># If no alternate LUT exists, raise an exception</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">presets</span><span class="o">.</span><span class="n">HasPreset</span><span class="p">(</span><span class="n">lutName</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;no preset with name `</span><span class="si">%s</span><span class="s2">` present&quot;</span><span class="p">,</span> <span class="n">lutName</span><span class="p">)</span>

    <span class="c1"># Preset found. Apply it.</span>
    <span class="n">lut</span> <span class="o">=</span> <span class="n">GetColorTransferFunction</span><span class="p">(</span><span class="n">arrayInfo</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">lut</span><span class="o">.</span><span class="n">ApplyPreset</span><span class="p">(</span><span class="n">lutName</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="n">rangeOveride</span><span class="p">:</span>
        <span class="n">lut</span><span class="o">.</span><span class="n">RescaleTransferFunction</span><span class="p">(</span><span class="n">rangeOveride</span><span class="p">)</span>

    <span class="c1"># Reverse if necessary for backwards compatibility</span>
    <span class="k">if</span> <span class="n">reverse</span><span class="p">:</span>
        <span class="n">lut</span><span class="o">.</span><span class="n">InvertTransferFunction</span><span class="p">()</span>

    <span class="k">return</span> <span class="kc">True</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<div class="viewcode-block" id="GetLookupTableNames"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetLookupTableNames">[docs]</a><span class="k">def</span> <span class="nf">GetLookupTableNames</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns a list containing the currently available transfer function</span>
<span class="sd">    preset names.</span>

<span class="sd">    :return: List of currently availabe transfer function preset names.</span>
<span class="sd">    :rtype: List of str&quot;&quot;&quot;</span>
    <span class="n">presets</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionPresets</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">presets</span><span class="o">.</span><span class="n">GetPresetName</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">presets</span><span class="o">.</span><span class="n">GetNumberOfPresets</span><span class="p">())]</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="LoadLookupTable"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.LoadLookupTable">[docs]</a><span class="k">def</span> <span class="nf">LoadLookupTable</span><span class="p">(</span><span class="n">fileName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load transfer function preset from a file. Both JSON (new) and XML (legacy)</span>
<span class="sd">    preset formats are supported.</span>

<span class="sd">    :param fileName: If the filename ends with a .xml, it&#39;s assumed to be a legacy color</span>
<span class="sd">        map XML and will be converted to the new format before processing.</span>
<span class="sd">    :type fileName: str</span>
<span class="sd">    :return: `True` if successful, `False` otherwise.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">presets</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMTransferFunctionPresets</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">presets</span><span class="o">.</span><span class="n">ImportPresets</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<span class="c1"># TODO: Change this to take the array name and number of components. Register</span>
<span class="c1"># the lt under the name ncomp.array_name</span>
<div class="viewcode-block" id="MakeBlueToRedLT"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.MakeBlueToRedLT">[docs]</a><span class="k">def</span> <span class="nf">MakeBlueToRedLT</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a LookupTable that go from blue to red using the scalar range</span>
<span class="sd">    provided by the min and max arguments.</span>

<span class="sd">    :param min: Minimum range value.</span>
<span class="sd">    :type min: float</span>
<span class="sd">    :param max: Maximum range value.</span>
<span class="sd">    :type max: float</span>
<span class="sd">    :return: the blue-to-red lookup table</span>
<span class="sd">    :rtype: Lookup table proxy.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Define RGB points. These are tuples of 4 values. First one is</span>
    <span class="c1"># the scalar values, the other 3 the RGB values.</span>
    <span class="n">rgbPoints</span> <span class="o">=</span> <span class="p">[</span><span class="nb">min</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">CreateLookupTable</span><span class="p">(</span><span class="n">RGBPoints</span><span class="o">=</span><span class="n">rgbPoints</span><span class="p">,</span> <span class="n">ColorSpace</span><span class="o">=</span><span class="s2">&quot;HSV&quot;</span><span class="p">)</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># General puprpose links methods</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="RemoveLink"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.RemoveLink">[docs]</a><span class="k">def</span> <span class="nf">RemoveLink</span><span class="p">(</span><span class="n">linkName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove a named link.</span>

<span class="sd">    :param linkName: Name of the link to remove.</span>
<span class="sd">    :type linkName: str&quot;&quot;&quot;</span>
    <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">UnRegisterLink</span><span class="p">(</span><span class="n">linkName</span><span class="p">)</span></div>


<div class="viewcode-block" id="AddProxyLink"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.AddProxyLink">[docs]</a><span class="k">def</span> <span class="nf">AddProxyLink</span><span class="p">(</span><span class="n">proxy1</span><span class="p">,</span> <span class="n">proxy2</span><span class="p">,</span> <span class="n">linkName</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a link between two proxies and return its name.</span>

<span class="sd">    An instance of a `vtkSMProxyLink` subclass can be given, otherwise a `vtkSMProxyLink`</span>
<span class="sd">    is created. This does not link proxy properties. See</span>
<span class="sd">    `vtkSMProxyLink.LinkProxyPropertyProxies`.</span>

<span class="sd">    :param linkName: Name of link to create. If empty, a default one is created for</span>
<span class="sd">        registration. If a link with the given name already exists it will be removed</span>
<span class="sd">        first.</span>
<span class="sd">    :type linkName: str</span>
<span class="sd">    :return: The link registration name.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">link</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">link</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyLink</span><span class="p">()</span>

    <span class="n">link</span><span class="o">.</span><span class="n">LinkProxies</span><span class="p">(</span><span class="n">proxy1</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">proxy2</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
    <span class="n">pm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">linkName</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">name1</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">GetProxyName</span><span class="p">(</span><span class="n">proxy1</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetXMLGroup</span><span class="p">(),</span> <span class="n">proxy1</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
        <span class="n">name2</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">GetProxyName</span><span class="p">(</span><span class="n">proxy2</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetXMLGroup</span><span class="p">(),</span> <span class="n">proxy2</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
        <span class="n">linkName</span> <span class="o">=</span> <span class="n">name1</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">name2</span> <span class="o">+</span> <span class="s1">&#39;-link&#39;</span>

    <span class="n">RemoveLink</span><span class="p">(</span><span class="n">linkName</span><span class="p">)</span>
    <span class="n">pm</span><span class="o">.</span><span class="n">RegisterLink</span><span class="p">(</span><span class="n">linkName</span><span class="p">,</span> <span class="n">link</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">linkName</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># ViewLink methods</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="AddViewLink"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.AddViewLink">[docs]</a><span class="k">def</span> <span class="nf">AddViewLink</span><span class="p">(</span><span class="n">viewProxy</span><span class="p">,</span> <span class="n">viewProxyOther</span><span class="p">,</span> <span class="n">linkName</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a view link between two view proxies.</span>

<span class="sd">    A view link is an extension of a proxy link that also performs rendering when a</span>
<span class="sd">    property changes.</span>

<span class="sd">    Cameras in the views are not linked.</span>

<span class="sd">    If a link with the given name already exists it will be removed first and replaced</span>
<span class="sd">    with the newly created link.</span>

<span class="sd">    :param viewProxy: The first view to link.</span>
<span class="sd">    :type viewProxy: View proxy.</span>
<span class="sd">    :param viewProxyOther: The second view to link.</span>
<span class="sd">    :type viewProxyOther: View proxy.</span>
<span class="sd">    :param linkName: The name of the link to create. Optional, defaults to</span>
<span class="sd">        automatically generating a link name.</span>
<span class="sd">    :type linkName: str</span>
<span class="sd">    :return: The link registration name.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMViewLink</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">AddProxyLink</span><span class="p">(</span><span class="n">viewProxy</span><span class="p">,</span> <span class="n">viewProxyOther</span><span class="p">,</span> <span class="n">linkName</span><span class="p">,</span> <span class="n">link</span><span class="p">)</span></div>


<div class="viewcode-block" id="AddRenderViewLink"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.AddRenderViewLink">[docs]</a><span class="k">def</span> <span class="nf">AddRenderViewLink</span><span class="p">(</span><span class="n">viewProxy</span><span class="p">,</span> <span class="n">viewProxyOther</span><span class="p">,</span> <span class="n">linkName</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">linkCameras</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a named view link between two render view proxies.</span>

<span class="sd">    It also creates links for the AxesGrid proxy property in each view. By default,</span>
<span class="sd">    cameras are not linked.</span>

<span class="sd">    If a link with the given name already exists it will be removed first and replaced</span>
<span class="sd">    with the newly created link.</span>

<span class="sd">    :param viewProxy: The first view to link.</span>
<span class="sd">    :type viewProxy: View proxy.</span>
<span class="sd">    :param viewProxyOther: The second view to link.</span>
<span class="sd">    :type viewProxyOther: View proxy.</span>
<span class="sd">    :param linkName: The name of the link to create.</span>
<span class="sd">    :type linkName: str</span>
<span class="sd">    :param linkCameras: If `True`, also link the view cameras.</span>
<span class="sd">    :type linkCamera: bool</span>
<span class="sd">    :return: The link registration name.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">linkName</span> <span class="o">=</span> <span class="n">AddViewLink</span><span class="p">(</span><span class="n">viewProxy</span><span class="p">,</span> <span class="n">viewProxyOther</span><span class="p">,</span> <span class="n">linkName</span><span class="p">)</span>
    <span class="n">pm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">GetRegisteredLink</span><span class="p">(</span><span class="n">linkName</span><span class="p">)</span>
    <span class="n">link</span><span class="o">.</span><span class="n">EnableCameraLink</span><span class="p">(</span><span class="n">linkCameras</span><span class="p">)</span>
    <span class="n">link</span><span class="o">.</span><span class="n">LinkProxyPropertyProxies</span><span class="p">(</span><span class="n">viewProxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="n">viewProxyOther</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="s2">&quot;AxesGrid&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">linkName</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># CameraLink methods</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="AddCameraLink"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.AddCameraLink">[docs]</a><span class="k">def</span> <span class="nf">AddCameraLink</span><span class="p">(</span><span class="n">viewProxy</span><span class="p">,</span> <span class="n">viewProxyOther</span><span class="p">,</span> <span class="n">linkName</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a named camera link between two view proxies. If a link with the given</span>
<span class="sd">    name already exists it will be removed first and replaced with the newly created</span>
<span class="sd">    link.</span>

<span class="sd">    :param viewProxy: The first view to link.</span>
<span class="sd">    :type viewProxy: View proxy.</span>
<span class="sd">    :param viewProxyOther: The second view to link.</span>
<span class="sd">    :type viewProxyOther: View proxy.</span>
<span class="sd">    :param linkName: The name of the link to create. Optional, defaults to</span>
<span class="sd">        automatically generating a link name.</span>
<span class="sd">    :type linkName: str</span>
<span class="sd">    :return: The link registration name.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">viewProxyOther</span><span class="p">:</span> <span class="n">viewProxyOther</span> <span class="o">=</span> <span class="n">GetActiveView</span><span class="p">()</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMCameraLink</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">linkName</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
        <span class="n">pm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
        <span class="n">name1</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">GetProxyName</span><span class="p">(</span><span class="n">viewProxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetXMLGroup</span><span class="p">(),</span> <span class="n">viewProxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
        <span class="n">name2</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">GetProxyName</span><span class="p">(</span><span class="n">viewProxyOther</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetXMLGroup</span><span class="p">(),</span> <span class="n">viewProxyOther</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
        <span class="n">linkName</span> <span class="o">=</span> <span class="n">name1</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">name2</span> <span class="o">+</span> <span class="s1">&#39;-cameraLink&#39;</span>

    <span class="k">return</span> <span class="n">AddProxyLink</span><span class="p">(</span><span class="n">viewProxy</span><span class="p">,</span> <span class="n">viewProxyOther</span><span class="p">,</span> <span class="n">linkName</span><span class="p">,</span> <span class="n">link</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="RemoveCameraLink"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.RemoveCameraLink">[docs]</a><span class="k">def</span> <span class="nf">RemoveCameraLink</span><span class="p">(</span><span class="n">linkName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove a camera link with the given name.</span>

<span class="sd">    :param linkName: Name of the link to remove.</span>
<span class="sd">    :type linkName: str&quot;&quot;&quot;</span>
    <span class="n">RemoveLink</span><span class="p">(</span><span class="n">linkName</span><span class="p">)</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># SelectionLink methods</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="AddSelectionLink"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.AddSelectionLink">[docs]</a><span class="k">def</span> <span class="nf">AddSelectionLink</span><span class="p">(</span><span class="n">objProxy</span><span class="p">,</span> <span class="n">objProxyOther</span><span class="p">,</span> <span class="n">linkName</span><span class="p">,</span> <span class="n">convertToIndices</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a named selection link between two source proxies.</span>
<span class="sd">    If a link with the given name already exists it will be removed first and</span>
<span class="sd">    repaced with the newly created link.</span>

<span class="sd">    :param objProxy: First proxy to link.</span>
<span class="sd">    :type objProxy: Source proxy</span>
<span class="sd">    :param objProxyOther: Second proxy to link. If `None`, uses the active</span>
<span class="sd">        source.</span>
<span class="sd">    :type objProxyOther: Source proxy</span>
<span class="sd">    :param linkName: Name of the created link.</span>
<span class="sd">    :type linkName: str</span>
<span class="sd">    :param convertToIndices: When `True` (default value), the input selection</span>
<span class="sd">        will always be converted into an indices-based selection before being</span>
<span class="sd">        applied to outputs.</span>
<span class="sd">    :type convertToIndices: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">objProxyOther</span><span class="p">:</span>
        <span class="n">objProxyOther</span> <span class="o">=</span> <span class="n">GetActiveSource</span><span class="p">()</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMSelectionLink</span><span class="p">()</span>
    <span class="n">link</span><span class="o">.</span><span class="n">SetConvertToIndices</span><span class="p">(</span><span class="n">convertToIndices</span><span class="p">)</span>
    <span class="n">link</span><span class="o">.</span><span class="n">AddLinkedSelection</span><span class="p">(</span><span class="n">objProxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">link</span><span class="o">.</span><span class="n">AddLinkedSelection</span><span class="p">(</span><span class="n">objProxyOther</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">link</span><span class="o">.</span><span class="n">AddLinkedSelection</span><span class="p">(</span><span class="n">objProxyOther</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">link</span><span class="o">.</span><span class="n">AddLinkedSelection</span><span class="p">(</span><span class="n">objProxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">RemoveSelectionLink</span><span class="p">(</span><span class="n">linkName</span><span class="p">)</span>
    <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">RegisterLink</span><span class="p">(</span><span class="n">linkName</span><span class="p">,</span> <span class="n">link</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">link</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="RemoveSelectionLink"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.RemoveSelectionLink">[docs]</a><span class="k">def</span> <span class="nf">RemoveSelectionLink</span><span class="p">(</span><span class="n">linkName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove a selection link with the given name.</span>

<span class="sd">    :param linkName: Name of the link to remove.</span>
<span class="sd">    :type linkName: str&quot;&quot;&quot;</span>
    <span class="n">RemoveLink</span><span class="p">(</span><span class="n">linkName</span><span class="p">)</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Animation methods</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="GetTimeKeeper"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetTimeKeeper">[docs]</a><span class="k">def</span> <span class="nf">GetTimeKeeper</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns the timekeeper proxy for the active session. Timekeeper is often used</span>
<span class="sd">    to manage time step information known to the ParaView application.</span>

<span class="sd">    :return: timekeeper</span>
<span class="sd">    :rtype: :class:`paraview.servermanager.TimeKeeper`&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Missing active session&quot;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">Session</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">controller</span><span class="o">.</span><span class="n">FindTimeKeeper</span><span class="p">(</span><span class="n">session</span><span class="p">)</span></div>


<div class="viewcode-block" id="GetAnimationScene"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetAnimationScene">[docs]</a><span class="k">def</span> <span class="nf">GetAnimationScene</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns the application-wide animation scene. ParaView has only one global</span>
<span class="sd">    animation scene. This method provides access to that. You are free to create</span>
<span class="sd">    additional animation scenes directly, but those scenes won&#39;t be shown in the</span>
<span class="sd">    ParaView GUI.</span>

<span class="sd">    :return: The animation scene</span>
<span class="sd">    :rtype: :class:`paraview.servermanager.AnimationScene`&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Missing active session&quot;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">Session</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">controller</span><span class="o">.</span><span class="n">GetAnimationScene</span><span class="p">(</span><span class="n">session</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="AnimateReader"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.AnimateReader">[docs]</a><span class="k">def</span> <span class="nf">AnimateReader</span><span class="p">(</span><span class="n">reader</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This is a utility function that, given a reader and a view</span>
<span class="sd">    animates over all time steps of the reader.</span>

<span class="sd">    :param reader: The reader source to iterate over. Optional, defaults</span>
<span class="sd">        to the active source.</span>
<span class="sd">    :type reader: reader proxy</span>
<span class="sd">    :param view: The view to animate. Optional, defaults to the active view.</span>
<span class="sd">    :type view: view proxy</span>
<span class="sd">    :return: A new animation scene used to play the animation.</span>
<span class="sd">    :rtype: :class:`paraview.simple.AnimationSceneProxy`&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">reader</span><span class="p">:</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">source</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>

    <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">AnimateReader</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetRepresentationAnimationHelper"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetRepresentationAnimationHelper">[docs]</a><span class="k">def</span> <span class="nf">GetRepresentationAnimationHelper</span><span class="p">(</span><span class="n">sourceproxy</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method that returns the representation animation helper for a</span>
<span class="sd">       source proxy. It creates a new one if none exists.&quot;&quot;&quot;</span>
    <span class="c1"># ascertain that proxy is a source proxy</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">sourceproxy</span> <span class="ow">in</span> <span class="n">GetSources</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">proxy</span> <span class="ow">in</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;RepresentationAnimationHelper&quot;</span> <span class="ow">and</span> \
                <span class="n">proxy</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="s2">&quot;Source&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">IsProxyAdded</span><span class="p">(</span><span class="n">sourceproxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">proxy</span>
    <span class="c1"># helper must have been created during RegisterPipelineProxy().</span>
    <span class="k">return</span> <span class="kc">None</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetAnimationTrack"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetAnimationTrack">[docs]</a><span class="k">def</span> <span class="nf">GetAnimationTrack</span><span class="p">(</span><span class="n">propertyname_or_property</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns an animation cue for the property. If one doesn&#39;t exist then a</span>
<span class="sd">    new one will be created.</span>
<span class="sd">    Typical usage::</span>

<span class="sd">      track = GetAnimationTrack(&quot;Center&quot;, 0, sphere) or</span>
<span class="sd">      track = GetAnimationTrack(sphere.GetProperty(&quot;Radius&quot;)) or</span>

<span class="sd">      # this returns the track to animate visibility of the active source in</span>
<span class="sd">      # all views.</span>
<span class="sd">      track = GetAnimationTrack(&quot;Visibility&quot;)</span>

<span class="sd">    For animating properties on implicit planes etc., use the following</span>
<span class="sd">    signatures::</span>

<span class="sd">      track = GetAnimationTrack(slice.SliceType.GetProperty(&quot;Origin&quot;), 0) or</span>
<span class="sd">      track = GetAnimationTrack(&quot;Origin&quot;, 0, slice.SliceType)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetActiveSource</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">Proxy</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;proxy must be a servermanager.Proxy instance&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">propertyname_or_property</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">propertyname</span> <span class="o">=</span> <span class="n">propertyname_or_property</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">propertyname_or_property</span><span class="p">,</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">Property</span><span class="p">):</span>
        <span class="n">prop</span> <span class="o">=</span> <span class="n">propertyname_or_property</span>
        <span class="n">propertyname</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">Name</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">Proxy</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;propertyname_or_property must be a string or servermanager.Property&quot;</span><span class="p">)</span>

    <span class="c1"># To handle the case where the property is actually a &quot;display&quot; property, in</span>
    <span class="c1"># which case we are actually animating the &quot;RepresentationAnimationHelper&quot;</span>
    <span class="c1"># associated with the source.</span>
    <span class="k">if</span> <span class="n">propertyname</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;Opacity&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;RepresentationAnimationHelper&quot;</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetRepresentationAnimationHelper</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="n">propertyname</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;Failed to locate property </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">propertyname</span><span class="p">)</span>

    <span class="n">scene</span> <span class="o">=</span> <span class="n">GetAnimationScene</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">cue</span> <span class="ow">in</span> <span class="n">scene</span><span class="o">.</span><span class="n">Cues</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cue</span><span class="o">.</span><span class="n">AnimatedProxy</span> <span class="o">==</span> <span class="n">proxy</span> <span class="ow">and</span> \
                    <span class="n">cue</span><span class="o">.</span><span class="n">AnimatedPropertyName</span> <span class="o">==</span> <span class="n">propertyname</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">==</span> <span class="n">cue</span><span class="o">.</span><span class="n">AnimatedElement</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">cue</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="c1"># matching animation track wasn&#39;t found, create a new one.</span>
    <span class="n">cue</span> <span class="o">=</span> <span class="n">KeyFrameAnimationCue</span><span class="p">()</span>
    <span class="n">cue</span><span class="o">.</span><span class="n">AnimatedProxy</span> <span class="o">=</span> <span class="n">proxy</span>
    <span class="n">cue</span><span class="o">.</span><span class="n">AnimatedPropertyName</span> <span class="o">=</span> <span class="n">propertyname</span>
    <span class="k">if</span> <span class="n">index</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cue</span><span class="o">.</span><span class="n">AnimatedElement</span> <span class="o">=</span> <span class="n">index</span>
    <span class="n">scene</span><span class="o">.</span><span class="n">Cues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cue</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cue</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetCameraTrack"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetCameraTrack">[docs]</a><span class="k">def</span> <span class="nf">GetCameraTrack</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the camera animation track for the given view.</span>

<span class="sd">    :param view: The view whose camera animation track should be retrieved.</span>
<span class="sd">                 If no view is specified, the active view will be used. If no existing camera</span>
<span class="sd">                 animation track is found, a new one will be created.</span>
<span class="sd">    :type view: View proxy</span>
<span class="sd">    :return: Camera animation cue</span>
<span class="sd">    :rtype: :class:`paraview.servermanager.CameraAnimationCue`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">GetActiveView</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No view specified&quot;</span><span class="p">)</span>
    <span class="n">scene</span> <span class="o">=</span> <span class="n">GetAnimationScene</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">cue</span> <span class="ow">in</span> <span class="n">scene</span><span class="o">.</span><span class="n">Cues</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cue</span><span class="o">.</span><span class="n">AnimatedProxy</span> <span class="o">==</span> <span class="n">view</span> <span class="ow">and</span> \
                <span class="n">cue</span><span class="o">.</span><span class="n">GetXMLName</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;CameraAnimationCue&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">cue</span>
    <span class="c1"># no cue was found, create a new one.</span>
    <span class="n">cue</span> <span class="o">=</span> <span class="n">CameraAnimationCue</span><span class="p">()</span>
    <span class="n">cue</span><span class="o">.</span><span class="n">AnimatedProxy</span> <span class="o">=</span> <span class="n">view</span>
    <span class="n">scene</span><span class="o">.</span><span class="n">Cues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cue</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cue</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="GetTimeTrack"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetTimeTrack">[docs]</a><span class="k">def</span> <span class="nf">GetTimeTrack</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns the animation track used to control the time requested from all</span>
<span class="sd">    sources during playback</span>

<span class="sd">    :return: The time animation track.</span>
<span class="sd">    :rtype: :class:`paraview.servermanager.TimeAnimationCue`&quot;&quot;&quot;</span>
    <span class="n">scene</span> <span class="o">=</span> <span class="n">GetAnimationScene</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">scene</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Missing animation scene&quot;</span><span class="p">)</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">controller</span><span class="o">.</span><span class="n">GetTimeAnimationTrack</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Plugin Management</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="LoadXML"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.LoadXML">[docs]</a><span class="k">def</span> <span class="nf">LoadXML</span><span class="p">(</span><span class="n">xmlstring</span><span class="p">,</span> <span class="n">ns</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given a server manager XML as a string, parse and process it.</span>
<span class="sd">    If you loaded the simple module with ``from paraview.simple import *``,</span>
<span class="sd">    make sure to pass ``globals()`` as the second arguments::</span>

<span class="sd">        LoadXML(xmlstring, globals())</span>

<span class="sd">    Otherwise, the new functions will not appear in the global namespace.</span>

<span class="sd">    :param xmlstring: XML string containing server manager definitions.</span>
<span class="sd">    :type xmlstring: str</span>
<span class="sd">    :param ns: Namespace in which new functions will be defined. Optional,</span>
<span class="sd">               defaults to `None`.</span>
<span class="sd">    :type ns: dict</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ns</span><span class="p">:</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()</span>
    <span class="n">servermanager</span><span class="o">.</span><span class="n">LoadXML</span><span class="p">(</span><span class="n">xmlstring</span><span class="p">)</span>
    <span class="n">_add_functions</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="LoadPlugin"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.LoadPlugin">[docs]</a><span class="k">def</span> <span class="nf">LoadPlugin</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">remote</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ns</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Loads a ParaView plugin and updates this module with new constructors</span>
<span class="sd">    if any. The remote argument (default to ``True``) is to specify whether</span>
<span class="sd">    the plugin will be loaded on the client (``remote=False``) or on the</span>
<span class="sd">    server (``remote=True``).</span>

<span class="sd">    If you loaded the simple module with ``from paraview.simple import *``,</span>
<span class="sd">    make sure to pass ``globals()`` as an argument::</span>

<span class="sd">        LoadPlugin(&quot;myplugin&quot;, False, globals()) # to load on client</span>
<span class="sd">        LoadPlugin(&quot;myplugin&quot;, True, globals())  # to load on server</span>
<span class="sd">        LoadPlugin(&quot;myplugin&quot;, ns=globals())     # to load on server</span>

<span class="sd">    Otherwise, the new functions will not appear in the global namespace.</span>

<span class="sd">    :param filename: Path to the plugin to load.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param remote: If `True`, loads the plugin on the server unless the</span>
<span class="sd">        connection is not remote. If `False`, loads the plugin on the client.</span>
<span class="sd">        Optional, defaults to `True`.</span>
<span class="sd">    :type remote: bool</span>
<span class="sd">    :param ns: Namespace in which new functions will be loaded. Optional,</span>
<span class="sd">        defaults to `None`.</span>
<span class="sd">    :type ns: dict</span>
<span class="sd">    :return: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">LoadPlugins</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">remote</span><span class="o">=</span><span class="n">remote</span><span class="p">,</span> <span class="n">ns</span><span class="o">=</span><span class="n">ns</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="LoadPlugins"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.LoadPlugins">[docs]</a><span class="k">def</span> <span class="nf">LoadPlugins</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Loads ParaView plugins and updates this module with new constructors</span>
<span class="sd">    if any. The remote keyword argument (default to ``True``) is to specify</span>
<span class="sd">    whether the plugin will be loaded on client (``remote=False``) or on server</span>
<span class="sd">    (``remote=True``). Proxy definition updates are deferred until all plugins</span>
<span class="sd">    have been read, which can be more computationally efficient when multiple</span>
<span class="sd">    plugins are loaded in sequence.</span>

<span class="sd">    If you loaded the simple module with ``from paraview.simple import *``,</span>
<span class="sd">    make sure to pass ``globals()`` as a keyword argument::</span>

<span class="sd">        LoadPlugins(&quot;myplugin1&quot;, &quot;myplugin2&quot;, remote=False, ns=globals()) # to load on client</span>
<span class="sd">        LoadPlugins(&quot;myplugin&quot;, &quot;myplugin2&quot;, remote=True, ns=globals())  # to load on server</span>
<span class="sd">        LoadPlugins(&quot;myplugin&quot;, &quot;myplugin2&quot;, ns=globals())     # to load on server</span>

<span class="sd">    Otherwise, the new functions will not appear in the global namespace.</span>

<span class="sd">    Note, `remote=True` has no effect when the connection is not remote.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">remote</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="s1">&#39;remote&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">remote</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;remote&#39;</span><span class="p">]</span>

    <span class="n">ns</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()</span>
    <span class="k">if</span> <span class="s1">&#39;ns&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ns&#39;</span><span class="p">]:</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;ns&#39;</span><span class="p">]</span>

    <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">SetBlockProxyDefinitionUpdates</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">servermanager</span><span class="o">.</span><span class="n">LoadPlugin</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">remote</span><span class="p">)</span>
    <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">SetBlockProxyDefinitionUpdates</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">UpdateProxyDefinitions</span><span class="p">()</span>
    <span class="n">_add_functions</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="LoadDistributedPlugin"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.LoadDistributedPlugin">[docs]</a><span class="k">def</span> <span class="nf">LoadDistributedPlugin</span><span class="p">(</span><span class="n">pluginname</span><span class="p">,</span> <span class="n">remote</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ns</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Loads a plugin that&#39;s distributed with the ParaView executable. This uses the</span>
<span class="sd">    information known about plugins distributed with ParaView to locate the</span>
<span class="sd">    shared library for the plugin to load.</span>

<span class="sd">    :param pluginname: Short name of the plugin (not a file path)</span>
<span class="sd">    :type pluginname: str</span>
<span class="sd">    :param remote: If `True`, loads the plugin on the server unless the</span>
<span class="sd">        connection is not remote. If `False`, loads the plugin on the client.</span>
<span class="sd">        Optional, defaults to `True`.</span>
<span class="sd">    :type remote: bool</span>
<span class="sd">    :param ns: Namespace in which new functions will be loaded. Optional,</span>
<span class="sd">        defaults to `None`.</span>
<span class="sd">    :type ns: dict</span>
<span class="sd">    :raises RuntimeError: If the plugin was not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Cannot load a plugin without a session.&quot;</span><span class="p">)</span>

    <span class="n">conn</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span>
    <span class="n">do_remote</span> <span class="o">=</span> <span class="n">remote</span> <span class="ow">and</span> <span class="n">conn</span><span class="o">.</span><span class="n">IsRemote</span><span class="p">()</span>

    <span class="n">plm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetPluginManager</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">do_remote</span><span class="p">:</span>
        <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">Session</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">plm</span><span class="o">.</span><span class="n">GetRemoteInformation</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">plm</span><span class="o">.</span><span class="n">GetLocalInformation</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">cc</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">GetNumberOfPlugins</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">GetPluginName</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span> <span class="o">==</span> <span class="n">pluginname</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">LoadPlugin</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">GetPluginFileName</span><span class="p">(</span><span class="n">cc</span><span class="p">),</span> <span class="n">remote</span><span class="o">=</span><span class="n">do_remote</span><span class="p">,</span> <span class="n">ns</span><span class="o">=</span><span class="n">ns</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Plugin &#39;</span><span class="si">%s</span><span class="s2">&#39; not found&quot;</span> <span class="o">%</span> <span class="n">pluginname</span><span class="p">)</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Custom Filters Management</span>
<span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="LoadCustomFilters"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.LoadCustomFilters">[docs]</a><span class="k">def</span> <span class="nf">LoadCustomFilters</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">ns</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Loads a custom filter XML file and updates this module with new</span>
<span class="sd">    constructors if any. If you loaded the simple module with</span>
<span class="sd">    ``from paraview.simple import *``, make sure to pass ``globals()`` as an</span>
<span class="sd">    argument.</span>

<span class="sd">    :param filename: Path to XML file with custom filter definitions.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param ns: Namespace in which new functions will be loaded. Optional,</span>
<span class="sd">        defaults to `None`.</span>
<span class="sd">    :type ns: dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">SMProxyManager</span><span class="o">.</span><span class="n">LoadCustomProxyDefinitions</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ns</span><span class="p">:</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()</span>
    <span class="n">_add_functions</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Selection Management</span>
<span class="c1"># ==============================================================================</span>
<span class="k">def</span> <span class="nf">_select</span><span class="p">(</span><span class="n">seltype</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to help create query selection sources.</span>

<span class="sd">    :param seltype: Selection type</span>
<span class="sd">    :type seltype: str</span>
<span class="sd">    :param query: Query expression that defines the selection. Optional, defaults</span>
<span class="sd">        to expression that selects all cells.</span>
<span class="sd">    :type query: str</span>
<span class="sd">    :param proxy: The source proxy to select from. Optional, defaults to the</span>
<span class="sd">        active source.</span>
<span class="sd">    :type proxy: Source proxy.</span>
<span class="sd">    :return: The created selection source.</span>
<span class="sd">    :rtype: :class:`servermanager.sources.SelectionQuerySource`&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetActiveSource</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No active source was found.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">query</span><span class="p">:</span>
        <span class="c1"># This ends up being true for all cells.</span>
        <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;id &gt;= 0&quot;</span>

    <span class="kn">from</span> <span class="nn">paraview.vtk</span> <span class="kn">import</span> <span class="n">vtkDataObject</span>

    <span class="c1"># Note, selSource is not registered with the proxy manager.</span>
    <span class="n">selSource</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">sources</span><span class="o">.</span><span class="n">SelectionQuerySource</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">seltype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;point&quot;</span><span class="p">:</span>
        <span class="n">elementType</span> <span class="o">=</span> <span class="n">vtkDataObject</span><span class="o">.</span><span class="n">POINT</span>
    <span class="k">elif</span> <span class="n">seltype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;cell&quot;</span><span class="p">:</span>
        <span class="n">elementType</span> <span class="o">=</span> <span class="n">vtkDataObject</span><span class="o">.</span><span class="n">CELL</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">elementType</span> <span class="o">=</span> <span class="n">seltype</span>
    <span class="n">selSource</span><span class="o">.</span><span class="n">ElementType</span> <span class="o">=</span> <span class="n">elementType</span>
    <span class="n">selSource</span><span class="o">.</span><span class="n">QueryString</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">SetSelectionInput</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">Port</span><span class="p">,</span> <span class="n">selSource</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">selSource</span>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="SelectCells"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SelectCells">[docs]</a><span class="k">def</span> <span class="nf">SelectCells</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Select cells satisfying the query.</span>

<span class="sd">    :param query: The selection query. If `None`, then all cells are</span>
<span class="sd">        selected.</span>
<span class="sd">    :type query: str</span>
<span class="sd">    :param proxy: The source proxy to select from. Optional, defaults to the</span>
<span class="sd">        active source.</span>
<span class="sd">    :type proxy: Source proxy</span>
<span class="sd">    :return: Selection source</span>
<span class="sd">    :rtype: :class:`servermanager.sources.SelectionQuerySource`&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_select</span><span class="p">(</span><span class="s2">&quot;CELL&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">proxy</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="SelectPoints"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.SelectPoints">[docs]</a><span class="k">def</span> <span class="nf">SelectPoints</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Select points satisfying the query.</span>

<span class="sd">    :param query: The selection query. If `None`, then all points are</span>
<span class="sd">        selected.</span>
<span class="sd">    :type query: str</span>
<span class="sd">    :param proxy: The source proxy to select from. Optional, defaults to the</span>
<span class="sd">        active source.</span>
<span class="sd">    :type proxy: Source proxy</span>
<span class="sd">    :return: Selection source</span>
<span class="sd">    :rtype: :class:`servermanager.sources.SelectionQuerySource`&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_select</span><span class="p">(</span><span class="s2">&quot;POINT&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">proxy</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="ClearSelection"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ClearSelection">[docs]</a><span class="k">def</span> <span class="nf">ClearSelection</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Clears the selection on the active source.</span>

<span class="sd">    :param proxy: Source proxy whose selection should be cleared.</span>
<span class="sd">    :type proxy: Source proxy&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetActiveSource</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No active source was found.&quot;</span><span class="p">)</span>
    <span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">SetSelectionInput</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">Port</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Dynamic lights.</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="CreateLight"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateLight">[docs]</a><span class="k">def</span> <span class="nf">CreateLight</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Makes a new light and returns it, unattached to a view.</span>

<span class="sd">    :return: The new light</span>
<span class="sd">    :rtype: :class:`paraview.servermanager.Light`&quot;&quot;&quot;</span>
    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">lightproxy</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">NewProxy</span><span class="p">(</span><span class="s2">&quot;additional_lights&quot;</span><span class="p">,</span> <span class="s2">&quot;Light&quot;</span><span class="p">)</span>

    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">SMController</span><span class="o">.</span><span class="n">RegisterLightProxy</span><span class="p">(</span><span class="n">lightproxy</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">lightproxy</span><span class="p">)</span></div>


<div class="viewcode-block" id="AddLight"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.AddLight">[docs]</a><span class="k">def</span> <span class="nf">AddLight</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Makes a new light and adds it to the designated or active view.</span>

<span class="sd">    :param view: The view to add the light to. Optional, defaults to the active</span>
<span class="sd">        view.</span>
<span class="sd">    :return: The new light</span>
<span class="sd">    :rtype: :class:`paraview.servermanager.Light`&quot;&quot;&quot;</span>
    <span class="n">view</span> <span class="o">=</span> <span class="n">view</span> <span class="k">if</span> <span class="n">view</span> <span class="k">else</span> <span class="n">GetActiveView</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No &#39;view&#39; was provided and no active view was found.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">view</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMRenderViewProxy&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">lightproxy</span> <span class="o">=</span> <span class="n">CreateLight</span><span class="p">()</span>

    <span class="n">nowlights</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">view</span><span class="o">.</span><span class="n">AdditionalLights</span><span class="p">]</span>
    <span class="n">nowlights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lightproxy</span><span class="p">)</span>
    <span class="n">view</span><span class="o">.</span><span class="n">AdditionalLights</span> <span class="o">=</span> <span class="n">nowlights</span>
    <span class="c1"># This is not the same as returning lightProxy</span>
    <span class="k">return</span> <span class="n">GetLight</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">AdditionalLights</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span></div>


<div class="viewcode-block" id="RemoveLight"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.RemoveLight">[docs]</a><span class="k">def</span> <span class="nf">RemoveLight</span><span class="p">(</span><span class="n">light</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Removes an existing light from its view.</span>

<span class="sd">    :param light: The light to be removed.</span>
<span class="sd">    :type light: :class:`paraview.servermanager.Light`&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">light</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No &#39;light&#39; was provided.&quot;</span><span class="p">)</span>
    <span class="n">view</span> <span class="o">=</span> <span class="n">GetViewForLight</span><span class="p">(</span><span class="n">light</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">view</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMRenderViewProxy&quot;</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">AdditionalLights</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;View retrieved inconsistent with owning a &#39;light&#39;.&quot;</span><span class="p">)</span>

        <span class="n">nowlights</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">view</span><span class="o">.</span><span class="n">AdditionalLights</span> <span class="k">if</span> <span class="n">l</span> <span class="o">!=</span> <span class="n">light</span><span class="p">]</span>
        <span class="n">view</span><span class="o">.</span><span class="n">AdditionalLights</span> <span class="o">=</span> <span class="n">nowlights</span>

    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">SMController</span><span class="o">.</span><span class="n">UnRegisterProxy</span><span class="p">(</span><span class="n">light</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span></div>


<div class="viewcode-block" id="GetLight"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetLight">[docs]</a><span class="k">def</span> <span class="nf">GetLight</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get a previously added light.</span>

<span class="sd">    :param number: The index of the light to obtain.</span>
<span class="sd">    :type number: int</span>
<span class="sd">    :param view: The view holding the light.</span>
<span class="sd">    :type view: View proxy. Option, if not provided the active view is used.</span>
<span class="sd">    :return: The requested light.</span>
<span class="sd">    :rtype: :class:`paraview.servermanager.Light` or `None`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">view</span>
    <span class="n">numlights</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">AdditionalLights</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">numlights</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">number</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">number</span> <span class="o">&gt;=</span> <span class="n">numlights</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">return</span> <span class="n">view</span><span class="o">.</span><span class="n">AdditionalLights</span><span class="p">[</span><span class="n">number</span><span class="p">]</span></div>


<div class="viewcode-block" id="GetViewForLight"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetViewForLight">[docs]</a><span class="k">def</span> <span class="nf">GetViewForLight</span><span class="p">(</span><span class="n">proxy</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given a light proxy, find which view it belongs to</span>

<span class="sd">    :param proxy: The light proxy whose view you want to retrieve.</span>
<span class="sd">    :type proxy: Light proxy</span>
<span class="sd">    :return: The view associated with the light if found, otherwise `None`</span>
<span class="sd">    :rtype: View proxy or `None`&quot;&quot;&quot;</span>
    <span class="c1"># search current views for this light.</span>
    <span class="k">for</span> <span class="n">cc</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">proxy</span><span class="o">.</span><span class="n">GetNumberOfConsumers</span><span class="p">()):</span>
        <span class="n">consumer</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">GetConsumerProxy</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span>
        <span class="n">consumer</span> <span class="o">=</span> <span class="n">consumer</span><span class="o">.</span><span class="n">GetTrueParentProxy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">consumer</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMRenderViewProxy&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">proxy</span> <span class="ow">in</span> <span class="n">consumer</span><span class="o">.</span><span class="n">AdditionalLights</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">consumer</span>
    <span class="k">return</span> <span class="kc">None</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Materials.</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="GetMaterialLibrary"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetMaterialLibrary">[docs]</a><span class="k">def</span> <span class="nf">GetMaterialLibrary</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Returns the material library for the active session.</span>

<span class="sd">    :return: The material library</span>
<span class="sd">    :rtype: :class:`paraview.servermanager.MaterialLibrary`&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Missing active session&quot;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">Session</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">controller</span><span class="o">.</span><span class="n">FindMaterialLibrary</span><span class="p">(</span><span class="n">session</span><span class="p">)</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Textures.</span>
<span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="CreateTexture"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.CreateTexture">[docs]</a><span class="k">def</span> <span class="nf">CreateTexture</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">trivial_producer_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">proxyname</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates and returns a new ImageTexture proxy.</span>
<span class="sd">    The texture is not attached to anything by default but it can be applied</span>
<span class="sd">    to things, for example the view, like so::</span>

<span class="sd">        GetActiveView().UseTexturedBackground = 1</span>
<span class="sd">        GetActiveView().BackgroundTexture = CreateTexture(&quot;foo.png&quot;)</span>

<span class="sd">    :param filename: The name of the image file to load as a texture. If can be</span>
<span class="sd">        `None`, in which case the texture is read from a trivial producer indentified</span>
<span class="sd">        by the `trivial_producer_key`</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param trivial_producer_key: Identifier of the texture image source on the</span>
<span class="sd">        server. This is mainly used by scene importers when `filename` is `None`.</span>
<span class="sd">    :type trivial_producer_key: str</span>
<span class="sd">    :param proxyname: The name for the texture when it is registered in ParaView.</span>
<span class="sd">    :type proxyname: str</span>
<span class="sd">    :return: The newly created texture.</span>
<span class="sd">    :rtype: Image texture proxy.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">textureproxy</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">NewProxy</span><span class="p">(</span><span class="s2">&quot;textures&quot;</span><span class="p">,</span> <span class="s2">&quot;ImageTexture&quot;</span><span class="p">)</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">py_textureproxy</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">textureproxy</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">py_textureproxy</span><span class="o">.</span><span class="n">Mode</span> <span class="o">=</span> <span class="s2">&quot;ReadFromFile&quot;</span>
        <span class="n">controller</span><span class="o">.</span><span class="n">SMController</span><span class="o">.</span><span class="n">RegisterTextureProxy</span><span class="p">(</span><span class="n">textureproxy</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">trivial_producer_key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">py_textureproxy</span><span class="o">.</span><span class="n">Mode</span> <span class="o">=</span> <span class="s2">&quot;ReadFromMemory&quot;</span>
        <span class="n">py_textureproxy</span><span class="o">.</span><span class="n">TrivialProducerKey</span> <span class="o">=</span> <span class="n">trivial_producer_key</span>
        <span class="n">controller</span><span class="o">.</span><span class="n">SMController</span><span class="o">.</span><span class="n">RegisterTextureProxy</span><span class="p">(</span><span class="n">textureproxy</span><span class="p">,</span> <span class="n">trivial_producer_key</span><span class="p">,</span> <span class="n">proxyname</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">py_textureproxy</span></div>


<div class="viewcode-block" id="FindTextureOrCreate"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.FindTextureOrCreate">[docs]</a><span class="k">def</span> <span class="nf">FindTextureOrCreate</span><span class="p">(</span><span class="n">registrationName</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">trivial_producer_key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Finds or creates a new ImageTexture proxy.</span>

<span class="sd">    :param registrationName: The name for the texture when it is registered in ParaView.</span>
<span class="sd">    :type registrationName: str</span>
<span class="sd">    :param filename: Path to the texture image source file. Optional, if not provided,</span>
<span class="sd">        the `trivial_producer_key` should be provided to tell which image source to use</span>
<span class="sd">        for the texture.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param trivial_producer_key: Identifier of the texture image source on the</span>
<span class="sd">        server. This is mainly used by scene importers when `filename` is `None`.</span>
<span class="sd">    :type trivial_producer_key: str&quot;&quot;&quot;</span>
    <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">()</span>
    <span class="n">textureproxy</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetProxy</span><span class="p">(</span><span class="s2">&quot;textures&quot;</span><span class="p">,</span> <span class="n">registrationName</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">textureproxy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">CreateTexture</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">trivial_producer_key</span><span class="p">,</span> <span class="n">registrationName</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">textureproxy</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Miscellaneous functions.</span>
<span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="ShowInteractiveWidgets"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ShowInteractiveWidgets">[docs]</a><span class="k">def</span> <span class="nf">ShowInteractiveWidgets</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;If possible in the current environment, this function will request the</span>
<span class="sd">    application to show the interactive widget(s) for the given proxy.</span>

<span class="sd">    :param proxy: The proxy whose associated interactive widgets should be shown.</span>
<span class="sd">        Optional, if not provided the active source&#39;s widgets are shown.</span>
<span class="sd">    :type proxy: Source proxy.&quot;&quot;&quot;</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">proxy</span> <span class="k">if</span> <span class="n">proxy</span> <span class="k">else</span> <span class="n">GetActiveSource</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No &#39;proxy&#39; was provided and no active source was found.&quot;</span><span class="p">)</span>
    <span class="n">_InvokeWidgetUserEvent</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="s2">&quot;ShowWidget&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="HideInteractiveWidgets"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.HideInteractiveWidgets">[docs]</a><span class="k">def</span> <span class="nf">HideInteractiveWidgets</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;If possible in the current environment, this function will</span>
<span class="sd">    request the application to hide the interactive widget(s) for the given proxy.</span>

<span class="sd">    :param proxy: The proxy whose associated interactive widgets should be hidden.</span>
<span class="sd">        Optional, if not provided the active source&#39;s widgets are hidden.</span>
<span class="sd">    :type proxy: Source proxy.&quot;&quot;&quot;</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">proxy</span> <span class="k">if</span> <span class="n">proxy</span> <span class="k">else</span> <span class="n">GetActiveSource</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No &#39;proxy&#39; was provided and no active source was found.&quot;</span><span class="p">)</span>
    <span class="n">_InvokeWidgetUserEvent</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="s2">&quot;HideWidget&quot;</span><span class="p">)</span></div>


<span class="k">def</span> <span class="nf">_InvokeWidgetUserEvent</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Internal method used by ShowInteractiveWidgets/HideInteractiveWidgets&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="n">proxy</span><span class="o">.</span><span class="n">InvokeEvent</span><span class="p">(</span><span class="s1">&#39;UserEvent&#39;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
        <span class="c1"># Since in 5.0 and earlier, ShowInteractiveWidgets/HideInteractiveWidgets</span>
        <span class="c1"># was called with the proxy being the filter proxy (eg. Clip) and not the</span>
        <span class="c1"># proxy that has the widget i.e. (Clip.ClipType), we explicitly handle it</span>
        <span class="c1"># by iterating of proxy list properties and then invoking the event on</span>
        <span class="c1"># their value proxies too.</span>
        <span class="k">for</span> <span class="n">smproperty</span> <span class="ow">in</span> <span class="n">proxy</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">smproperty</span><span class="o">.</span><span class="n">FindDomain</span><span class="p">(</span><span class="s2">&quot;vtkSMProxyListDomain&quot;</span><span class="p">):</span>
                <span class="n">_InvokeWidgetUserEvent</span><span class="p">(</span><span class="n">smproperty</span><span class="o">.</span><span class="n">GetData</span><span class="p">(),</span> <span class="n">event</span><span class="p">)</span>


<div class="viewcode-block" id="ExportView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ExportView">[docs]</a><span class="k">def</span> <span class="nf">ExportView</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Export a view to the specified output file. Based on the view and file</span>
<span class="sd">    extension, an exporter of the right type will be chosen to export the view.</span>

<span class="sd">    :param filename: Name of the exported file.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param view: The view proxy to export. Optional, defaults to the active view.</span>
<span class="sd">    :type view: View proxy.</span>
<span class="sd">    :param params: A variadic list of `key=value` pairs giving values of</span>
<span class="sd">        specific named properties of the exporter.&quot;&quot;&quot;</span>
    <span class="n">view</span> <span class="o">=</span> <span class="n">view</span> <span class="k">if</span> <span class="n">view</span> <span class="k">else</span> <span class="n">GetActiveView</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No &#39;view&#39; was provided and no active view was found.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No filename specified&quot;</span><span class="p">)</span>

    <span class="c1"># ensure that the view is up-to-date.</span>
    <span class="n">view</span><span class="o">.</span><span class="n">StillRender</span><span class="p">()</span>
    <span class="n">helper</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMViewExportHelper</span><span class="p">()</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">helper</span><span class="o">.</span><span class="n">CreateExporter</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">view</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to create exporter for &quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="n">proxy</span><span class="o">.</span><span class="n">UnRegister</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="n">proxy</span><span class="o">.</span><span class="n">Write</span><span class="p">()</span>
    <span class="k">del</span> <span class="n">proxy</span>
    <span class="k">del</span> <span class="n">helper</span></div>


<div class="viewcode-block" id="ImportView"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ImportView">[docs]</a><span class="k">def</span> <span class="nf">ImportView</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Import a view from a specified input scene file.</span>

<span class="sd">    :param filename: The name of the file to import.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param view: View proxy into which the scene should be imported. Optional, defaults</span>
<span class="sd">        to the active view.</span>
<span class="sd">    :type view: View proxy.</span>
<span class="sd">    :param params: A variadic list of `key=value` pairs giving values of</span>
<span class="sd">        specific named properties of the importer.&quot;&quot;&quot;</span>
    <span class="n">view</span> <span class="o">=</span> <span class="n">view</span> <span class="k">if</span> <span class="n">view</span> <span class="k">else</span> <span class="n">GetActiveView</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">view</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span> <span class="p">(</span><span class="s2">&quot;No &#39;view&#39; was provided and no active view was found.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span> <span class="p">(</span><span class="s2">&quot;No filename specified&quot;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">Session</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMImporterFactory</span><span class="o">.</span><span class="n">CreateImporter</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">session</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">proxy</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span> <span class="p">(</span><span class="s2">&quot;Failed to create importer for &quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="n">proxy</span><span class="o">.</span><span class="n">UnRegister</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">proxy</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">proxy</span><span class="p">)</span>
    <span class="n">SetProperties</span><span class="p">(</span><span class="n">proxy</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="n">proxy</span><span class="o">.</span><span class="n">UpdatePipelineInformation</span><span class="p">()</span>
    <span class="n">proxy</span><span class="o">.</span><span class="n">Import</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
    <span class="n">view</span><span class="o">.</span><span class="n">StillRender</span><span class="p">()</span>
    <span class="k">del</span> <span class="n">proxy</span></div>


<div class="viewcode-block" id="ResetProperty"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.ResetProperty">[docs]</a><span class="k">def</span> <span class="nf">ResetProperty</span><span class="p">(</span><span class="n">propertyName</span><span class="p">,</span> <span class="n">proxy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">restoreFromSettings</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Resets a proxy property to its default value.</span>

<span class="sd">    :param propertyName: Name of the property to reset.</span>
<span class="sd">    :type propertyName: str</span>
<span class="sd">    :param proxy: The proxy whose property should be reset. Optional, defaults to the</span>
<span class="sd">        active source.</span>
<span class="sd">    :param restoreFromSettings: If `True`, the property will be reset to the default</span>
<span class="sd">        value stored in the settings if available, otherwise it will be reset to</span>
<span class="sd">        ParaView&#39;s application default value. Optional, defaults to `True`.</span>
<span class="sd">    :type restoreFromSettings: bool&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">proxy</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="n">GetActiveSource</span><span class="p">()</span>

    <span class="n">propertyToReset</span> <span class="o">=</span> <span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="n">propertyName</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">propertyToReset</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">propertyToReset</span><span class="o">.</span><span class="n">ResetToDefault</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">restoreFromSettings</span><span class="p">:</span>
            <span class="n">settings</span> <span class="o">=</span> <span class="n">paraview</span><span class="o">.</span><span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMSettings</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">()</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">GetPropertySetting</span><span class="p">(</span><span class="n">propertyToReset</span><span class="p">)</span>

        <span class="n">proxy</span><span class="o">.</span><span class="n">SMProxy</span><span class="o">.</span><span class="n">UpdateVTKObjects</span><span class="p">()</span></div>


<div class="viewcode-block" id="GetOpenGLInformation"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.GetOpenGLInformation">[docs]</a><span class="k">def</span> <span class="nf">GetOpenGLInformation</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMSession</span><span class="o">.</span><span class="n">CLIENT</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Recover OpenGL information on either the client or server.</span>

<span class="sd">    :param location: Where the OpenGL information should be retrieved, e.g.,</span>
<span class="sd">        pass `vtkPVSession.CLIENT` if you want OpenGL info from the client system</span>
<span class="sd">        (default value), pass in `vtkPVSession.SERVERS` if you want the server.</span>
<span class="sd">    :type location: `vtkPVServer.ServerFlags` enum value&quot;&quot;&quot;</span>
    <span class="n">openGLInfo</span> <span class="o">=</span> <span class="n">paraview</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">vtkRemotingViews</span><span class="o">.</span><span class="n">vtkPVOpenGLInformation</span><span class="p">()</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetActiveSession</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">GatherInformation</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">openGLInfo</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">openGLInfo</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Usage and demo code set</span>
<span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="demo1"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.demo1">[docs]</a><span class="k">def</span> <span class="nf">demo1</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simple demo that create the following pipeline::</span>

<span class="sd">       sphere - shrink +</span>
<span class="sd">       cone            + &gt; append</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create a sphere of radius = 2, theta res. = 32</span>
    <span class="c1"># This object becomes the active source.</span>
    <span class="n">ss</span> <span class="o">=</span> <span class="n">Sphere</span><span class="p">(</span><span class="n">Radius</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ThetaResolution</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
    <span class="c1"># Apply the shrink filter. The Input property is optional. If Input</span>
    <span class="c1"># is not specified, the filter is applied to the active source.</span>
    <span class="n">shr</span> <span class="o">=</span> <span class="n">Shrink</span><span class="p">(</span><span class="n">Input</span><span class="o">=</span><span class="n">ss</span><span class="p">)</span>
    <span class="c1"># Create a cone source.</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">Cone</span><span class="p">()</span>
    <span class="c1"># Append cone and shrink</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">AppendDatasets</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">Input</span> <span class="o">=</span> <span class="p">[</span><span class="n">shr</span><span class="p">,</span> <span class="n">cs</span><span class="p">]</span>
    <span class="c1"># Show the output of the append filter. The argument is optional</span>
    <span class="c1"># as the app filter is now the active object.</span>
    <span class="n">Show</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
    <span class="c1"># Render the default view.</span>
    <span class="n">Render</span><span class="p">()</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>

<div class="viewcode-block" id="demo2"><a class="viewcode-back" href="../../paraview.simple.html#paraview.simple.demo2">[docs]</a><span class="k">def</span> <span class="nf">demo2</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s2">&quot;/Users/berk/Work/ParaView/ParaViewData/Data/disk_out_ref.ex2&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This demo shows the use of readers, data information and display</span>
<span class="sd">    properties.&quot;&quot;&quot;</span>

    <span class="c1"># Create the exodus reader and specify a file name</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">ExodusIIReader</span><span class="p">(</span><span class="n">FileName</span><span class="o">=</span><span class="n">fname</span><span class="p">)</span>
    <span class="c1"># Get the list of point arrays.</span>
    <span class="n">avail</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">PointVariables</span><span class="o">.</span><span class="n">Available</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">avail</span><span class="p">)</span>
    <span class="c1"># Select all arrays</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">PointVariables</span> <span class="o">=</span> <span class="n">avail</span>

    <span class="c1"># Turn on the visibility of the reader</span>
    <span class="n">Show</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
    <span class="c1"># Set representation to wireframe</span>
    <span class="n">SetDisplayProperties</span><span class="p">(</span><span class="n">Representation</span><span class="o">=</span><span class="s2">&quot;Wireframe&quot;</span><span class="p">)</span>
    <span class="c1"># Black background is not pretty</span>
    <span class="n">SetViewProperties</span><span class="p">(</span><span class="n">Background</span><span class="o">=</span><span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">])</span>
    <span class="n">Render</span><span class="p">()</span>
    <span class="c1"># Change the elevation of the camera. See VTK documentation of vtkCamera</span>
    <span class="c1"># for camera parameters.</span>
    <span class="c1"># NOTE: THIS WILL BE SIMPLER</span>
    <span class="n">GetActiveCamera</span><span class="p">()</span><span class="o">.</span><span class="n">Elevation</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
    <span class="n">Render</span><span class="p">()</span>
    <span class="c1"># Now that the reader executed, let&#39;s get some information about it&#39;s</span>
    <span class="c1"># output.</span>
    <span class="n">pdi</span> <span class="o">=</span> <span class="n">reader</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">PointData</span>
    <span class="c1"># This prints a list of all read point data arrays as well as their</span>
    <span class="c1"># value ranges.</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of point arrays:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">pdi</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pdi</span><span class="p">)):</span>
        <span class="n">ai</span> <span class="o">=</span> <span class="n">pdi</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;----------------&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Array:&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">ai</span><span class="o">.</span><span class="n">Name</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>
        <span class="n">numComps</span> <span class="o">=</span> <span class="n">ai</span><span class="o">.</span><span class="n">GetNumberOfComponents</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of components:&quot;</span><span class="p">,</span> <span class="n">numComps</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numComps</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Range:&quot;</span><span class="p">,</span> <span class="n">ai</span><span class="o">.</span><span class="n">GetRange</span><span class="p">(</span><span class="n">j</span><span class="p">))</span>
    <span class="c1"># White is boring. Let&#39;s color the geometry using a variable.</span>
    <span class="c1"># First create a lookup table. This object controls how scalar</span>
    <span class="c1"># values are mapped to colors. See VTK documentation for</span>
    <span class="c1"># details.</span>
    <span class="c1"># Map min (0.00678) to blue, max (0.0288) to red</span>
    <span class="n">SetDisplayProperties</span><span class="p">(</span><span class="n">LookupTable</span><span class="o">=</span><span class="n">MakeBlueToRedLT</span><span class="p">(</span><span class="mf">0.00678</span><span class="p">,</span> <span class="mf">0.0288</span><span class="p">))</span>
    <span class="c1"># Color by point array called Pres</span>
    <span class="n">SetDisplayProperties</span><span class="p">(</span><span class="n">ColorArrayName</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;POINTS&quot;</span><span class="p">,</span> <span class="s2">&quot;Pres&quot;</span><span class="p">))</span>
    <span class="n">Render</span><span class="p">()</span></div>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Set of Internal functions</span>
<span class="c1"># ==============================================================================</span>

<span class="k">def</span> <span class="nf">_initializeSession</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Internal method used to initialize a session. Users don&#39;t need to</span>
<span class="sd">    call this directly. Whenever a new session is created this method is called</span>
<span class="sd">    by API in this module.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">connection</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;&#39;connection&#39; cannot be empty.&quot;</span><span class="p">)</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">InitializeSession</span><span class="p">(</span><span class="n">connection</span><span class="o">.</span><span class="n">Session</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_create_func</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="n">skipRegisteration</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Internal function.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">CreateObject</span><span class="p">(</span><span class="o">*</span><span class="nb">input</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function creates a new proxy. For pipeline objects that accept inputs,</span>
<span class="sd">        all non-keyword arguments are assumed to be inputs. All keyword arguments are</span>
<span class="sd">        assumed to be property-value pairs and are passed to the new proxy.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">registrationName</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">nameParam</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;registrationName&#39;</span><span class="p">,</span> <span class="s1">&#39;guiName&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">nameParam</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
                <span class="n">registrationName</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="n">nameParam</span><span class="p">]</span>
                <span class="k">del</span> <span class="n">params</span><span class="p">[</span><span class="n">nameParam</span><span class="p">]</span>

        <span class="c1"># Create a controller instance.</span>
        <span class="n">controller</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ParaViewPipelineController</span><span class="p">()</span>

        <span class="kn">from</span> <span class="nn">.catalyst.detail</span> <span class="kn">import</span> <span class="n">IsInsituInput</span><span class="p">,</span> <span class="n">CreateProducer</span>
        <span class="k">if</span> <span class="n">IsInsituInput</span><span class="p">(</span><span class="n">registrationName</span><span class="p">):</span>
            <span class="c1"># This is a catalyst input, replace with a trivial producer</span>
            <span class="n">px</span> <span class="o">=</span> <span class="n">CreateProducer</span><span class="p">(</span><span class="n">registrationName</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Instantiate the actual object from the given module.</span>
            <span class="n">px</span> <span class="o">=</span> <span class="n">paraview</span><span class="o">.</span><span class="n">_backwardscompatibilityhelper</span><span class="o">.</span><span class="n">GetProxy</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">no_update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># preinitialize the proxy.</span>
        <span class="n">controller</span><span class="o">.</span><span class="n">PreInitializeProxy</span><span class="p">(</span><span class="n">px</span><span class="p">)</span>

        <span class="c1"># Make sure non-keyword arguments are valid</span>
        <span class="k">for</span> <span class="n">inp</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">inp</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">Proxy</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">px</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="s2">&quot;Input&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Expecting a proxy as input.&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;This function does not accept non-keyword arguments.&quot;</span><span class="p">)</span>

        <span class="c1"># Assign inputs</span>
        <span class="n">inputName</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMCoreUtilities</span><span class="o">.</span><span class="n">GetInputPropertyName</span><span class="p">(</span><span class="n">px</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">px</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="n">inputName</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">px</span><span class="o">.</span><span class="n">SetPropertyWithName</span><span class="p">(</span><span class="n">inputName</span><span class="p">,</span> <span class="nb">input</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># If no input is specified, try the active pipeline object</span>
                <span class="k">if</span> <span class="n">px</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">(</span><span class="n">inputName</span><span class="p">)</span><span class="o">.</span><span class="n">GetRepeatable</span><span class="p">()</span> <span class="ow">and</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">get_selected_sources</span><span class="p">():</span>
                    <span class="n">px</span><span class="o">.</span><span class="n">SetPropertyWithName</span><span class="p">(</span><span class="n">inputName</span><span class="p">,</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">get_selected_sources</span><span class="p">())</span>
                <span class="k">elif</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">source</span><span class="p">:</span>
                    <span class="n">px</span><span class="o">.</span><span class="n">SetPropertyWithName</span><span class="p">(</span><span class="n">inputName</span><span class="p">,</span> <span class="n">active_objects</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;This function does not expect an input.&quot;</span><span class="p">)</span>

        <span class="c1"># Pass all the named arguments as property,value pairs</span>
        <span class="n">SetProperties</span><span class="p">(</span><span class="n">px</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>

        <span class="c1"># post initialize</span>
        <span class="n">controller</span><span class="o">.</span><span class="n">PostInitializeProxy</span><span class="p">(</span><span class="n">px</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">px</span><span class="p">,</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">MultiplexerSourceProxy</span><span class="p">):</span>
            <span class="n">px</span><span class="o">.</span><span class="n">UpdateDynamicProperties</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">skipRegisteration</span><span class="p">:</span>
            <span class="c1"># Register the proxy with the proxy manager (assuming we are only using</span>
            <span class="c1"># these functions for pipeline proxies or animation proxies.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">px</span><span class="p">,</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">SourceProxy</span><span class="p">):</span>
                <span class="n">controller</span><span class="o">.</span><span class="n">RegisterPipelineProxy</span><span class="p">(</span><span class="n">px</span><span class="p">,</span> <span class="n">registrationName</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">px</span><span class="o">.</span><span class="n">GetXMLGroup</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;animation&quot;</span><span class="p">:</span>
                <span class="n">controller</span><span class="o">.</span><span class="n">RegisterAnimationProxy</span><span class="p">(</span><span class="n">px</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">px</span>

    <span class="c1"># add special tag to detect these functions in _remove_functions</span>
    <span class="n">CreateObject</span><span class="o">.</span><span class="n">__paraview_create_object_tag</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="n">CreateObject</span>


<span class="c1"># -----------------------------------------------------------------------------</span>

<span class="k">def</span> <span class="nf">_create_doc</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">old</span><span class="p">):</span>
    <span class="s2">&quot;Internal function.&quot;</span>
    <span class="kn">import</span> <span class="nn">string</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">new</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="n">ts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">strpd</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">strpd</span><span class="p">:</span>
        <span class="n">ts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">lstrip</span><span class="p">())</span>
    <span class="n">res</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="k">return</span> <span class="n">res</span>


<span class="c1"># -----------------------------------------------------------------------------</span>

<span class="k">def</span> <span class="nf">_func_name_valid</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="s2">&quot;Internal function.&quot;</span>
    <span class="n">valid</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;(&#39;</span> <span class="ow">or</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
            <span class="n">valid</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">break</span>
    <span class="k">return</span> <span class="n">valid</span>


<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="k">def</span> <span class="nf">_get_proxymodules_to_import</span><span class="p">(</span><span class="n">connection</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    used in _add_functions, _get_generated_proxies, and _remove_functions to get</span>
<span class="sd">    modules to import proxies from.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">connection</span> <span class="ow">and</span> <span class="n">connection</span><span class="o">.</span><span class="n">ProxiesNS</span><span class="p">:</span>
        <span class="n">modules</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">ProxiesNS</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">modules</span><span class="o">.</span><span class="n">filters</span><span class="p">,</span> <span class="n">modules</span><span class="o">.</span><span class="n">sources</span><span class="p">,</span> <span class="n">modules</span><span class="o">.</span><span class="n">writers</span><span class="p">,</span> <span class="n">modules</span><span class="o">.</span><span class="n">animation</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>


<span class="k">def</span> <span class="nf">_add_functions</span><span class="p">(</span><span class="n">g</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">activeModule</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">ProxiesNS</span>

    <span class="c1"># add deprecated proxies first, so we create the new function and documentation.</span>
    <span class="n">modules</span> <span class="o">=</span> <span class="n">paraview</span><span class="o">.</span><span class="n">_backwardscompatibilityhelper</span><span class="o">.</span><span class="n">get_deprecated_proxies</span><span class="p">(</span><span class="n">activeModule</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">proxyModule</span> <span class="ow">in</span> <span class="n">modules</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">deprecatedProxyPair</span> <span class="ow">in</span> <span class="n">modules</span><span class="p">[</span><span class="n">proxyModule</span><span class="p">]:</span>
            <span class="n">oldProxyLabel</span> <span class="o">=</span> <span class="n">deprecatedProxyPair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">newProxyLabel</span> <span class="o">=</span> <span class="n">deprecatedProxyPair</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">newProxyLabel</span> <span class="ow">in</span> <span class="n">g</span> <span class="ow">and</span> <span class="n">_func_name_valid</span><span class="p">(</span><span class="n">newProxyLabel</span><span class="p">):</span>
                <span class="n">f</span> <span class="o">=</span> <span class="n">_create_func</span><span class="p">(</span><span class="n">deprecatedProxyPair</span><span class="p">,</span> <span class="n">proxyModule</span><span class="p">)</span>
                <span class="n">f</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> is a deprecated proxy. It will be automatically replaced by </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">oldProxyLabel</span><span class="p">,</span> <span class="n">newProxyLabel</span><span class="p">)</span>
                <span class="n">f</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">oldProxyLabel</span>
                <span class="n">g</span><span class="p">[</span><span class="n">oldProxyLabel</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span>

    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">_get_proxymodules_to_import</span><span class="p">(</span><span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">):</span>
        <span class="c1"># Skip registering proxies in certain modules (currently only writers)</span>
        <span class="n">skipRegisteration</span> <span class="o">=</span> <span class="n">m</span> <span class="ow">is</span> <span class="n">activeModule</span><span class="o">.</span><span class="n">writers</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">g</span> <span class="ow">and</span> <span class="n">_func_name_valid</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                <span class="c1"># print &quot;add %s function&quot; % key</span>
                <span class="n">f</span> <span class="o">=</span> <span class="n">_create_func</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">skipRegisteration</span><span class="p">)</span>
                <span class="n">f</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">key</span>
                <span class="n">f</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">_create_doc</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">getDocumentation</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">f</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
                <span class="n">g</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span>


<span class="c1"># -----------------------------------------------------------------------------</span>

<span class="k">def</span> <span class="nf">_get_generated_proxies</span><span class="p">():</span>
    <span class="n">proxies</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">_get_proxymodules_to_import</span><span class="p">(</span><span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
            <span class="n">proxies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">proxies</span>


<span class="c1"># -----------------------------------------------------------------------------</span>

<span class="k">def</span> <span class="nf">_remove_functions</span><span class="p">(</span><span class="n">g</span><span class="p">):</span>
    <span class="n">to_remove</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> \
                 <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;__paraview_create_object_tag&#39;</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">to_remove</span><span class="p">:</span>
        <span class="k">del</span> <span class="n">g</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="c1"># paraview.print_info(&quot;remove %s&quot;, key)</span>


<span class="c1"># -----------------------------------------------------------------------------</span>

<span class="k">def</span> <span class="nf">_find_writer</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="s2">&quot;Internal function.&quot;</span>
    <span class="n">extension</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">parts</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">extension</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Filename has no extension, please specify a write&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">extension</span> <span class="o">==</span> <span class="s1">&#39;png&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;vtkPNGWriter&#39;</span>
    <span class="k">elif</span> <span class="n">extension</span> <span class="o">==</span> <span class="s1">&#39;bmp&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;vtkBMPWriter&#39;</span>
    <span class="k">elif</span> <span class="n">extension</span> <span class="o">==</span> <span class="s1">&#39;ppm&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;vtkPNMWriter&#39;</span>
    <span class="k">elif</span> <span class="n">extension</span> <span class="o">==</span> <span class="s1">&#39;tif&#39;</span> <span class="ow">or</span> <span class="n">extension</span> <span class="o">==</span> <span class="s1">&#39;tiff&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;vtkTIFFWriter&#39;</span>
    <span class="k">elif</span> <span class="n">extension</span> <span class="o">==</span> <span class="s1">&#39;jpg&#39;</span> <span class="ow">or</span> <span class="n">extension</span> <span class="o">==</span> <span class="s1">&#39;jpeg&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;vtkJPEGWriter&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Cannot infer filetype from extension:&quot;</span><span class="p">,</span> <span class="n">extension</span><span class="p">)</span>


<span class="c1"># -----------------------------------------------------------------------------</span>

<span class="k">def</span> <span class="nf">_switchToActiveConnectionCallback</span><span class="p">(</span><span class="n">caller</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Callback called when the active session/connection changes in the</span>
<span class="sd">        ServerManager. We update the Python state to reflect the change.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">servermanager</span><span class="p">:</span>
        <span class="n">session</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">GetActiveSession</span><span class="p">()</span>
        <span class="n">connection</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">GetConnectionFromSession</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
        <span class="n">SetActiveConnection</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Set of Internal classes</span>
<span class="c1"># ==============================================================================</span>

<span class="k">class</span> <span class="nc">_active_session_observer</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetProxyManager</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ObserverTag</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">AddObserver</span><span class="p">(</span><span class="n">pxm</span><span class="o">.</span><span class="n">ActiveSessionChanged</span><span class="p">,</span>
                                           <span class="n">_switchToActiveConnectionCallback</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">servermanager</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="p">:</span>
                <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxyManager</span><span class="o">.</span><span class="n">GetProxyManager</span><span class="p">()</span><span class="o">.</span><span class="n">RemoveObserver</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ObserverTag</span><span class="p">)</span>


<span class="c1"># -----------------------------------------------------------------------------</span>

<span class="k">class</span> <span class="nc">_active_objects</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class manages the active objects (source and view). The active</span>
<span class="sd">    objects are shared between Python and the user interface. This class</span>
<span class="sd">    is for internal use. Use the :ref:`SetActiveSource`,</span>
<span class="sd">    :ref:`GetActiveSource`, :ref:`SetActiveView`, and :ref:`GetActiveView`</span>
<span class="sd">    methods for setting and getting active objects.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__get_selection_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="s2">&quot;Internal method.&quot;</span>
        <span class="k">if</span> <span class="n">session</span> <span class="ow">and</span> <span class="n">session</span> <span class="o">!=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="o">.</span><span class="n">Session</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Try to set an active object with invalid active connection.&quot;</span><span class="p">)</span>
        <span class="n">pxm</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ProxyManager</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">pxm</span><span class="o">.</span><span class="n">GetSelectionModel</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">model</span><span class="p">:</span>
            <span class="n">model</span> <span class="o">=</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">vtkSMProxySelectionModel</span><span class="p">()</span>
            <span class="n">pxm</span><span class="o">.</span><span class="n">RegisterSelectionModel</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span>

    <span class="k">def</span> <span class="nf">set_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
        <span class="s2">&quot;Sets the active view.&quot;</span>
        <span class="n">active_view_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_selection_model</span><span class="p">(</span><span class="s2">&quot;ActiveView&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">view</span><span class="p">:</span>
            <span class="n">active_view_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_selection_model</span><span class="p">(</span><span class="s2">&quot;ActiveView&quot;</span><span class="p">,</span> <span class="n">view</span><span class="o">.</span><span class="n">GetSession</span><span class="p">())</span>
            <span class="n">active_view_model</span><span class="o">.</span><span class="n">SetCurrentProxy</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span>
                                              <span class="n">active_view_model</span><span class="o">.</span><span class="n">CLEAR_AND_SELECT</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">active_view_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_selection_model</span><span class="p">(</span><span class="s2">&quot;ActiveView&quot;</span><span class="p">)</span>
            <span class="n">active_view_model</span><span class="o">.</span><span class="n">SetCurrentProxy</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span>
                                              <span class="n">active_view_model</span><span class="o">.</span><span class="n">CLEAR_AND_SELECT</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Returns the active view.&quot;</span>
        <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__get_selection_model</span><span class="p">(</span><span class="s2">&quot;ActiveView&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">GetCurrentProxy</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">set_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">):</span>
        <span class="s2">&quot;Sets the active source.&quot;</span>
        <span class="n">active_sources_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_selection_model</span><span class="p">(</span><span class="s2">&quot;ActiveSources&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">source</span><span class="p">:</span>
            <span class="c1"># 3 == CLEAR_AND_SELECT</span>
            <span class="n">active_sources_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_selection_model</span><span class="p">(</span><span class="s2">&quot;ActiveSources&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">.</span><span class="n">GetSession</span><span class="p">())</span>
            <span class="n">active_sources_model</span><span class="o">.</span><span class="n">SetCurrentProxy</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">SMProxy</span><span class="p">,</span>
                                                 <span class="n">active_sources_model</span><span class="o">.</span><span class="n">CLEAR_AND_SELECT</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">active_sources_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_selection_model</span><span class="p">(</span><span class="s2">&quot;ActiveSources&quot;</span><span class="p">)</span>
            <span class="n">active_sources_model</span><span class="o">.</span><span class="n">SetCurrentProxy</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span>
                                                 <span class="n">active_sources_model</span><span class="o">.</span><span class="n">CLEAR_AND_SELECT</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__convert_proxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">px</span><span class="p">):</span>
        <span class="s2">&quot;Internal method.&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">px</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">px</span><span class="o">.</span><span class="n">IsA</span><span class="p">(</span><span class="s2">&quot;vtkSMOutputPort&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">OutputPort</span><span class="p">(</span>
                <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">px</span><span class="o">.</span><span class="n">GetSourceProxy</span><span class="p">()),</span>
                <span class="n">px</span><span class="o">.</span><span class="n">GetPortIndex</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">_getPyProxy</span><span class="p">(</span><span class="n">px</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_source</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Returns the active source.&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__convert_proxy</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__get_selection_model</span><span class="p">(</span><span class="s2">&quot;ActiveSources&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">GetCurrentProxy</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_selected_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Returns the set of sources selected in the pipeline browser.&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_selection_model</span><span class="p">(</span><span class="s2">&quot;ActiveSources&quot;</span><span class="p">)</span>
        <span class="n">proxies</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">GetNumberOfSelectedProxies</span><span class="p">()):</span>
            <span class="n">proxies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__convert_proxy</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">GetSelectedProxy</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">proxies</span>

    <span class="n">view</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_view</span><span class="p">,</span> <span class="n">set_view</span><span class="p">)</span>
    <span class="n">source</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_source</span><span class="p">,</span> <span class="n">set_source</span><span class="p">)</span>


<span class="c1"># -----------------------------------------------------------------------------</span>

<span class="k">class</span> <span class="nc">_funcs_internals</span><span class="p">:</span>
    <span class="s2">&quot;Internal class.&quot;</span>
    <span class="n">first_render</span> <span class="o">=</span> <span class="kc">True</span>


<span class="c1"># ==============================================================================</span>
<span class="c1"># Start the session and initialize the ServerManager</span>
<span class="c1"># ==============================================================================</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">paraview</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">satelite</span><span class="p">:</span>
    <span class="n">active_session_observer</span> <span class="o">=</span> <span class="n">_active_session_observer</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">servermanager</span><span class="o">.</span><span class="n">ActiveConnection</span><span class="p">:</span>
        <span class="n">Connect</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_add_functions</span><span class="p">(</span><span class="nb">globals</span><span class="p">())</span>

    <span class="n">active_objects</span> <span class="o">=</span> <span class="n">_active_objects</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013, Kitware, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   
  <!-- KW:BEGIN -->
  <script type="text/javascript" src="/paraview-docs/paraview-version.js"></script>
  <!-- KW:END -->
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>