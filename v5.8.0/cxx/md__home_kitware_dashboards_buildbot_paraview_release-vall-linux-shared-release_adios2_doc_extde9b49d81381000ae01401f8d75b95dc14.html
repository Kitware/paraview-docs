<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParaView: Develop ParaView with Git</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="height: 56px;">
  <div class="pv-title-cpp title-line">
    <div class="title-line">
      <img class="pv-logo" src="paraview-logo-small.png" />
    </div>
    <div class="langSwitch title-line"></div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Develop ParaView with Git </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page documents how to develop ParaView through <a href="http://git-scm.com">Git</a>. See the <a class="el" href="Testing_2README_8md.html">README</a> for more information.</p>
<p>Git is an extremely powerful version control tool that supports many different "workflows" for individual development and collaboration. Here we document procedures used by the ParaView development community. In the interest of simplicity and brevity we do <em>not</em> provide an explanation of why we use this approach.</p>
<h2>Setup </h2>
<p>Before you begin, perform initial setup:</p>
<ol type="1">
<li>Register <a href="https://gitlab.kitware.com/users/sign_in">GitLab Access</a> to create an account and select a user name.</li>
<li><a href="https://gitlab.kitware.com/paraview/paraview/forks/new">Fork ParaView</a> into your user's namespace on GitLab.</li>
<li>Follow the <a href="download.md#clone">download instructions</a> to create a local clone of the main ParaView repository. Optionally configure Git to <a href="download.md#use-ssh-instead-of-https">use SSH instead of HTTPS</a>. Then clone: <pre class="fragment">$ git clone --recursive https://gitlab.kitware.com/paraview/paraview.git ParaView
$ cd ParaView
</pre> The main repository will be configured as your <code>origin</code> remote.</li>
<li>Run the <a href="/Utilities/SetupForDevelopment.sh">developer setup script</a> to prepare your ParaView work tree and create Git command aliases used below: <pre class="fragment">$ ./Utilities/SetupForDevelopment.sh
</pre> This will prompt for your GitLab user name and configure a remote called <code>gitlab</code> to refer to it.</li>
<li>(Optional but highly recommended.) <a href="https://open.cdash.org/register.php">Register</a> with the ParaView project on Kitware's CDash instance to better know how your code performs in regression tests. After registering and signing in, click on "All Dashboards" link in the upper left corner, scroll down and click "Subscribe to this project" on the right of ParaView.</li>
</ol>
<h2>Workflow </h2>
<p>ParaView development uses a <a href="http://public.kitware.com/Wiki/Git/Workflow/Topic">branchy workflow</a> based on topic branches. Our collaboration workflow consists of three main steps:</p>
<ol type="1">
<li>Local Development:<ul>
<li><a href="#update">Update</a></li>
<li><a href="#create-a-topic">Create a Topic</a></li>
</ul>
</li>
<li>Code Review (requires <a href="https://gitlab.kitware.com/users/sign_in">GitLab Access</a>):<ul>
<li><a href="#share-a-topic">Share a Topic</a></li>
<li><a href="#create-a-merge-request">Create a Merge Request</a></li>
<li><a href="#review-a-merge-request">Review a Merge Request</a></li>
<li><a href="#revise-a-topic">Revise a Topic</a></li>
</ul>
</li>
<li>Integrate Changes:<ul>
<li><a href="#merge-a-topic">Merge a Topic</a> (requires permission in GitLab)</li>
<li><a href="#delete-a-topic">Delete a Topic</a></li>
</ul>
</li>
</ol>
<h2>Update </h2>
<ol type="1">
<li>Update your local <code>master</code> branch: <pre class="fragment">$ git checkout master
$ git pullall
</pre></li>
<li>Optionally push <code>master</code> to your fork in GitLab: <pre class="fragment">$ git push gitlab master
</pre> to keep it in sync. The <code>git gitlab-push</code> script used to <a href="#share-a-topic">Share a Topic</a> below will also do this.</li>
</ol>
<h2>Create a Topic </h2>
<p>All new work must be committed on topic branches. Name topics like you might name functions: concise but precise. A reader should have a general idea of the feature or fix to be developed given just the branch name. Additionally, it is preferred to have an issue associated with every topic. The issue can document the bug or feature to be developed. In such cases, being your topic name with the issue number.</p>
<ol type="1">
<li><p class="startli">To start a new topic branch: </p><pre class="fragment">$ git fetch origin
</pre><p class="startli">If there is an issue associated with the topic, assign the issue to yourself using the "**Assignee**" field, and add the <code>workflow:active-development</code> label to it.</p>
</li>
<li><p class="startli">For new development, start the topic from <code>origin/master</code>: </p><pre class="fragment">$ git checkout -b my-topic origin/master
</pre><p class="startli">For release branch fixes, start the topic from <code>origin/release</code>, and by convention use a topic name starting in <code>release-</code>: </p><pre class="fragment">$ git checkout -b release-my-topic origin/release
</pre><p class="startli">If subdmodules may have changed, the run: </p><pre class="fragment">$ git submodule update
</pre></li>
<li><p class="startli">Edit files and create commits (repeat as needed): </p><pre class="fragment">$ edit file1 file2 file3
$ git add file1 file2 file3
$ git commit
</pre><p class="startli">Caveats:</p><ul>
<li>To add data follow these vtk instructions.</li>
<li>To add icons, Kitware's graphic designer may be able to help create an SVG icon.</li>
</ul>
<p class="startli">Commit messages must contain a brief description as the first line and a more detailed description of what the commit contains. If the commit contains a new feature, the detailed message must describe the new feature and why it is needed. If the commit contains a bug fix, the detailed message must describe the bug behavior, its underlying cause, and the approach to fix it. If the bug is described in the bug tracker, the commit message must contain a reference to the bug number.</p>
</li>
<li><p class="startli">Add some tests</p><ul>
<li>Start <code>paraview.exe -dr</code> to ignore prefs (disable registry)</li>
<li>Choose <code>Tools .. Record <a class="elRef" doxygen="/home/kitware/dashboards/buildbot/paraview_release-vall-linux-shared-release_adios2_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classTest.html">Test</a></code> to start.</li>
<li>Choose <code>Tools .. Lock View Size Custom...</code> - a 400x400 window works well.</li>
<li>Perform actions in the GUI that exercise your feature. Stop recording.</li>
<li>Put the resulting XML file into <code>Clients/ParaView/Testing/XML</code></li>
<li>Add it to CMakeLists.txt, probably in a TESTS_WITH_BASELINES section<ul>
<li>you can manually add <code>&lt;pqcompareview&gt;</code> for multiple image comparisons, then add to the TESTS_WITH_INLINE_COMPARES section</li>
</ul>
</li>
<li>Follow the vtk instructions to add the baseline images, which live in <code>Testing/Data/Baseline/</code>.<ul>
<li>Add your new baseline images to the list in <code>Testing/XML/CMakeLists.txt</code></li>
</ul>
</li>
<li>Add all testing files to your topic.</li>
</ul>
<p class="startli">Some background is in the <a href="https://www.paraview.org/Wiki/Testing_design">testing design wiki</a>.</p>
</li>
<li><p class="startli">Add release notes</p>
<p class="startli">Notable changes should create a new file in <code>Documentation/release/dev/</code> named <code>my-topic.md</code> (replace <code>my-topic</code> with the name of your topic). This is not necessary for branches which are "trivial" such as fixing typos, updating test baselines, or are developer-oriented.</p>
</li>
</ol>
<h2>Share a Topic </h2>
<p>When a topic is ready for review and possible inclusion, share it by pushing to a fork of your repository in GitLab. Be sure you have registered and signed in for <a href="https://gitlab.kitware.com/users/sign_in">GitLab Access</a> and created your fork by visiting the main <a href="https://gitlab.kitware.com/paraview/paraview">ParaView GitLab</a> repository page and using the "Fork" button in the upper right.</p>
<ol type="1">
<li>Checkout the topic if it is not your current branch: <pre class="fragment">$ git checkout my-topic
</pre></li>
<li>Check what commits will be pushed to your fork in GitLab: <pre class="fragment">$ git prepush
</pre></li>
<li><p class="startli">Push commits in your topic branch to your fork in GitLab: </p><pre class="fragment">$ git gitlab-push
</pre><p class="startli">Notes:</p><ul>
<li>If you are revising a previously pushed topic and have rewritten the topic history, add <code>-f</code> or <code>--force</code> to overwrite the destination.</li>
<li>If the topic adds data see <a href="https://gitlab.kitware.com/vtk/vtk/blob/master/Documentation/dev/git/data.md#push">this note</a>.</li>
<li>The <code>gitlab-push</code> script also pushes the <code>master</code> branch to your fork in GitLab to keep it in sync with the upstream <code>master</code>.</li>
</ul>
<p class="startli">The output will include a link to the topic branch in your fork in GitLab and a link to a page for creating a Merge Request.</p>
</li>
</ol>
<h2>Create a Merge Request </h2>
<p>(If you already created a merge request for a given topic and have reached this step after revising it, skip to the <a href="#review-a-merge-request">next step</a>.)</p>
<p>Visit your fork in GitLab, browse to the "**Merge Requests**" link on the left, and use the "**New Merge Request**" button in the upper right to reach the URL printed at the end of the <a href="#share-a-topic">previous step</a>. It should be of the form: </p><pre class="fragment">https://gitlab.kitware.com/&lt;username&gt;/paraview/merge_requests/new
</pre><p>Follow these steps:</p>
<ol type="1">
<li>In the "**Source branch**" box select the <code>&lt;username&gt;/paraview</code> repository and the <code>my-topic</code> branch.</li>
<li><p class="startli">In the "**Target branch**" box select the <code>paraview/paraview</code> repository and the <code>master</code> branch. It should be the default.</p>
<p class="startli">If your change is a fix for the <code>release</code> branch, you should still select the <code>master</code> branch as the target because the change needs to end up there too.</p>
</li>
<li>Use the "**Compare branches**" button to proceed to the next page and fill out the merge request creation form.</li>
<li><p class="startli">In the "**Title**" field provide a one-line summary of the entire topic. This will become the title of the Merge Request.</p>
<p class="startli">Example Merge Request Title: </p><pre class="fragment">Wrapping: Add Java 1.x support
</pre></li>
<li><p class="startli">In the "**Description**" field provide a high-level description of the change the topic makes and any relevant information about how to try it.</p><ul>
<li>Use <code>@username</code> syntax to draw attention of specific developers. This syntax may be used anywhere outside literal text and code blocks. Or, wait until the <a href="#review-a-merge-request">next step</a> and add comments to draw attention of developers.</li>
<li>If your change is a fix for the <code>release</code> branch, indicate this so that a maintainer knows it should be merged to <code>release</code>.</li>
<li>Optionally use a fenced code block with type <code>message</code> to specify text to be included in the generated merge commit message when the topic is <a href="#merge-a-topic">merged</a>.</li>
</ul>
<p class="startli">Example Merge Request Description: </p><pre class="fragment">This branch requires Java 1.x which is not generally available yet.
Get Java 1.x from ... in order to try these changes.

```message
Add support for Java 1.x to the wrapping infrastructure.
```

Cc: @user1 @user2
</pre></li>
<li>The "**Assign to**", "**Milestone**", and "**Labels**" fields may be left blank.</li>
<li>Use the "**Submit merge request**" button to create the merge request and visit its page.</li>
</ol>
<h2>Review a Merge Request </h2>
<p>Add comments mentioning specific developers using <code>@username</code> syntax to draw their attention and have the topic reviewed. After typing <code>@</code> and some text, GitLab will offer completions for developers whose real names or user names match.</p>
<p>Comments use <a href="https://gitlab.kitware.com/help/markdown/markdown">GitLab Flavored Markdown</a> for formatting. See GitLab documentation on <a href="https://gitlab.kitware.com/help/markdown/markdown#special-gitlab-references">Special GitLab References</a> to add links to things like merge requests and commits in other repositories.</p>
<p>When a merge request is ready for review, developers can use the <code>triage:ready-for-review</code> to indicate the same to the reviewers. If reviewers deems that it needs more work, they can add the <code>triage:needswork</code> label. This can be repeated as many times as needed adding/removing labels as appropriate.</p>
<p>If a merge request is waiting on dashboards, use the <code>triage:pending-dashboards</code> label.</p>
<h3>Human Reviews</h3>
<p>Reviewers may add comments providing feedback or to acknowledge their approval. Lines of specific forms will be extracted during <a href="#merge-a-topic">merging</a> and included as trailing lines of the generated merge commit message:</p>
<p>The <em>leading</em> line of a comment may optionally be exactly one of the following votes followed by nothing but whitespace before the end of the line:</p>
<ul>
<li><code>-1</code> or :-1: (<code>:-1:</code>) means "The change is not ready for integration."</li>
<li><code>+1</code> or :+1: (<code>:+1:</code>) means "I like the change but defer to others."</li>
<li><code>+2</code> means "The change is ready for integration."</li>
<li><code>+3</code> means "I have tested the change and verified it works."</li>
</ul>
<p>The middle lines of a comment may be free-form <a href="https://gitlab.kitware.com/help/markdown/markdown">GitLab Flavored Markdown</a>.</p>
<p>Zero or more <em>trailing</em> lines of a comment may each contain exactly one of the following votes followed by nothing but whitespace before the end of the line:</p>
<ul>
<li><code>Rejected-by: me</code> means "The change is not ready for integration."</li>
<li><code>Acked-by: me</code> means "I like the change but defer to others."</li>
<li><code>Reviewed-by: me</code> means "The change is ready for integration."</li>
<li><code>Tested-by: me</code> means "I have tested the change and verified it works."</li>
</ul>
<p>Each <code>me</code> reference may instead be an <code>@username</code> reference or a full <code>Real Name &lt;user@domain&gt;</code> reference to credit someone else for performing the review. References to <code>me</code> and <code>@username</code> will automatically be transformed into a real name and email address according to the user's GitLab account profile.</p>
<h4>Fetching Changes</h4>
<p>One may fetch the changes associated with a merge request by using the <code>git fetch</code> command line shown at the top of the Merge Request page. It is of the form: </p><pre class="fragment">$ git fetch https://gitlab.kitware.com/$username/paraview.git $branch
</pre><p>This updates the local <code>FETCH_HEAD</code> to refer to the branch.</p>
<p>There are a few options for checking out the changes in a work tree:</p>
<ul>
<li>One may checkout the branch: <pre class="fragment">$ git checkout FETCH_HEAD -b $branch
</pre> or checkout the commit without creating a local branch: <pre class="fragment">$ git checkout FETCH_HEAD
</pre></li>
<li>Or, one may cherry-pick the commits to minimize rebuild time: <pre class="fragment">$ git cherry-pick ..FETCH_HEAD
</pre></li>
</ul>
<h3>Robot Reviews</h3>
<p>The "Kitware Robot" automatically performs basic checks on the commits and adds a comment acknowledging or rejecting the topic. This will be repeated automatically whenever the topic is pushed to your fork again. A re-check may be explicitly requested by adding a comment with a single <a href="#trailing-lines"><em>trailing</em> line</a>: </p><pre class="fragment">Do: check
</pre><p>A topic cannot be <a href="#merge-a-topic">merged</a> until the automatic review succeeds.</p>
<h3>Testing</h3>
<p>ParaView has a <a href="http://buildbot.net">buildbot</a> instance watching for merge requests to test. A developer must issue a command to buildbot to enable builds: </p><pre class="fragment">Do: test
</pre><p>The buildbot user (@buildbot) will respond with a comment linking to the CDash results when it schedules builds.</p>
<p>The <code>Do: test</code> command accepts the following arguments:</p>
<ul>
<li><code>--oneshot</code> only build the <em>current</em> hash of the branch; updates will not be built using this command</li>
<li><code>--stop</code> clear the list of commands for the merge request</li>
<li><code>--superbuild</code> build the superbuilds related to the project</li>
<li><code>--clear</code> clear previous commands before adding this command</li>
<li><code>--regex-include &lt;arg&gt;</code> or <code>-i &lt;arg&gt;</code> only build on builders matching <code>&lt;arg&gt;</code> (a Python regular expression)</li>
<li><code>--regex-exclude &lt;arg&gt;</code> or <code>-e &lt;arg&gt;</code> excludes builds on builders matching <code>&lt;arg&gt;</code> (a Python regular expression)</li>
</ul>
<p>Multiple <code>Do: test</code> commands may be given in separate comments. A new <code>Do: test</code> command must be explicitly issued for each branch update for which testing is desired. Buildbot may skip tests for older branch updates that have not started before a test for a new update is requested.</p>
<p>Builder names always follow this pattern: </p><pre class="fragment">    project-host-os-libtype-buildtype+feature1+feature2
</pre><ul>
<li>project: always <code>paraview</code> for paraview</li>
<li>host: the buildbot host</li>
<li>os: one of <code>windows</code>, <code>osx</code>, or <code>linux</code></li>
<li>libtype: <code>shared</code> or <code>static</code></li>
<li>buildtype: <code>release</code> or <code>debug</code></li>
<li>feature: alphabetical list of features enabled for the build</li>
</ul>
<p>For a list of all builders, see:</p>
<ul>
<li><a href="https://buildbot.kitware.com/builders?category=paraview-expected">paraview-expected</a></li>
<li><a href="https://buildbot.kitware.com/builders?category=paraview-superbuild">paraview-superbuild</a></li>
<li><a href="https://buildbot.kitware.com/builders?category=paraview-experimental">paraview-experimental</a></li>
</ul>
<h2>Revise a Topic </h2>
<p>If a topic is approved during GitLab review, skip to the <a href="#merge-a-topic">next step</a>. Otherwise, revise the topic and push it back to GitLab for another review as follows:</p>
<ol type="1">
<li>Checkout the topic if it is not your current branch: <pre class="fragment">$ git checkout my-topic
</pre></li>
<li><p class="startli">To revise the <code>3</code>rd commit back on the topic: </p><pre class="fragment">$ git rebase -i HEAD~3
</pre><p class="startli">(Substitute the correct number of commits back, as low as <code>1</code>.) Follow Git's interactive instructions.</p>
</li>
<li>Return to the <a href="#share-a-topic">above step</a> to share the revised topic.</li>
</ol>
<h2>Merge a Topic </h2>
<p>After a topic has been reviewed and approved in a GitLab Merge Request, authorized developers may add a comment of the form </p><pre class="fragment">Do: merge
</pre><p>to ask that the change be merged into the upstream repository. By convention, do not request a merge if any <code>-1</code> or <code>Rejected-by:</code> review comments have not been resolved and superseded by at least <code>+1</code> or <code>Acked-by:</code> review comments from the same user.</p>
<p>Developers are encouraged to merge their own merge requests on review. However, please do not merge unless you are available to address any dashboard issues that may arise. Developers who repeatedly ignore dashboard issues following their merges may loose developer privileges to the repository temporarily (or permanently)!</p>
<h3>Merge Success</h3>
<p>If the merge succeeds the topic will appear in the upstream repository <code>master</code> branch and the Merge Request will be closed automatically. Any issues associated with the Merge Request will generally get closed automatically. If not, the developer merging the changes should close such issues and add a <code>workflow:customer-review</code> tag to the issue(s) addressed by the change. Reporters and testers can then review the fix. Try to add enough information to the Issue or the Merge Request to indicate how to test the functionality if not obvious from the original Issue.</p>
<h3>Merge Failure</h3>
<p>If the merge fails (likely due to a conflict), a comment will be added describing the failure. In the case of a conflict, fetch the latest upstream history and rebase on it: </p><pre class="fragment">$ git fetch origin
$ git rebase origin/master
</pre><p>(If you are fixing a bug in the latest release then substitute <code>origin/release</code> for <code>origin/master</code>.)</p>
<p>Return to the <a href="#share-a-topic">above step</a> to share the revised topic.</p>
<h2>Delete a Topic </h2>
<p>After a topic has been merged upstream the Merge Request will be closed. Now you may delete your copies of the branch.</p>
<ol type="1">
<li>In the GitLab Merge Request page a "**Remove Source Branch**" button will appear. Use it to delete the <code>my-topic</code> branch from your fork in GitLab.</li>
<li>In your work tree checkout and update the <code>master</code> branch: <pre class="fragment">$ git checkout master
$ git pull
</pre></li>
<li><p class="startli">Delete the local topic branch: </p><pre class="fragment">$ git branch -d my-topic
</pre><p class="startli">The <code>branch -d</code> command works only when the topic branch has been correctly merged. Use <code>-D</code> instead of <code>-d</code> to force the deletion of an unmerged topic branch (warning - you could lose commits).</p>
</li>
</ol>
<h2>Contribute VTK Changes </h2>
<p>If you have any VTK changes, then you are required to get your changes incorporated into VTK using <a href="https://gitlab.kitware.com/vtk/vtk/tree/master/Documentation/dev/git">VTK's development workflow</a>. Once your VTK topic has been approved and merged into VTK, then:</p>
<ol type="1">
<li>Create a <a href="#create-a-topic">ParaView topic</a> if you haven't already.</li>
<li>Add your VTK topic head (or the latest VTK origin/master which includes your VTK topic head). <pre class="fragment"> $ cd VTK
 $ git checkout master
 $ cd ..
 $ git add VTK
 $ git commit
</pre></li>
<li>Follow the merge process documented earlier. </li>
</ol>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15 on Tue Feb 18 2020
</small></address>
<!-- KW:BEGIN -->
<!-- this adds the version selection header -->
<script type="text/javascript" src="/paraview-docs/paraview-version.js"></script>
<!-- KW:END -->
</body>
</html>
