<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParaView: Plugin Howto</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="height: 56px;">
  <div class="pv-title-cpp title-line">
    <div class="title-line">
      <img class="pv-logo" src="paraview-logo-small.png" />
    </div>
    <div class="langSwitch title-line"></div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Plugin Howto </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction</h2>
<p>ParaView comes with plethora of functionality bundled in: several readers, multitude of filters, different types of views, etc. However, it is not uncommon for developers to want to add new functionality to ParaView to, for example, add support to their new file format or incorporate a new filter into ParaView. ParaView makes it possible to add new functionality by using an extensive plugin mechanism.</p>
<p>Plugins can be used to extend ParaView in several ways:</p>
<ul>
<li>Add new readers, writers, filters</li>
<li>Add custom GUI components such as toolbar buttons to perform common tasks</li>
<li>Add new views in for display data</li>
</ul>
<p>Examples for different types of plugins are provided with the ParaView source under <code>Examples/Plugins/</code>.</p>
<p>This document has major sections:</p>
<ul>
<li>First section covers how to use existing plugins in ParaView.</li>
<li>Second section contains information for developers about writing new plugins for ParaView.</li>
</ul>
<h2>Using Plugins</h2>
<h3>Types of plugins</h3>
<p>Plugins are distributed as shared libraries (<code>*.so</code> on Unix and macOS, and <code>*.dll</code> on Windows). For a plugin to be loadable in ParaView, it must be built with the same version of ParaView as it is expected to be deployed on. Plugins can be classified into two broad categories:</p>
<ul>
<li><em>Server-side plugins</em>: These are plugins that extend the algorithmic capabilities for ParaView. For example, new filters, readers or writers. Since ParaView processes data on the server-side, these plugins need to be loaded on the server.</li>
<li><em>Client-side plugins</em>: These are plugins that extend the ParaView GUI including property panels for new filters, toolbars or views. These plugins need to be loaded on the client.</li>
</ul>
<p>Oftentimes a plugin has both server-side as well as client-side components to it. For example, a plugin that adds a new filter and a property panel that goes with that filter. Such plugins need to be loaded both on the server as well as the client.</p>
<p>Generally, users don't have to worry whether a plugin is a server-side or client-side plugin. Simply load the plugin on the server as well as the client. ParaView will include relevant components from plugin on each of the processes.</p>
<h3>Loading plugins</h3>
<p>There are four ways for loading plugins:</p>
<ul>
<li><em>Using the GUI</em> (<code>Plugin Manager</code>)<ul>
<li>Plugins can be loaded into ParaView using the <code>Plugin Manager</code> accessible from the <code>Tools | Manage Plugins/Extensions</code> menu. The <code>Plugin Manager</code> has two sections for loading client plugins and server plugins (shown only when connected to a server). To load a plugin on the client and server side, simply browse to the plugin shared library. If the plugin is loaded successfully, it will appear in the list of loaded plugins. The <code>Plugin Manager</code> also lists the paths it searched to load plugins automatically.</li>
<li>The <code>Plugin Manager</code> remembers all loaded plugins across ParaView instances, so once a plugin is loaded once, it will appear in the future (unloaded).</li>
<li>You can set up ParaView to automatically load the plugin at startup (for client plugins) or on connecting to the server (for server plugins) by checking the "Auto Load" checkbox on a loaded plugin.</li>
</ul>
</li>
</ul>
<div class="image">
<img src="images/LocalPlugin_Manager.png" alt="Plugin Manager when not connected to a remote server, showing loaded plugins on the local site."/>
</div>
 <div class="image">
<img src="images/RemotePlugin_Manager.png" alt="Plugin Manager when connected to a server showing loaded plugins on the local as well as remote sites."/>
</div>
<ul>
<li><em>Using environment variable</em> (Auto-loading plugins)<ul>
<li>In order to have ParaView automatically load a set of plugins on startup, one can use the <code>PV_PLUGIN_PATH</code> environment variable. <code>PV_PLUGIN_PATH</code> may be used to list a set of directories (separated by colon (<code>:</code>) for Unix platforms or semi-colon (<code>;</code>) on Windows) which ParaView will search on startup to load plugins. This environment variable needs to be set on both the client and server sides to load their respective plugins. Note that plugins in PV_PLUGIN_PATH are always auto-loaded irrespective of the status of the <code>Auto Load</code> checkbox in the <code>Plugin Manager</code>.</li>
<li>Finer control can be used using the <code>PV_PLUGIN_CONFIG_FILE</code> environment variable. <code>PV_PLUGIN_CONFIG_FILE</code> can be used to list a set of XML plugin configuration files (separated by colon (<code>:</code>) on Unix platforms or semi-colon (<code>;</code>) on Windows). ParaView will read these files on startup to load specified plugins. The XML plugin configuration file format looks like this:</li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;</div><div class="line">&lt;<span class="keywordtype">Plugins</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">Plugin</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MyPlugin&quot;</span> <span class="keyword">filename</span>=<span class="stringliteral">&quot;/absolute/path/to/libMyPlugin.so&quot;</span>/&gt;</div><div class="line">&lt;/<span class="keywordtype">Plugins</span>&gt;</div></div><!-- fragment --> <pre class="fragment">  Plugins listed this way will always be loaded, irrespective of the status
  of the `Auto Load` checkbox in the `Plugin Manager`.
</pre><ul>
<li><em>Using the plugin file <code>.plugins</code></em> (Make plugins available and possibly Auto-load plugins)<ul>
<li>Plugins that are listed in the <code>.plugins</code> file on the client and server will automatically be listed in the <code>Plugin Manager</code>, and may optionally be auto loaded. ParaView creates its own <code>.plugins</code> file listing plugins known during its build and uses it as the default. An example <code>.plugins</code> file, auto loading H5PartReader, looks like this:</li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;</div><div class="line">&lt;<span class="keywordtype">Plugins</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">Plugin</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Moments&quot;</span> <span class="keyword">auto_load</span>=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div><div class="line">  &lt;<span class="keywordtype">Plugin</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;PrismPlugin&quot;</span> <span class="keyword">auto_load</span>=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div><div class="line">  &lt;<span class="keywordtype">Plugin</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;PointSprite_Plugin&quot;</span> <span class="keyword">auto_load</span>=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div><div class="line">  &lt;<span class="keywordtype">Plugin</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;pvblot&quot;</span> <span class="keyword">auto_load</span>=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div><div class="line">  &lt;<span class="keywordtype">Plugin</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;SierraPlotTools&quot;</span> <span class="keyword">auto_load</span>=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div><div class="line">  &lt;<span class="keywordtype">Plugin</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;H5PartReader&quot;</span> <span class="keyword">auto_load</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div><div class="line">&lt;/<span class="keywordtype">Plugins</span>&gt;</div></div><!-- fragment --><ul>
<li><em>Default search paths</em><ul>
<li>Recognized locations are:<ul>
<li>A <code>plugins</code> subdirectory under the <code>paraview-X.Y</code> directory in the library path (usually <code>lib</code> on Unix platforms and <code>bin</code> on Windows).</li>
<li>A <code>plugins</code> subdirectory in the user's home directory. On Unix platforms, <code>$HOME/.config/ParaView/ParaView&lt;version&gt;/Plugins</code>. On Windows <code>APPDATA$\ParaView\ParaView&lt;version&gt;\Plugins</code>. (XXX: no evidence of an implementation backing this search path).</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>Debugging Plugins</h2>
<p>If plugin loading fails, the <code>PV_PLUGIN_DEBUG</code> environment variable may be set for either the client or server processes. ParaView will then print verbose information about each step and causes for failure, as show below.</p>
<div class="fragment"><div class="line">***************************************************</div><div class="line">Attempting to load /home/utkarsh/Kitware/ParaView3/ParaView3Bin/bin/libSurfaceLIC.so</div><div class="line">Loaded shared library successfully. Now trying to validate that it&#39;s a ParaView plugin.</div><div class="line">Updating Shared Library Paths: /home/utkarsh/Kitware/ParaView3/ParaView3Bin/bin</div><div class="line">Plugin instance located successfully. Now loading components from the plugin instance based on the interfaces it implements.</div><div class="line">----------------------------------------------------------------</div><div class="line">Plugin Information:</div><div class="line">  Name        : SurfaceLIC</div><div class="line">  Version     : 1.0</div><div class="line">  ReqOnServer : 1</div><div class="line">  ReqOnClient : 1</div><div class="line">  ReqPlugins  :</div><div class="line">  ServerManager Plugin : Yes</div><div class="line">  Python Plugin : No</div></div><!-- fragment --><h1>Writing plugins</h1>
<p>This section covers writing and compiling different types of Plugins. To create a plugin, one must have their own build of ParaView. Binaries downloaded from www.paraview.org do not include necessary header files or import libraries (where applicable) for compiling plugins.</p>
<p>The <code>CMakeLists.txt</code> file used in all following examples start off with the following code:</p>
<div class="fragment"><div class="line"># ParaView requires CMake 3.8 in order to be used.</div><div class="line">cmake_minimum_required(VERSION 3.8)</div><div class="line">project(myplugin)</div><div class="line"></div><div class="line">find_package(ParaView REQUIRED)</div></div><!-- fragment --><p>Where CMake will ask for the <code>ParaView_DIR</code> which you point to the ParaView build or install tree you would to build your with.</p>
<h2>Exposing an Existing Filter</h2>
<p>Sometimes, the filter that one wants to add to ParaView is already available in VTK, it's just not exposed through the ParaView GUI. This is the easiest type of plugin to create. There are two options:</p>
<ol type="1">
<li>setup the plugin using only an XML file; and</li>
<li>actually compile the plugin into a shared library.</li>
</ol>
<p>The first option is the easiest, but the second option will prepare you for creating a custom filter in the future as the process is nearly identical.</p>
<h2>Adding a New Filter</h2>
<p>It is also possible to add new filters to ParaView. The filter has to be a VTK-based algorithm, written as following the standard procedures for writing VTK algorithms. Generally for such cases where we are adding a new VTK class to ParaView (be it a filter, reader or a writer), we need to do the following tasks:</p>
<ul>
<li>Write a <em>Server Manager Configuration XML</em> which describes the <code>Proxy</code> interface for the filter. Basically, this defines the interface for the client to create and modify instances of the new class on the server side. Please refer to the <a href="http://www.kitware.com/products/books/paraview.html">ParaView Guide</a> for details about writing these server-manager XMLs.</li>
<li>Write a configuration XML for the GUI to make ParaView GUI aware of this new class, if applicable. For filters, this is optional, since ParaView automatically recognizes filters added through plugins and lists them in the <em>Alphabetical</em> sub-menu. One may use the GUI configuration XML to add the new filter to a specific category in the <em>Filters</em> menu, or add a new category. For readers and writers, this is required since ParaView GUI needs to know what extensions your reader/writer supports etc.</li>
</ul>
<h2>Examples</h2>
<h3>XML Plugins</h3>
<p>If you have not built ParaView from source, using an XML plugin is your only option.</p>
<p>First, a server manager XML for the filter is required. The GUI XML to add the filter to any specific category is optional.</p>
<p>For example, let's say we simply want to expose the <code><a class="elRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkCellDerivatives.html">vtkCellDerivatives</a></code> filter in VTK. Then first, we'll write the server manager configuration XML (call it <code>CellDerivatives.xml</code>), similar to what we would have done for adding a new filter.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">ServerManagerConfiguration</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">ProxyGroup</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;filters&quot;</span>&gt;</div><div class="line">    &lt;<span class="keywordtype">SourceProxy</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MyCellDerivatives&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;vtkCellDerivatives&quot;</span> <span class="keyword">label</span>=<span class="stringliteral">&quot;My Cell Derivatives&quot;</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">Documentation</span></div><div class="line">          <span class="keyword">long_help</span>=<span class="stringliteral">&quot;Create point attribute array by projecting points onto an elevation vector.&quot;</span></div><div class="line">          <span class="keyword">short_help</span>=<span class="stringliteral">&quot;Create a point array representing elevation.&quot;</span>&gt;</div><div class="line">      &lt;/<span class="keywordtype">Documentation</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">InputProperty</span></div><div class="line">          <span class="keyword">name</span>=<span class="stringliteral">&quot;Input&quot;</span></div><div class="line">          <span class="keyword">command</span>=<span class="stringliteral">&quot;SetInputConnection&quot;</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">ProxyGroupDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;groups&quot;</span>&gt;</div><div class="line">          &lt;<span class="keywordtype">Group</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;sources&quot;</span>/&gt;</div><div class="line">          &lt;<span class="keywordtype">Group</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;filters&quot;</span>/&gt;</div><div class="line">        &lt;/<span class="keywordtype">ProxyGroupDomain</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">DataTypeDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;input_type&quot;</span>&gt;</div><div class="line">          &lt;<span class="keywordtype">DataType</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;vtkDataSet&quot;</span>/&gt;</div><div class="line">        &lt;/<span class="keywordtype">DataTypeDomain</span>&gt;</div><div class="line">      &lt;/<span class="keywordtype">InputProperty</span>&gt;</div><div class="line">    &lt;/<span class="keywordtype">SourceProxy</span>&gt;</div><div class="line">  &lt;/<span class="keywordtype">ProxyGroup</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">ServerManagerConfiguration</span>&gt;</div></div><!-- fragment --><p>At this point, we can stop and use the plugin in ParaView by loading the XML file directly into the plugin manager.</p>
<p>Please note that if you are writing the XML for a filter that takes just one input, you <em>must</em> set the <code>name</code> attribute for the <code>InputProperty</code> XML element to <code>Input</code>. If you do not, then the filter will not be displayed properly in ParaView's pipeline browser.</p>
<h3>Compiling into a Shared Library</h3>
<p>If you have built ParaView from source, it is possible to compile the plugin into into a shared library. To do this, we can use the following top-level: <code>CMakeLists.txt</code>:</p>
<div class="fragment"><div class="line"># Standard CMake boilerplate. ParaView&#39;s `find_package` requires at least 3.8.</div><div class="line">cmake_minimum_required(VERSION 3.8)</div><div class="line">project(sharedlibrary)</div><div class="line"></div><div class="line"># These two lines are required in order to set up installation directories</div><div class="line"># (which also control build directory locations) and enable shared builds</div><div class="line"># (CMake&#39;s default is for a static build).</div><div class="line">include(GNUInstallDirs)</div><div class="line">set(BUILD_SHARED_LIBS ON)</div><div class="line"></div><div class="line"># Find ParaView. This will bring in ParaView&#39;s CMake API and imported targets.</div><div class="line">find_package(ParaView REQUIRED)</div><div class="line"></div><div class="line"># Scan the plugin file in order to set up internal data structures for building</div><div class="line"># plugins.</div><div class="line">paraview_plugin_scan(</div><div class="line">  # The `paraview.plugin` file describing the plugin.</div><div class="line">  PLUGIN_FILES &quot;${CMAKE_CURRENT_SOURCE_DIR}/Plugin/paraview.plugin&quot;</div><div class="line">  # A result variable for the (enabled) plugins found during the scan.</div><div class="line">  PROVIDES_PLUGINS plugins</div><div class="line">  # Enable plugins during this scan by default.</div><div class="line">  ENABLE_BY_DEFAULT ON)</div><div class="line"></div><div class="line"># Build the plugins discovered during the scan.</div><div class="line">paraview_plugin_build(</div><div class="line">  PLUGINS ${plugins})</div></div><!-- fragment --><p>The mentioned <code>paraview.plugin</code> file describes the plugin to the build system:</p>
<div class="fragment"><div class="line">NAME</div><div class="line">  CellDerivatives</div><div class="line">DESCRIPTION</div><div class="line">  Expose the vtkCellDerivatives class to ParaView.</div><div class="line">REQUIRES_MODULES</div><div class="line">  # This module provides the `vtkCellDerivatives` filter.</div><div class="line">  VTK::FiltersGeneral</div></div><!-- fragment --><p>In the <code>Plugin</code> directory (beside the <code>paraview.plugin</code> file), the plugin is given the information it needs to build:</p>
<div class="fragment"><div class="line">paraview_add_plugin(CellDerivatives</div><div class="line">  VERSION &quot;1.0&quot;</div><div class="line">  SERVER_MANAGER_XML CellDerivatives.xml)</div></div><!-- fragment --><p>Then using CMake, one can build a plugin for this new filter. We can now load the plugin through the plugin manager by selecting the created <code>.so</code> or <code>.dll</code> file.</p>
<h3>Qt resource plugins</h3>
<p>Similarly compiled Qt resources (<code>*.bqrc</code>) can be loaded at runtime. A <code>.bqrc</code> file is a binary file containing resources which can include icons, the GUI configuration XML for adding categories, etc. A <code>.bqrc</code> can be made from a <code>.qrc</code> by running the <code>rcc</code> utility provided by Qt:</p>
<div class="fragment"><div class="line">rcc -binary -o myfile.bqrc myfile.qrc</div></div><!-- fragment --><h3>Adding a New Filter</h3>
<p>For this example, refer to <code>Examples/Plugins/ElevationFilter</code> in the ParaView source. Let's say we have written a new <code>vtkMyElevationFilter</code> (<code>vtkMyElevationFilter.{h,cxx}</code>), which extends the functionality of the <code><a class="elRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkElevationFilter.html">vtkElevationFilter</a></code> and we want to package that as a plugin for ParaView. For starters, we simply want to use this filter in ParaView (e.g., not doing anything fancy with <em>Filters</em> menu categories). As described, we need to write the server manager configuration XML (<code>MyElevationFilter.xml</code>). Once that's done, we write a <code>CMakeLists.txt</code> file to package this into a plugin.</p>
<p>This <code>CMakeLists.txt</code> needs to include the following lines:</p>
<div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.8)</div><div class="line">project(newfilter)</div><div class="line"></div><div class="line">include(GNUInstallDirs)</div><div class="line">set(BUILD_SHARED_LIBS ON)</div><div class="line"></div><div class="line">find_package(ParaView REQUIRED)</div><div class="line"></div><div class="line">paraview_plugin_scan(</div><div class="line">  PLUGIN_FILES &quot;${CMAKE_CURRENT_SOURCE_DIR}/Plugin/paraview.plugin&quot;</div><div class="line">  PROVIDES_PLUGINS plugins</div><div class="line">  ENABLE_BY_DEFAULT ON)</div><div class="line"></div><div class="line">paraview_plugin_build(</div><div class="line">  PLUGINS ${plugins})</div></div><!-- fragment --><p>The referenced <code>paraview.plugin</code> file contains:</p>
<div class="fragment"><div class="line">NAME</div><div class="line">  ElevationFilter</div><div class="line">DESCRIPTION</div><div class="line">  An example paraview plugin containing server manager XML and the server</div><div class="line">  manager classes to build. This plugin can be loaded on the server side.</div><div class="line">REQUIRES_MODULES</div><div class="line">  VTK::CommonCore</div><div class="line">  VTK::FiltersCore</div></div><!-- fragment --><p>And the <code>CMakeLists.txt</code> file beside it contains:</p>
<div class="fragment"><div class="line">paraview_add_plugin(ElevationFilter</div><div class="line">  VERSION &quot;1.0&quot;</div><div class="line">  MODULES ElevationFilters</div><div class="line">  MODULE_FILES &quot;${CMAKE_CURRENT_SOURCE_DIR}/ElevationFilters/vtk.module&quot;)</div></div><!-- fragment --><p>Because we are building our own custom filter, it needs to be a VTK module in order to support having its information available to the XML code. First, the module is declared in a <code>vtk.module</code> file:</p>
<div class="fragment"><div class="line">NAME</div><div class="line">  ElevationFilters</div><div class="line">DEPENDS</div><div class="line">  VTK::FiltersCore</div><div class="line">PRIVATE_DEPENDS</div><div class="line">  VTK::CommonCore</div></div><!-- fragment --><p>And then the module is built with its associated server manager XML file attached to the module.</p>
<div class="fragment"><div class="line">set(classes</div><div class="line">  vtkMyElevationFilter)</div><div class="line"></div><div class="line">vtk_module_add_module(ElevationFilters</div><div class="line">  CLASSES ${classes})</div><div class="line"></div><div class="line">paraview_add_server_manager_xmls(</div><div class="line">  XMLS  MyElevationFilter.xml)</div></div><!-- fragment --><p>Then using CMake, one can build a plugin for this new filter. Once this plugin is loaded the filter will appear under the <em>Alphabetical</em> list in the <em>Filters</em> menu. Note that there will be two libraries in the resulting directory. Be sure to load the <code>ElevationFilter</code> one which is the plugin, not the <code>ElevationFilters</code> module library.</p>
<h3>Filters with Multiple Input Ports</h3>
<p>If a filter requires multiple input ports, there are two options:</p>
<ol type="1">
<li>Create helper functions in the VTK filter such as <code>SetYourInputName</code> which deal with addressing the VTK pipeline in the C++ code; and</li>
<li>Address/access the input connection by number in the XML. The <code>port_index</code> property specifies which input connection the particular input will be connected to. The <code>SetInputConnection</code> function is the command that will actually be called with this <code>port_index</code> to setup the pipeline.</li>
</ol>
<p>An example XML file for a filter with multiple inputs is below. The filter takes three <code><a class="elRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkPolyData.html">vtkPolyData</a></code> objects as input.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">ServerManagerConfiguration</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">ProxyGroup</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;filters&quot;</span>&gt;</div><div class="line">    &lt;<span class="keywordtype">SourceProxy</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;LandmarkTransformFilter&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;vtkLandmarkTransformFilter&quot;</span> <span class="keyword">label</span>=<span class="stringliteral">&quot;LandmarkTransformFilter&quot;</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">Documentation</span></div><div class="line">         <span class="keyword">long_help</span>=<span class="stringliteral">&quot;Align two point sets using vtkLandmarkTransform to compute the best transformation between the two point sets.&quot;</span></div><div class="line">         <span class="keyword">short_help</span>=<span class="stringliteral">&quot;vtkLandmarkTransformFilter.&quot;</span>&gt;</div><div class="line">      &lt;/<span class="keywordtype">Documentation</span>&gt;</div><div class="line"></div><div class="line">      &lt;<span class="keywordtype">InputProperty</span></div><div class="line">          <span class="keyword">name</span>=<span class="stringliteral">&quot;SourceLandmarks&quot;</span></div><div class="line">          <span class="keyword">port_index</span>=<span class="stringliteral">&quot;0&quot;</span></div><div class="line">          <span class="keyword">command</span>=<span class="stringliteral">&quot;SetInputConnection&quot;</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">ProxyGroupDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;groups&quot;</span>&gt;</div><div class="line">          &lt;<span class="keywordtype">Group</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;sources&quot;</span>/&gt;</div><div class="line">          &lt;<span class="keywordtype">Group</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;filters&quot;</span>/&gt;</div><div class="line">        &lt;/<span class="keywordtype">ProxyGroupDomain</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">DataTypeDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;input_type&quot;</span>&gt;</div><div class="line">          &lt;<span class="keywordtype">DataType</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;vtkPolyData&quot;</span>/&gt;</div><div class="line">        &lt;/<span class="keywordtype">DataTypeDomain</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">Documentation</span>&gt;</div><div class="line">          <span class="keyword">Set</span> <span class="keyword">the</span> <span class="keyword">source</span> <span class="keyword">data</span> <span class="keyword">set.</span> <span class="keyword">This</span> <span class="keyword">data</span> <span class="keyword">set</span> <span class="keyword">that</span> <span class="keyword">will</span> <span class="keyword">move</span> <span class="keyword">towards</span> <span class="keyword">the</span> <span class="keyword">target</span> <span class="keyword">data</span> <span class="keyword">set.</span></div><div class="line">        &lt;/<span class="keywordtype">Documentation</span>&gt;</div><div class="line">      &lt;/<span class="keywordtype">InputProperty</span>&gt;</div><div class="line"></div><div class="line">      &lt;<span class="keywordtype">InputProperty</span></div><div class="line">          <span class="keyword">name</span>=<span class="stringliteral">&quot;TargetLandmarks&quot;</span></div><div class="line">          <span class="keyword">port_index</span>=<span class="stringliteral">&quot;1&quot;</span></div><div class="line">          <span class="keyword">command</span>=<span class="stringliteral">&quot;SetInputConnection&quot;</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">ProxyGroupDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;groups&quot;</span>&gt;</div><div class="line">          &lt;<span class="keywordtype">Group</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;sources&quot;</span>/&gt;</div><div class="line">          &lt;<span class="keywordtype">Group</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;filters&quot;</span>/&gt;</div><div class="line">        &lt;/<span class="keywordtype">ProxyGroupDomain</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">DataTypeDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;input_type&quot;</span>&gt;</div><div class="line">          &lt;<span class="keywordtype">DataType</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;vtkPolyData&quot;</span>/&gt;</div><div class="line">        &lt;/<span class="keywordtype">DataTypeDomain</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">Documentation</span>&gt;</div><div class="line">          <span class="keyword">Set</span> <span class="keyword">the</span> <span class="keyword">target</span> <span class="keyword">data</span> <span class="keyword">set.</span> <span class="keyword">This</span> <span class="keyword">data</span> <span class="keyword">set</span> <span class="keyword">will</span> <span class="keyword">stay</span> <span class="keyword">stationary.</span></div><div class="line">        &lt;/<span class="keywordtype">Documentation</span>&gt;</div><div class="line">      &lt;/<span class="keywordtype">InputProperty</span>&gt;</div><div class="line"></div><div class="line">      &lt;<span class="keywordtype">InputProperty</span></div><div class="line">          <span class="keyword">name</span>=<span class="stringliteral">&quot;SourceDataSet&quot;</span></div><div class="line">          <span class="keyword">port_index</span>=<span class="stringliteral">&quot;2&quot;</span></div><div class="line">          <span class="keyword">command</span>=<span class="stringliteral">&quot;SetInputConnection&quot;</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">ProxyGroupDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;groups&quot;</span>&gt;</div><div class="line">          &lt;<span class="keywordtype">Group</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;sources&quot;</span>/&gt;</div><div class="line">          &lt;<span class="keywordtype">Group</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;filters&quot;</span>/&gt;</div><div class="line">        &lt;/<span class="keywordtype">ProxyGroupDomain</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">DataTypeDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;input_type&quot;</span>&gt;</div><div class="line">          &lt;<span class="keywordtype">DataType</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;vtkPolyData&quot;</span>/&gt;</div><div class="line">        &lt;/<span class="keywordtype">DataTypeDomain</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">Documentation</span>&gt;</div><div class="line">          <span class="keyword">Set</span> <span class="keyword">the</span> <span class="keyword">source</span> <span class="keyword">data</span> <span class="keyword">set</span> <span class="keyword">landmark</span> <span class="keyword">points.</span></div><div class="line">        &lt;/<span class="keywordtype">Documentation</span>&gt;</div><div class="line">      &lt;/<span class="keywordtype">InputProperty</span>&gt;</div><div class="line"></div><div class="line">      &lt;<span class="keywordtype">Hints</span>&gt;</div><div class="line">        </div><div class="line">      &lt;/<span class="keywordtype">Hints</span>&gt;</div><div class="line"></div><div class="line">    &lt;/<span class="keywordtype">SourceProxy</span>&gt;</div><div class="line">  &lt;/<span class="keywordtype">ProxyGroup</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">ServerManagerConfiguration</span>&gt;</div></div><!-- fragment --><p>To set the inputs in ParaView, simply select one of the inputs in the <em>Pipeline Browser</em> and then select the filter from the <em>Filters</em> menu. This will open a dialog box which will allow you to specify which object to connect to each input port.</p>
<h3>Adding <em>Categories</em> to the <em>Filters</em> Menu</h3>
<p>Now suppose we want to add a new category to the <em>Filters</em> menu, called <em>Extensions</em> and then show this filter in that menu. In that case we need to add a hint to the XML file that tells ParaView what category to display this filter in. In this case, the <code>Hints</code> element of the XML file can contain:</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">Hints</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">ShowInMenu</span> <span class="keyword">category</span>=<span class="stringliteral">&quot;Extensions&quot;</span> /&gt;</div><div class="line">&lt;/<span class="keywordtype">Hints</span>&gt;</div></div><!-- fragment --><p>If the name of the category is same as an already existing category such as <em>Data Analysis</em>, then the filter gets added to the existing category.</p>
<h3>Adding Icons</h3>
<p>You can see that some filters in the <em>Filters</em> menu (e.g., <em>Clip</em>) have icons associated with them. It's possible for the plugin to add icons for filters it adds as well. For that you need to write a Qt resource file (say <code>MyElevation.qrc</code>) as follows:</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">RCC</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">qresource</span> <span class="keyword">prefix</span>=<span class="stringliteral">&quot;/MyIcons&quot;</span> &gt;</div><div class="line">    &lt;<span class="keywordtype">file</span>&gt;<span class="keyword">MyElevationIcon.png</span>&lt;/<span class="keywordtype">file</span>&gt;</div><div class="line">  &lt;/<span class="keywordtype">qresource</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">RCC</span>&gt;</div></div><!-- fragment --><p>To use the icon for a filter in the pipeline add the following hint to the server manager XML.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">Hints</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">ShowInMenu</span> <span class="keyword">icon</span>=<span class="stringliteral">&quot;:/MyIcons/MyElevationIcon.png&quot;</span> /&gt;</div><div class="line">&lt;/<span class="keywordtype">Hints</span>&gt;</div></div><!-- fragment --><p>Finally, the plugin's <code>CMakeLists.txt</code> file much change to include our <code>MyElevation.qrc</code> file as follows:</p>
<div class="fragment"><div class="line">paraview_add_plugin(ElevationFilter</div><div class="line">  VERSION &quot;1.0&quot;</div><div class="line">  MODULES ElevationFilters</div><div class="line">  MODULE_FILES &quot;${CMAKE_CURRENT_SOURCE_DIR}/ElevationFilters/vtk.module&quot;</div><div class="line">  UI_RESOURCES MyElevation.qrc)</div></div><!-- fragment --><h3>Adding GUI Parameters</h3>
<p>Simply add these in the server manager XML to expose parameters of the filter to the ParaView user.</p>
<h4>Integer Property</h4>
<p>This property appears as a text box.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">IntVectorProperty</span></div><div class="line">    <span class="keyword">name</span>=<span class="stringliteral">&quot;bStartByMatchingCentroids&quot;</span></div><div class="line">    <span class="keyword">command</span>=<span class="stringliteral">&quot;SetbStartByMatchingCentroids&quot;</span></div><div class="line">    <span class="keyword">number_of_elements</span>=<span class="stringliteral">&quot;1&quot;</span></div><div class="line">    <span class="keyword">default_values</span>=<span class="stringliteral">&quot;1&quot;</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">IntVectorProperty</span>&gt;</div></div><!-- fragment --><h4>Boolean Property</h4>
<p>This property appears as a check box control. A boolean property uses the <code>IntVectorProperty</code> with an extra line (<code>BooleanDomain</code>) indicating this should be a check box rather than a text field.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">IntVectorProperty</span></div><div class="line">    <span class="keyword">name</span>=<span class="stringliteral">&quot;bStartByMatchingCentroids&quot;</span></div><div class="line">    <span class="keyword">command</span>=<span class="stringliteral">&quot;SetbStartByMatchingCentroids&quot;</span></div><div class="line">    <span class="keyword">number_of_elements</span>=<span class="stringliteral">&quot;1&quot;</span></div><div class="line">    <span class="keyword">default_values</span>=<span class="stringliteral">&quot;1&quot;</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">BooleanDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;bool&quot;</span>/&gt;</div><div class="line">&lt;/<span class="keywordtype">IntVectorProperty</span>&gt;</div></div><!-- fragment --><h4>String Property</h4>
<p>This property appears as a text box.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">StringVectorProperty</span></div><div class="line">    <span class="keyword">name</span>=<span class="stringliteral">&quot;YourStringVariable&quot;</span></div><div class="line">    <span class="keyword">command</span>=<span class="stringliteral">&quot;SetYourStringVariable&quot;</span></div><div class="line">    <span class="keyword">number_of_elements</span>=<span class="stringliteral">&quot;1&quot;</span></div><div class="line">    <span class="keyword">default_values</span>=<span class="stringliteral">&quot;1&quot;</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">StringVectorProperty</span>&gt;</div></div><!-- fragment --><h4>Double Property</h4>
<p>This property appears as a text box.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">DoubleVectorProperty</span></div><div class="line">    <span class="keyword">name</span>=<span class="stringliteral">&quot;YourDoubleVariable&quot;</span></div><div class="line">    <span class="keyword">command</span>=<span class="stringliteral">&quot;SetYourDoubleVariable&quot;</span></div><div class="line">    <span class="keyword">number_of_elements</span>=<span class="stringliteral">&quot;1&quot;</span></div><div class="line">    <span class="keyword">default_values</span>=<span class="stringliteral">&quot;1&quot;</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">DoubleVectorProperty</span>&gt;</div></div><!-- fragment --><h4>Multi-Value Double Property</h4>
<p>This property appears as a text box.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">DoubleVectorProperty</span></div><div class="line">    <span class="keyword">name</span>=<span class="stringliteral">&quot;YourDoubleVectorVariable&quot;</span></div><div class="line">    <span class="keyword">command</span>=<span class="stringliteral">&quot;SetYourDoubleVectorVariable&quot;</span></div><div class="line">    <span class="keyword">number_of_elements</span>=<span class="stringliteral">&quot;3&quot;</span></div><div class="line">    <span class="keyword">default_values</span>=<span class="stringliteral">&quot;1.0 0.0 0.0&quot;</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">DoubleVectorProperty</span>&gt;</div></div><!-- fragment --><h4>Double Property Slider</h4>
<p>This creates a slider that ranges from <code>0.0</code> to <code>1.0</code>.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">DoubleVectorProperty</span></div><div class="line">    <span class="keyword">name</span>=<span class="stringliteral">&quot;PercentToRemove&quot;</span></div><div class="line">    <span class="keyword">command</span>=<span class="stringliteral">&quot;SetPercentToRemove&quot;</span></div><div class="line">    <span class="keyword">number_of_elements</span>=<span class="stringliteral">&quot;1&quot;</span></div><div class="line">    <span class="keyword">default_values</span>=<span class="stringliteral">&quot;0.1&quot;</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">DoubleRangeDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;range&quot;</span> <span class="keyword">min</span>=<span class="stringliteral">&quot;0.0&quot;</span> <span class="keyword">max</span>=<span class="stringliteral">&quot;1.0&quot;</span> /&gt;</div><div class="line">&lt;/<span class="keywordtype">DoubleVectorProperty</span>&gt;</div></div><!-- fragment --><h4>Drop Down List</h4>
<p>This creates a drop down list with 3 choices. The values associated with the choices may be specified.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">IntVectorProperty</span></div><div class="line">    <span class="keyword">name</span>=<span class="stringliteral">&quot;TransformMode&quot;</span></div><div class="line">    <span class="keyword">command</span>=<span class="stringliteral">&quot;SetTransformMode&quot;</span></div><div class="line">    <span class="keyword">number_of_elements</span>=<span class="stringliteral">&quot;1&quot;</span></div><div class="line">    <span class="keyword">default_values</span>=<span class="stringliteral">&quot;1&quot;</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">EnumerationDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;enum&quot;</span>&gt;</div><div class="line">    &lt;<span class="keywordtype">Entry</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;6&quot;</span> <span class="keyword">text</span>=<span class="stringliteral">&quot;RigidBody&quot;</span>/&gt;</div><div class="line">    &lt;<span class="keywordtype">Entry</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;7&quot;</span> <span class="keyword">text</span>=<span class="stringliteral">&quot;Similarity&quot;</span>/&gt;</div><div class="line">    &lt;<span class="keywordtype">Entry</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;12&quot;</span> <span class="keyword">text</span>=<span class="stringliteral">&quot;Affine&quot;</span>/&gt;</div><div class="line">  &lt;/<span class="keywordtype">EnumerationDomain</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">Documentation</span>&gt;</div><div class="line">    <span class="keyword">This</span> <span class="keyword">property</span> <span class="keyword">indicates</span> <span class="keyword">which</span> <span class="keyword">transform</span> <span class="keyword">mode</span> <span class="keyword">will</span> <span class="keyword">be</span> <span class="keyword">used.</span></div><div class="line">  &lt;/<span class="keywordtype">Documentation</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">IntVectorProperty</span>&gt;</div></div><!-- fragment --><h4>Drop Down List with Values from Input Arrays</h4>
<p>This creates a list that lets you choose among the input arrays of the input of a <code>ProgrammableFilter</code>:</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">StringVectorProperty</span></div><div class="line">    <span class="keyword">name</span>=<span class="stringliteral">&quot;SelectInputScalars&quot;</span></div><div class="line">    <span class="keyword">label</span>=<span class="stringliteral">&quot;Array&quot;</span></div><div class="line">    <span class="keyword">command</span>=<span class="stringliteral">&quot;SetInputArrayToProcess&quot;</span></div><div class="line">    <span class="keyword">number_of_elements</span>=<span class="stringliteral">&quot;5&quot;</span></div><div class="line">    <span class="keyword">element_types</span>=<span class="stringliteral">&quot;0 0 0 0 2&quot;</span></div><div class="line">    <span class="keyword">animateable</span>=<span class="stringliteral">&quot;0&quot;</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">ArrayListDomain</span></div><div class="line">      <span class="keyword">name</span>=<span class="stringliteral">&quot;array_list&quot;</span></div><div class="line">      <span class="keyword">attribute_type</span>=<span class="stringliteral">&quot;Scalars&quot;</span></div><div class="line">      <span class="keyword">input_domain_name</span>=<span class="stringliteral">&quot;inputs_array&quot;</span>&gt;</div><div class="line">    &lt;<span class="keywordtype">RequiredProperties</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">Property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Input&quot;</span> <span class="keyword">function</span>=<span class="stringliteral">&quot;Input&quot;</span> /&gt;</div><div class="line">    &lt;/<span class="keywordtype">RequiredProperties</span>&gt;</div><div class="line">  &lt;/<span class="keywordtype">ArrayListDomain</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">StringVectorProperty</span>&gt;</div></div><!-- fragment --><p>This will look like the following image:</p>
<div class="image">
<img src="images/DropboxWithInputArrays.jpg" alt="Drop down list with values from input arrays"/>
</div>
<h4>Drop Down List with Values from Input File</h4>
<p>If you need to populate a list with values from a file and be able to select/deselect list entries (e.g., to pick which variables are loaded from the file), use a XML similar to this:</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">StringVectorProperty</span> <span class="keyword">information_only</span>=<span class="stringliteral">&quot;1&quot;</span></div><div class="line">                      <span class="keyword">name</span>=<span class="stringliteral">&quot;CellArrayInfo&quot;</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">ArraySelectionInformationHelper</span> <span class="keyword">attribute_name</span>=<span class="stringliteral">&quot;Cell&quot;</span> /&gt;</div><div class="line">&lt;/<span class="keywordtype">StringVectorProperty</span>&gt;</div><div class="line">&lt;<span class="keywordtype">StringVectorProperty</span></div><div class="line">    <span class="keyword">command</span>=<span class="stringliteral">&quot;SetCellArrayStatus&quot;</span></div><div class="line">    <span class="keyword">element_types</span>=<span class="stringliteral">&quot;2 0&quot;</span></div><div class="line">    <span class="keyword">information_property</span>=<span class="stringliteral">&quot;CellArrayInfo&quot;</span></div><div class="line">    <span class="keyword">label</span>=<span class="stringliteral">&quot;Cell Arrays&quot;</span></div><div class="line">    <span class="keyword">name</span>=<span class="stringliteral">&quot;CellArrayStatus&quot;</span></div><div class="line">    <span class="keyword">number_of_elements</span>=<span class="stringliteral">&quot;0&quot;</span></div><div class="line">    <span class="keyword">number_of_elements_per_command</span>=<span class="stringliteral">&quot;2&quot;</span></div><div class="line">    <span class="keyword">repeat_command</span>=<span class="stringliteral">&quot;1&quot;</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">ArraySelectionDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;array_list&quot;</span>&gt;</div><div class="line">    &lt;<span class="keywordtype">RequiredProperties</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">Property</span> <span class="keyword">function</span>=<span class="stringliteral">&quot;ArrayList&quot;</span></div><div class="line">                <span class="keyword">name</span>=<span class="stringliteral">&quot;CellArrayInfo&quot;</span> /&gt;</div><div class="line">    &lt;/<span class="keywordtype">RequiredProperties</span>&gt;</div><div class="line">  &lt;/<span class="keywordtype">ArraySelectionDomain</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">Documentation</span>&gt;</div><div class="line">    <span class="keyword">This</span> <span class="keyword">property</span> <span class="keyword">lists</span> <span class="keyword">which</span> <span class="keyword">cell-centered</span> <span class="keyword">arrays</span> <span class="keyword">to</span> <span class="keyword">read.</span></div><div class="line">  &lt;/<span class="keywordtype">Documentation</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">StringVectorProperty</span>&gt;</div></div><!-- fragment --><p>You can see an example in use in ParaView's <a href="https://gitlab.kitware.com/paraview/paraview/blob/87babdbeab6abe20aac6f8b2692788abc6bb20ac/ParaViewCore/ServerManager/SMApplication/Resources/readers.xml#L158-179">core readers</a> XML.</p>
<p>You may also do it in the following manner:</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">StringVectorProperty</span></div><div class="line">    <span class="keyword">command</span>=<span class="stringliteral">&quot;SetCellArrayStatus&quot;</span></div><div class="line">    <span class="keyword">element_types</span>=<span class="stringliteral">&quot;2 0&quot;</span></div><div class="line">    <span class="keyword">information_property</span>=<span class="stringliteral">&quot;CellArrayInfo&quot;</span></div><div class="line">    <span class="keyword">label</span>=<span class="stringliteral">&quot;Cell Arrays&quot;</span></div><div class="line">    <span class="keyword">name</span>=<span class="stringliteral">&quot;CellArrayStatus&quot;</span></div><div class="line">    <span class="keyword">number_of_elements</span>=<span class="stringliteral">&quot;0&quot;</span></div><div class="line">    <span class="keyword">number_of_elements_per_command</span>=<span class="stringliteral">&quot;2&quot;</span></div><div class="line">    <span class="keyword">repeat_command</span>=<span class="stringliteral">&quot;1&quot;</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">ArrayListDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;array_list&quot;</span></div><div class="line">                   <span class="keyword">attribute_type</span>=<span class="stringliteral">&quot;Scalars&quot;</span></div><div class="line">                   <span class="keyword">input_domain_name</span>=<span class="stringliteral">&quot;inputs_array&quot;</span>&gt;</div><div class="line">    &lt;<span class="keywordtype">RequiredProperties</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">Property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Input&quot;</span> <span class="keyword">function</span>=<span class="stringliteral">&quot;Input&quot;</span> /&gt;</div><div class="line">    &lt;/<span class="keywordtype">RequiredProperties</span>&gt;</div><div class="line">  &lt;/<span class="keywordtype">ArrayListDomain</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">StringVectorProperty</span>&gt;</div></div><!-- fragment --><p>In which case the result will look like this:</p>
<div class="image">
<img src="images/DropdownListFromFile.jpg" alt="Drop down list with values from input file"/>
</div>
<h4>Adding a Reader</h4>
<p>Adding a new reader through a plugin is similar to adding a filter. The only difference is that we do not need to specify what category the reader should be added to in the GUI. For the latest version of ParaView we do not need to specify anything special for the GUI as all of the details of the reader are available in the XML proxy definition of the reader. For ParaView version 4.0.1 and earlier we need the XML to define what file extensions this reader can handle. This XML (<code>MyReaderGUI.xml</code>) looks like this:</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">ParaViewReaders</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">Reader</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MyPNGReader&quot;</span> <span class="keyword">extensions</span>=<span class="stringliteral">&quot;png&quot;</span></div><div class="line">          <span class="keyword">file_description</span>=<span class="stringliteral">&quot;My PNG Files&quot;</span>&gt;</div><div class="line">  &lt;/<span class="keywordtype">Reader</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">ParaViewReaders</span>&gt;</div></div><!-- fragment --><p>An example <code>MyPNGReader.xml</code> is shown below. In almost all cases you must have a <code>SetFileName</code> function property. You are free to have other properties as well, as with a standard (non-reader) filter. Also, the <code>Hints</code> section is needed in order to associate the file extension with the reader on the client. The <code>ReaderFactory</code> hint is what the client uses to identify readers from sources.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">ServerManagerConfiguration</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">ProxyGroup</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;sources&quot;</span>&gt;</div><div class="line">    &lt;<span class="keywordtype">SourceProxy</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MyPNGReader&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;vtkMyPNGReader&quot;</span> <span class="keyword">label</span>=<span class="stringliteral">&quot;PNGReader&quot;</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">Documentation</span></div><div class="line">         <span class="keyword">long_help</span>=<span class="stringliteral">&quot;Read a PNG file.&quot;</span></div><div class="line">         <span class="keyword">short_help</span>=<span class="stringliteral">&quot;Read a PNG file.&quot;</span>&gt;</div><div class="line">      &lt;/<span class="keywordtype">Documentation</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">StringVectorProperty</span></div><div class="line">            <span class="keyword">name</span>=<span class="stringliteral">&quot;FileName&quot;</span></div><div class="line">            <span class="keyword">animateable</span>=<span class="stringliteral">&quot;0&quot;</span></div><div class="line">            <span class="keyword">command</span>=<span class="stringliteral">&quot;SetFileName&quot;</span></div><div class="line">            <span class="keyword">number_of_elements</span>=<span class="stringliteral">&quot;1&quot;</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">FileListDomain</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;files&quot;</span>/&gt;</div><div class="line">        &lt;<span class="keywordtype">Documentation</span>&gt;</div><div class="line">          <span class="keyword">This</span> <span class="keyword">property</span> <span class="keyword">specifies</span> <span class="keyword">the</span> <span class="keyword">file</span> <span class="keyword">name</span> <span class="keyword">for</span> <span class="keyword">the</span> <span class="keyword">PNG</span> <span class="keyword">reader.</span></div><div class="line">        &lt;/<span class="keywordtype">Documentation</span>&gt;</div><div class="line">      &lt;/<span class="keywordtype">StringVectorProperty</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">Hints</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">ReaderFactory</span> <span class="keyword">extensions</span>=<span class="stringliteral">&quot;png&quot;</span></div><div class="line">                       <span class="keyword">file_description</span>=<span class="stringliteral">&quot;PNG File Format&quot;</span> /&gt;</div><div class="line">      &lt;/<span class="keywordtype">Hints</span>&gt;</div><div class="line">    &lt;/<span class="keywordtype">SourceProxy</span>&gt;</div><div class="line">  &lt;/<span class="keywordtype">ProxyGroup</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">ServerManagerConfiguration</span>&gt;</div></div><!-- fragment --><p>The CMake code for a reader plugin uses the same structure as the filter example. The only likely difference is that the plugin should also pass <code>REQUIRED_ON_SERVER</code> to <code>paraview_add_plugin</code> since the server side needs the reader available for its use.</p>
<p>If you want your reader to work correctly with a file series, please refer to [[Animating legacy VTK file series::Making custom readers work with file series|file series animation]] for details.</p>
<p>Once you generate the project using CMake and compile the project, in ParaView go to <em>Tools &gt; Manage Plugins/Extensions</em>. Under <em>Local Plugins</em>, click <em>Load New</em> and browse for the shared library file you just created. You should now see your new file type in the <em>Files of type</em> list in the <em>Open file</em> dialog.</p>
<h4>Adding a Writer</h4>
<p>Similar to a reader plugin, for a writer plugin we need to tell ParaView what extensions this writer supports. For the current version of ParaView this is done in the <code>Hints</code> section of the server manager XML definition as follows:</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">Hints</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">WriterFactory</span> <span class="keyword">extensions</span>=<span class="stringliteral">&quot;tif&quot;</span></div><div class="line">                 <span class="keyword">file_description</span>=<span class="stringliteral">&quot;My Tiff Files&quot;</span> /&gt;</div><div class="line">&lt;/<span class="keywordtype">Hints</span>&gt;</div></div><!-- fragment --><h4>Adding Customizations for Properties Panel</h4>
<p>[[ParaView/Properties Panel|Properties Panel]] is the primary panel in ParaView used to change the parameters for visualization modules and displays. Plugins can provide new types of <a href="https://kitware.github.io/paraview-docs/nightly/cxx/classpqPropertyWidget.html"><code>pqPropertyWidget</code></a> subclasses that can be used to control properties/property groups on this Properties panel.</p>
<p>To register a new <code><a class="el" href="classpqPropertyWidget.html" title="pqPropertyWidget represents a widget created for each property of a proxy on the pqPropertiesPanel (f...">pqPropertyWidget</a></code> subclass to be associated with a particular widget type for a property (<code><a class="el" href="classvtkSMProperty.html" title="superclass for all SM properties ">vtkSMProperty</a></code>), use the following CMake code in your plugin:</p>
<div class="fragment"><div class="line">paraview_plugin_add_property_widget</div><div class="line">  KIND kind</div><div class="line">  TYPE my_property_widget_type</div><div class="line">  CLASS_NAME ClassName</div><div class="line">  INTERFACES interfaces</div><div class="line">  SOURCES sources)</div><div class="line"></div><div class="line">paraview_add_plugin(propwidget</div><div class="line">  VERSION &quot;1.0&quot;</div><div class="line">  UI_INTERFACES ${interfaces}</div><div class="line">  SOURCES ${sources})</div></div><!-- fragment --><p>The <code>KIND</code> argument must be one of <code>WIDGET</code>, <code>GROUP_WIDGET</code>, or <code>WIDGET_DECORATOR</code>. For a <code><a class="el" href="classvtkSMProperty.html" title="superclass for all SM properties ">vtkSMProperty</a></code>, <code>WIDGET</code> is required.</p>
<p>The <code>CLASS_NAME</code> argument must refer to a <code><a class="el" href="classpqPropertyWidget.html" title="pqPropertyWidget represents a widget created for each property of a proxy on the pqPropertiesPanel (f...">pqPropertyWidget</a></code> subclass with a constructor with the following signature:</p>
<div class="fragment"><div class="line">ClassName(<a class="code" href="classvtkSMProxy.html">vtkSMProxy</a> *smproxy, <a class="code" href="classvtkSMProperty.html">vtkSMProperty</a> *smproperty, QWidget *parentObject)</div></div><!-- fragment --><p>The <code>TYPE</code> argument specifies the string that will be used in the server manager XML as the value for the <code>panel_widget</code> attribute to request creation of this widget for a <code><a class="el" href="classvtkSMProperty.html" title="superclass for all SM properties ">vtkSMProperty</a></code> subclass.</p>
<p>To register a new <code><a class="el" href="classpqPropertyWidget.html" title="pqPropertyWidget represents a widget created for each property of a proxy on the pqPropertiesPanel (f...">pqPropertyWidget</a></code> subclass to be associated with a particular widget type for a property group (<code><a class="el" href="classvtkSMPropertyGroup.html">vtkSMPropertyGroup</a></code>), use <code>GROUP_WIDGET</code> for the <code>KIND</code> argument. The referenced <code>CLASS_NAME</code> must subclass <code><a class="el" href="classpqPropertyWidget.html" title="pqPropertyWidget represents a widget created for each property of a proxy on the pqPropertiesPanel (f...">pqPropertyWidget</a></code> and have a constructor with the signature:</p>
<div class="fragment"><div class="line">ClassName(<a class="code" href="classvtkSMProxy.html">vtkSMProxy</a> *smproxy, <a class="code" href="classvtkSMPropertyGroup.html">vtkSMPropertyGroup</a> *smgroup, QWidget *parentObject);</div></div><!-- fragment --><p>As before, the <code>TYPE</code> specifies the string that will be used in the server manager XML as the value for the <code>panel_widget</code> attribute on a <code>PropertyGroup</code> element to request creation of this widget for that group.</p>
<p>Another mechanism for adding customizations for <em>Properties</em> panel is to provide <a href="https://kitware.github.io/paraview-docs/nightly/cxx/classpqPropertyWidgetDecorator.html"><code>pqPropertyWidgetDecorator</code></a> subclasses to add custom control logic for widgets on the panel.</p>
<p>Decorators use the <code>WIDGET_DECORATOR</code> argument to <code>KIND</code>.</p>
<p>The <code>CLASS_NAME</code> must point to a <code><a class="el" href="classpqPropertyWidgetDecorator.html" title="pqPropertyWidgetDecorator provides a mechanism to decorate pqPropertyWidget instances to add logic to...">pqPropertyWidgetDecorator</a></code> subclass and the <code>TYPE</code> is the string name used to request the creation of the decorator in the server manager XML as described [[ParaView/Properties Panel|here]].</p>
<p>An example for customizing the Properties panel can be found in the ParaView source under <code>Examples/Plugins/PropertyWidgets</code>.</p>
<h4>Adding Documentation for Plugins</h4>
<p>Developers can provide documentation for plugins that is shown in ParaView's <em>Help</em> window. There are two mechanisms for adding documentation from plugins.</p>
<ul>
<li>Any server manager XML files added directly to the <code>paraview_add_plugin</code> function or those attached to modules passed to its <code>MODULES</code> argument using <code>paraview_add_server_manager_xmls</code> are automatically parsed to process <code>Documentation</code> elements. HTML pages summarizing the proxy and properties are automatically generated. This ensures that when the user clicks "?" for a filter or source added via the plugin, the help window shows appropriate help pages.</li>
<li>Using the <code>DOCUMENTATION_DIR</code> argument to <code>paraview_add_plugin</code> to specify a directory containing HTML pages and images that gets added a the documentation for the plugin (in addition to the documentation generated using the <code>SERVER_MANAGER_XML</code> files. For example:</li>
</ul>
<div class="fragment"><div class="line">paraview_add_plugin(SurfaceLIC</div><div class="line">  VERSION &quot;1.0&quot;</div><div class="line">  DOCUMENTATION_DIR &quot;${CMAKE_CURRENT_SOURCE_DIR}/doc&quot;)</div></div><!-- fragment --><p>This results in adding documentation to the <em>ParaView Online Help</em> when the plugin is loaded, as shown below.</p>
<div class="image">
<img src="images/Paraview_doc_plugin.png"/>
</div>
<h4>Adding a Toolbar</h4>
<p>Filters, reader, and writers are by far the most common ways for extending ParaView. However, ParaView plugin functionality goes far beyond that. The following sections cover some of these advanced plugins that can be written.</p>
<p>Applications use toolbars to provide easy access to commonly used functionality. It is possible to have plugins that add new toolbars to ParaView. The plugin developer implements his own C++ code to handle the callback for each button on the toolbar. Hence one can do virtually any operation using the toolbar plugin with some understanding of the ParaView Server Manager framework and the ParaView GUI components.</p>
<p>Please refer to <code>Examples/Plugins/SourceToolbar</code> for this section. There we are adding a toolbar with two buttons to create a sphere and a cylinder source. For adding a toolbar, one needs to implement a subclass for <a href="https://doc.qt.io/qt-5/qactiongroup.html"><code>QActionGroup</code></a> which adds the <a href="https://doc.qt.io/qt-5/qaction.html"><code>QAction</code></a>s for each of the toolbar button and then implements the handler for the callback when the user clicks any of the buttons. In the example <code>SourceToobarActions.{h,cxx}</code> is the <code>QActionGroup</code> subclass that adds the two tool buttons.</p>
<p>To build the plugin, the <code>CMakeLists.txt</code> file is:</p>
<div class="fragment"><div class="line"># This is a macro for adding QActionGroup subclasses automatically as toolbars.</div><div class="line">paraview_plugin_add_action_group(</div><div class="line">  CLASS_NAME SourceToolbarActions</div><div class="line">  GROUP_NAME &quot;ToolBar/SourceToolbar&quot;</div><div class="line">  INTERFACES interfaces</div><div class="line">  SOURCES sources)</div><div class="line"></div><div class="line"># Now create a plugin for the toolbar. Here we pass the `interfaces` and</div><div class="line"># `sources` returned by the above call.</div><div class="line">paraview_add_plugin(SourceToolbar</div><div class="line">  VERSION &quot;1.0&quot;</div><div class="line">  UI_INTERFACES ${interfaces}</div><div class="line">  SOURCES ${sources}</div><div class="line">          SourceToolbarActions.cxx)</div></div><!-- fragment --><p>For the <code>GROUP_NAME</code>, we are using <code>ToolBar/SourceToolbar</code>; here <code>ToolBar</code> is a keyword which implies that the action group is a toolbar (and shows up under <em>View &gt; Toolbars</em> menu) with the name <code>SourceToolbar</code>. When the plugin is loaded, this toolbar will show up with two buttons.</p>
<h4>Adding a Menu</h4>
<p>Adding a menu to the menu bar of the main window is almost identical to adding a toolbar. The only difference is that you use the keyword <code>MenuBar</code> in lieu of <code>ToolBar</code> in the <code>GROUP_NAME</code> of the action group. So if you change the <code>paraview_plugin_add_action_group</code> command above to the following, the plugin will add a menu titled <code>MyActions</code> to the menu bar.</p>
<div class="fragment"><div class="line">paraview_plugin_add_action_group(</div><div class="line">  CLASS_NAME SourceToolbarActions</div><div class="line">  GROUP_NAME &quot;MenuBar/MyActions&quot;</div><div class="line">  INTERFACES interfaces</div><div class="line">  SOURCES sources)</div></div><!-- fragment --><p>If you give the name of an existing menu, then the commands will be added to that menu rather than create a new one. So, for example, if the <code>GROUP_NAME</code> is <code>MenuBar/File</code>, the commands will be added to the bottom of the <em>File</em> menu.</p>
<h4>Autostart Plugins</h4>
<p>This refers to a plugin which needs to be notified when ParaView starts up or the plugin is loaded which ever happens later and then notified when ParaView quits. Example is in <code>Examples/Plugins/Autostart</code> in the ParaView source. For such a plugin, we need to provide a <code>QObject</code> subclass (<code>pqMyApplicationStarter</code>) with methods that need to be called on startup and shutdown.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>pqMyApplicationStarter : <span class="keyword">public</span> QObject</div><div class="line">{</div><div class="line">Q_OBJECT</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="comment">// Callback for startup.</span></div><div class="line">  <span class="comment">// This cannot take any arguments</span></div><div class="line">  <span class="keywordtype">void</span> onStartup();</div><div class="line"></div><div class="line">  <span class="comment">// Callback for shutdown.</span></div><div class="line">  <span class="comment">// This cannot take any arguments</span></div><div class="line">  <span class="keywordtype">void</span> onShutdown();</div><div class="line">};</div></div><!-- fragment --><p>The <code>CMakeLists.txt</code> looks as follows:</p>
<div class="fragment"><div class="line"># Macro for auto-start plugins. We specify the class name and the methods to</div><div class="line"># call on startup and shutdown on an instance of that class. It returns the</div><div class="line"># interface and sources created in the variables passed to the `INTERFACES` and</div><div class="line"># `SOURCES` arguments, respectively.</div><div class="line">paraview_plugin_add_auto_start(</div><div class="line">  CLASS_NAME pqMyApplicationStarter # the class name for our class</div><div class="line">  STARTUP onStartup   # specify the method to call on startup</div><div class="line">  SHUTDOWN onShutdown # specify the method to call on shutdown</div><div class="line">  INTERFACES interfaces</div><div class="line">  SOURCES sources)</div><div class="line"></div><div class="line"># Create a plugin for this starter</div><div class="line">paraview_add_plugin(Autostart</div><div class="line">  VERSION &quot;1.0&quot;</div><div class="line">  UI_INTERFACES ${interfaces}</div><div class="line">  SOURCES pqMyApplicationStarter.cxx ${interfaces})</div></div><!-- fragment --><h4>Adding new Representations for 3D View using Plugins</h4>
<p>ParaView's 3D view the most commonly used view for showing polygonal or volumetric data. By default, ParaView provides representation-types for showing the dataset as surface, wireframe, points etc. Its possible to add representations using plugins that extends this set of available representation types.</p>
<p>Before we start looking at how to write such a plugin, we need to gain some understanding of the 3D view and its representations. The 3D view uses 3 basic representation proxies for rendering all types of data:</p>
<ul>
<li>(representations, <code>UnstructuredGridRepresentation</code>)  for <code><a class="elRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkUnstructuredGrid.html">vtkUnstructuredGrid</a></code> or a composite dataset consisting of <code><a class="elRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkUnstructuredGrid.html">vtkUnstructuredGrid</a></code>.</li>
<li>(representations, <code>UniformGridRepresentation</code>)  for <code><a class="elRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkImageData.html">vtkImageData</a></code> or a composite dataset consisting of <code><a class="elRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkImageData.html">vtkImageData</a></code></li>
<li>(representations, <code>GeometryRepresentation</code>)  for all other data types.</li>
</ul>
<p>Each of these representation proxies are basically composite representation proxies that use other representation proxies to do the actual rendering, e.g., <code>GeometryRepresentation</code> uses <code>SurfaceRepresentation</code> for rendering the data as wireframe, points, surface, and surface-with-edges and <code>OutlineRepresentation</code> for rendering an outline for the data. Subsequently, the 3 composite representation proxies provide a property named <code>Representation</code> which allows the user to pick the representation type he wants to see the data as. The composite representation proxy has logic to enable one of its internal representations based on the type chosen by the user.</p>
<p>These 3 composite representation types are fixed and cannot be changed by plugins. What plugins can do is add more internal representations to any of these 3 composite representations to support new representations types that the user can choose using the representation type combo box on the display tab or in the toolbar.</p>
<div class="image">
<img src="images/Representationplugin.png" alt="Representation type combo-box allowing user to choose the sub-representation to use"/>
</div>
<h5>Using a New Mapper</h5>
<p>In this example, we see how to integrate a special polydata mapper written in VTK into ParaView. Lets say the mapper is called <code>vtkMySpecialPolyDataMapper</code> which is simply a subclass of <code><a class="elRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkPainterPolyDataMapper.html">vtkPainterPolyDataMapper</a></code>. In practice, <code>vtkMySpecialPolyDataMapper</code> can internally use different painters to do perform special rendering tasks.</p>
<p>To integrate this mapper into ParaView, first we need to create a <code><a class="el" href="classvtkSMRepresentationProxy.html" title="Proxy for a representations. ">vtkSMRepresentationProxy</a></code> subclass for that uses this mapper. In this example, since the mapper is a simple replacement for the standard <code><a class="elRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkPainterPolyDataMapper.html">vtkPainterPolyDataMapper</a></code>, we can define our representation proxy as a specialization of the <code>SurfaceRepresentation</code> as follows:</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">ServerManagerConfiguration</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">ProxyGroup</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;representations&quot;</span>&gt;</div><div class="line">    &lt;<span class="keywordtype">RepresentationProxy</span></div><div class="line">        <span class="keyword">name</span>=<span class="stringliteral">&quot;MySpecialRepresentation&quot;</span></div><div class="line">        <span class="keyword">class</span>=<span class="stringliteral">&quot;vtkMySpecialRepresentation&quot;</span></div><div class="line">        <span class="keyword">processes</span>=<span class="stringliteral">&quot;client|renderserver|dataserver&quot;</span></div><div class="line">        <span class="keyword">base_proxygroup</span>=<span class="stringliteral">&quot;representations&quot;</span></div><div class="line">        <span class="keyword">base_proxyname</span>=<span class="stringliteral">&quot;SurfaceRepresentation&quot;</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">Documentation</span>&gt;</div><div class="line">        <span class="keyword">This</span> <span class="keyword">is</span> <span class="keyword">the</span> <span class="keyword">new</span> <span class="keyword">representation</span> <span class="keyword">type</span> <span class="keyword">we</span> <span class="keyword">are</span> <span class="keyword">adding.</span> <span class="keyword">This</span> <span class="keyword">is</span> <span class="keyword">identical</span> <span class="keyword">to</span></div><div class="line">        <span class="keyword">the</span> <span class="keyword">SurfaceRepresentation</span> <span class="keyword">except</span> <span class="keyword">that</span> <span class="keyword">we</span> <span class="keyword">are</span> <span class="keyword">overriding</span> <span class="keyword">the</span> <span class="keyword">mapper</span> <span class="keyword">with</span></div><div class="line">        <span class="keyword">our</span> <span class="keyword">mapper.</span></div><div class="line">      &lt;/<span class="keywordtype">Documentation</span>&gt;</div><div class="line">    &lt;/<span class="keywordtype">RepresentationProxy</span>&gt;</div><div class="line">  &lt;/<span class="keywordtype">ProxyGroup</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">ServerManagerConfiguration</span>&gt;</div></div><!-- fragment --><p><code>vtkMySpecialRepresentation</code> is a subclass of <code><a class="el" href="classvtkGeometryRepresentationWithFaces.html" title="vtkGeometryRepresentationWithFaces extends vtkGeometryRepresentation to add support for rendering bac...">vtkGeometryRepresentationWithFaces</a></code> where in the constructor we simply override the mappers as follows:</p>
<div class="fragment"><div class="line">vtkMySpecialRepresentation::vtkMySpecialRepresentation()</div><div class="line">{</div><div class="line">  <span class="comment">// Replace the mappers created by the superclass.</span></div><div class="line">  this-&gt;Mapper-&gt;Delete();</div><div class="line">  this-&gt;LODMapper-&gt;Delete();</div><div class="line"></div><div class="line">  this-&gt;Mapper = vtkMySpecialPolyDataMapper::New();</div><div class="line">  this-&gt;LODMapper = vtkMySpecialPolyDataMapper::New();</div><div class="line"></div><div class="line">  <span class="comment">// Since we replaced the mappers, we need to call SetupDefaults() to ensure</span></div><div class="line">  <span class="comment">// the pipelines are setup correctly.</span></div><div class="line">  this-&gt;SetupDefaults();</div><div class="line">}</div></div><!-- fragment --><p>Next we need to register this new type with the any (or all) of the 3 standard composite representations so that it will become available to the user to choose in the representation type combo box. To decide which of the 3 composite representations we want to add our representation to, think of the input data types our representation supports. If it can support any type of data set, then we can add our representation all the 3 representations (as is the case with this example). However if we are adding a representation for volume rendering of <code><a class="elRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkUnstructuredGrid.html">vtkUnstructuredGrid</a></code> then we will add it only to the <code>UnstructuredGridRepresentation</code>. This is done by using the <code>Extension</code> XML tag. It simply means that we are extending the original XML for the proxy definition with the specified additions. Now to make this representation available as a type to the user, we use the <code>RepresentationType</code> element , with <code>text</code> used as the text shown for the type in the combo-box, <code>subproxy</code> specifies the name of representation subproxy to activate when the user chooses the specified type. Optionally one can also specify the <code>subtype</code> attribute, which if present is the value set on a property named <code>Representation</code> for the subproxy when the type is chosen. This allows for the subproxy to provide more than one representation type.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">ServerManagerConfiguration</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">ProxyGroup</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;representations&quot;</span>&gt;</div><div class="line">    &lt;<span class="keywordtype">Extension</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;GeometryRepresentation&quot;</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">Documentation</span>&gt;</div><div class="line">        <span class="keyword">Extends</span> <span class="keyword">standard</span> <span class="keyword">GeometryRepresentation</span> <span class="keyword">by</span> <span class="keyword">adding</span></div><div class="line">        <span class="keyword">MySpecialRepresentation</span> <span class="keyword">as</span> <span class="keyword">a</span> <span class="keyword">new</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">representation.</span></div><div class="line">      &lt;/<span class="keywordtype">Documentation</span>&gt;</div><div class="line"></div><div class="line">      </div><div class="line">      &lt;<span class="keywordtype">RepresentationType</span></div><div class="line">          <span class="keyword">subproxy</span>=<span class="stringliteral">&quot;MySpecialRepresentation&quot;</span></div><div class="line">          <span class="keyword">text</span>=<span class="stringliteral">&quot;Special Mapper&quot;</span></div><div class="line">          <span class="keyword">subtype</span>=<span class="stringliteral">&quot;1&quot;</span> /&gt;</div><div class="line"></div><div class="line">      &lt;<span class="keywordtype">SubProxy</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">Proxy</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MySpecialRepresentation&quot;</span></div><div class="line">               <span class="keyword">proxygroup</span>=<span class="stringliteral">&quot;representations&quot;</span></div><div class="line">               <span class="keyword">proxyname</span>=<span class="stringliteral">&quot;MySpecialRepresentation&quot;</span>&gt;</div><div class="line">        &lt;/<span class="keywordtype">Proxy</span>&gt;</div><div class="line">        &lt;<span class="keywordtype">ShareProperties</span> <span class="keyword">subproxy</span>=<span class="stringliteral">&quot;SurfaceRepresentation&quot;</span>&gt;</div><div class="line">          &lt;<span class="keywordtype">Exception</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Input&quot;</span> /&gt;</div><div class="line">          &lt;<span class="keywordtype">Exception</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Visibility&quot;</span> /&gt;</div><div class="line">          &lt;<span class="keywordtype">Exception</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Representation&quot;</span> /&gt;</div><div class="line">        &lt;/<span class="keywordtype">ShareProperties</span>&gt;</div><div class="line">      &lt;/<span class="keywordtype">SubProxy</span>&gt;</div><div class="line">    &lt;/<span class="keywordtype">Extension</span>&gt;</div><div class="line">  &lt;/<span class="keywordtype">ProxyGroup</span>&gt;</div><div class="line">&lt;/<span class="keywordtype">ServerManagerConfiguration</span>&gt;</div></div><!-- fragment --><p>The <code>CMakeLists.txt</code> file is not much different from what it would be like for adding a simple filter or a reader where the representation class is placed into the contained module.</p>
<p>Source code for this example is available under <code>Examples/Plugins/Representation</code> in the ParaView source directory.</p>
<h2>Examples</h2>
<p>The ParaView git repository contains many examples in the <code>Examples/Plugins</code> directory.</p>
<h2>Adding plugins to ParaView source</h2>
<p>There are several plugins that are included in ParaView source itself and are built as part of ParaView's build process. To add such a plugin to the ParaView build there are two options, adding it to the <code>ParaView/Plugins</code> directory is currently the only supported mechanism.</p>
<p>In general users should simply build their plugins separately, outside the ParaView source. However, when building ParaView statically, adding the plugin to be built as part of ParaView ensures that the static executables load the plugin, otherwise there is no mechanism for loading a plugin in statically built executables.</p>
<p>In your plugin source directory, ParaView searches for a file name <code>paraview.plugin</code> which provides ParaView with information about the plugin. This file should contain the following contents:</p>
<div class="fragment"><div class="line"># Comments are allowed.</div><div class="line">NAME</div><div class="line">  PluginName</div><div class="line">DESCRIPTION</div><div class="line">  A description of the plugin. This text is attached to the CMake option to</div><div class="line">  build this plugin.</div><div class="line">REQUIRES_MODULES</div><div class="line">  # List of VTK modules required by the code contained in the plugin. This</div><div class="line">  # allows ParaView to build the full set of requested modules if the plugin is</div><div class="line">  # being built.</div><div class="line">  VTK::CommonCore</div></div><!-- fragment --><p>If now the plugin is enabled (by the user or by default) by turning ON the <code>PARAVIEW_PLUGIN_ENABLE_PluginName</code> CMake option, then CMake will look for a <code>CMakeLists.txt</code> file next to the <code>paraview.plugin</code>. This file contains the calls to build the plugin including the <code>paraview_add_plugin</code> call, and building of any other libraries that the plugin needs.</p>
<p>A good place to start would be look at examples under <code>ParaView/Plugins</code> directory.</p>
<h2>Plugins in Static Applications</h2>
<p>It is possible to import plugins into a ParaView-based application at compile time. When building ParaView-based applications statically, this is the only option to bring in components from plugins. When built statically (i.e., with <code>BUILD_SHARED_LIBS</code> set to false), ParaView will automatically link and load plugins that were enabled via CMake by inserting the necessary <code>PV_PLUGIN_IMPORT_INIT</code> and <code>PV_PLUGIN_IMPORT</code> macros.</p>
<p>The code below shows how the <code>PV_PLUGIN</code> macros would be used to statically load plugins in custom applications:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="vtkPVPlugin_8h.html">vtkPVPlugin.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="comment">// Adds required forward declarations.</span></div><div class="line"><a class="code" href="vtkPVPlugin_8h.html#a1087aa7c2a3712dfacb77927b51c9578">PV_PLUGIN_IMPORT_INIT</a>(MyFilterPlugin)</div><div class="line"><a class="code" href="vtkPVPlugin_8h.html#a1087aa7c2a3712dfacb77927b51c9578">PV_PLUGIN_IMPORT_INIT</a>(MyReaderPlugin)</div><div class="line"></div><div class="line"><span class="keyword">class </span>MyMainWindow : <span class="keyword">public</span> QMainWindow</div><div class="line">{</div><div class="line">  <span class="comment">// ....</span></div><div class="line">};</div><div class="line"></div><div class="line">MyMainWindow::MyMainWindow(...)</div><div class="line">{</div><div class="line">  <span class="comment">// ... after initialization ...</span></div><div class="line"></div><div class="line">  <span class="comment">// Calls relevant callbacks to load the plugins and update the</span></div><div class="line">  <span class="comment">// GUI/Server-Manager</span></div><div class="line">  <a class="code" href="vtkPVPlugin_8h.html#a3005344ae5073a225a658ff339fea705">PV_PLUGIN_IMPORT</a>(MyFilterPlugin);</div><div class="line">  <a class="code" href="vtkPVPlugin_8h.html#a3005344ae5073a225a658ff339fea705">PV_PLUGIN_IMPORT</a>(MyReaderPlugin);</div><div class="line">}</div></div><!-- fragment --><h2>Pitfalls</h2>
<h3>*Tools &gt; Manage Plugins* is not visible!</h3>
<p>Plugins can only be loaded dynamically when ParaView is built with shared libraries. You must recompile ParaView with <code>BUILD_SHARED_LIBS=ON</code>.</p>
<h3>Compile error &lsquo;invalid conversion from 'vtkYourFiltersSuperClass*&rsquo; to 'vtkYourFilter*'`</h3>
<p>Any VTK object that needs to be treated as a filter or source has to be a <code><a class="elRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkAlgorithm.html">vtkAlgorithm</a></code> subclass. The particular superclass a filter is derived from has to be given not only in the standard C++ way:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>VTKMODULE_EXPORT vtkMyElevationFilter : <span class="keyword">public</span> <a class="codeRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkElevationFilter.html">vtkElevationFilter</a></div></div><!-- fragment --><p>but additionally declared with help of the <code>vtkTypeMacro</code>. For the example given above:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>VTKMODULE_EXPORT vtkMyElevationFilter : <span class="keyword">public</span> <a class="codeRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkElevationFilter.html">vtkElevationFilter</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  vtkTypeMacro(vtkMyElevationFilter, <a class="codeRef" doxygen="/home/kitware/dashboards/buildbot/paraview_master-vall-linux-shared-debug_doc_extdeps_gui_mpi_python3/build/Utilities/Doxygen/vtkNightlyDoc.tag:http://www.vtk.org/doc/nightly/html/" href="http://www.vtk.org/doc/nightly/html/classvtkElevationFilter.html">vtkElevationFilter</a>);</div><div class="line">}</div></div><!-- fragment --><p>Otherwise, compiling the filter will fail with a variety of error messages (depending on superclass) like</p>
<div class="fragment"><div class="line">vtkMyElevationFilter.cxx:19: error: no &#39;void vtkMyElevationFilter::CollectRevisions(std::ostream&amp;)&#39;</div><div class="line">  member function declared in class &#39;vtkMyElevationFilter&#39;</div></div><!-- fragment --><p> or</p>
<div class="fragment"><div class="line">vtkMyElevationFilterClientServer.cxx:97: error: invalid conversion from vtkPolyDataAlgorithm* to</div><div class="line">  vtkICPFilter*</div></div><!-- fragment --><h3>Mysterious Segmentation Faults in Plugins that use Custom VTK Classes</h3>
<p>This primarily concerns plugins that make calls to your own custom <code>vtkMy</code> (or whatever you called it) library of VTK extensions.</p>
<p>Symptoms:</p>
<ul>
<li>The plugin will load, but causes a segfault when you try to use it.</li>
<li>If you use a debugger you may notice that in some cases when your code calls <code>vtkClassA.MethodB</code>, what actually gets called is <code>vtkClassC.MethodD</code>, where <code>MethodB</code> is a virtual member function. This is occurs because of different vtable entries in the Paraview-internal versions of the VTK libraries.</li>
</ul>
<p>The solution is to make sure that your <code>vtkMy</code> library is compiled against ParaView's internal VTK libraries. Even if you compiled VTK and ParaView using the same VTK sources, you <em>must not</em> link against the external VTK libraries. (The linker won't complain, because it will find all the symbols it needs, but this leads to unexpected behaviour.)</p>
<p>To be explicit, when compiling your <code>vtkMy</code> library, you must set the CMake variable <code>VTK_DIR</code> to point to the <code>VTK</code> subdirectory in the directory in which you built ParaView. (On my system, CMake automatically finds VTK at <code>/usr/lib/vtk-5.2</code>, and I must change <code>VTK_DIR</code> to <code>~/source/ParaView3/build/VTK</code>.)</p>
<h3>"Is not a valid Qt plugin" in Windows</h3>
<p>Make sure that all the DLLs that your plugin depends on are on the <code>PATH</code>. If in doubt, try placing your plugin and all its dependent DLLs in the <code>bin</code> directory of your build and load it from there.</p>
<h3>The system cannot find the path specified. <code>error MSB6006: "cmd.exe" exited with code 3.</code></h3>
<p>You may get an error like this when trying to build your plugin with Visual Studio:</p>
<div class="fragment"><div class="line">1&gt;  CS Wrapping - generating vtkMyElevationFilterClientServer.cxx</div><div class="line">1&gt;  The system cannot find the path specified.</div><div class="line">1&gt;C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(151,5): error MSB6006: &quot;cmd.exe&quot; exited with code 3.</div><div class="line">1&gt;Done executing task &quot;CustomBuild&quot; -- FAILED.</div></div><!-- fragment --><p>This is caused for a mismatch between the configuration you used when building ParaView (e.g. Debug, Release, etc.) and the configuration currently chosen for building your plugin. So ensure those match.</p>
<p>The problem is caused because inside the Linker properties there are references to the <code>*.lib</code> files, including the name of the directory that matches the configuration type, which may look something like <code>C:\Users\MyUser\ParaView-v4.2.0-build\lib\Release\vtkPVAnimation-pv4.2.lib</code>. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
<!-- KW:BEGIN -->
<!-- this adds the version selection header -->
<script type="text/javascript" src="/paraview-docs/paraview-version.js"></script>
<!-- KW:END -->
</body>
</html>
