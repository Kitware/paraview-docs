<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParaView: Plugin Migration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="height: 56px;">
  <div class="pv-title-cpp title-line">
    <div class="title-line">
      <img class="pv-logo" src="paraview-logo-small.png" />
    </div>
    <div class="langSwitch title-line"></div>
  </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Plugin Migration </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>ParaView had a lot of work done to it for the 5.7 release. This involved lots of changes to the CMake Plugin API that ParaView provides to make it easier to build plugins. This document covers the major changes that need to be done in order to migrate to the new API. Specifics of the new CMake API is describled in the <a class="el" href="PluginHowto_8md.html">Plugin HowTo</a> document.</p>
<h2>Metadata</h2>
<p>Metadata is now stored in a <code>paraview.plugin</code> file rather than a <code>plugin.cmake</code> file. Instead of being actual CMake code, these files are basically the arguments to a CMake function. Not being CMake code itself allows the new build system to ensure that no extra CMake logic is going on behind its back when it's trying to gather information about the available plugins. Note that this is a default that is supported by the <a class="el" href="ParaViewPlugin_8cmake.html#a6ea474023d1f19fd119ed5090c0dbdc0">paraview_plugin_scan</a> function. It does not need to be used and the actual files can be named anything as long as the format is valid.</p>
<p>The major change is that instead of hiding the <code>pv_plugin</code> call with a CMake conditional, one may be written in the <code>CONDITION</code> argument which will be used to "hide" the plugin if necessary.</p>
<p>Plugins required by the plugin may be listed in the <code>REQUIRES_MODULES</code> list so that the module system can ensure that all of them are provided.</p>
<h2>Plugins</h2>
<p>The old <code>add_paraview_plugin</code> function has been replaced by <a class="el" href="ParaViewPlugin_8cmake.html#a51946462ba693f47705d65f5140b1e91">paraview_add_plugin</a>. The name change is because the API has been refined. It more consistently uses keyword arguments (e.g., <code>VERSION 1.0</code> rather than a hard-coded <code>1.0</code> second argument). It is also stricter in its argument parsing so that unrecognized arguments are properly called out. Major changes:</p>
<ul>
<li>The <code>DESCRIPTION</code> has been removed in preference for the <code>paraview.plugin</code> entry to remove the duplication it presented.</li>
<li>Due to the new CMake APIs for ClientServer wrapping, filters and classes used in Server Manager XML files (the old <code>SERVER_MANAGER_SOURCES</code> argument) must be in a VTK module. These may be added by simply telling the plugin to build some modules using the <code>MODULE_FILES</code> and <code>MODULES</code> arguments.</li>
<li><code>GUI_INTERFACES</code> is renamed to <code>UI_INTERFACES</code> since not all of them are actually graphical in nature.</li>
<li><code>GUI_RESOURCES</code> is renamed to <code>UI_RESOURCES</code> for the same reason.</li>
<li><code>GUI_SOURCES</code> is renamed to <code>SOURCES</code> since whether they are UI-related or not is immaterial.</li>
<li><code>UI_FILES</code> is provided for Qt's <code>.ui</code> interface files.</li>
<li>CMake's AutoGen functionality is used to manage Qt's preprocessing tools (<code>moc</code>, <code>uic</code>, and <code>rcc</code>) rather than the <code>qt5_wrap_*</code> functions. It will be enabled for the sources generated by the plugin macro automatically, but any other sources using these should set the associated variables (<code>CMAKE_AUTOMOC</code>, <code>CMAKE_AUTOUIC</code>, and <code>CMAKE_AUTORCC</code>) to ensure it is performed.</li>
<li><code>FORCE_STATIC</code> is provided to force a plugin to be built static or not.</li>
</ul>
<h2>Interfaces</h2>
<p>All of the <code>add_paraview_*</code> functions which created interfaces for use in the old <code>add_paraview_plugin(GUI_INTERFACES)</code> argument have been changed. Generally, names have changed from <code>add_paraview_X</code> to <code>paraview_plugin_add_X</code>.</p>
<p>THe positional arguments for the list of interfaces and sources have been replaced with keyword arguments (<code>INTERFACES</code> and <code>SOURCES</code> respectively). The new functions also all strictly check their arguments.</p>
<p>A full list of the new interface functions:</p>
<ul>
<li><a class="el" href="ParaViewPlugin_8cmake.html#a0c0557184d30c0a3ade022e71c58076a">paraview_plugin_add_property_widget</a></li>
<li><a class="el" href="ParaViewPlugin_8cmake.html#ab4528d835f17b4e635a66ee8aa0ebf56">paraview_plugin_add_dock_window</a></li>
<li><a class="el" href="ParaViewPlugin_8cmake.html#a7e65decdb10c541cc57cfdb6919c6dab">paraview_plugin_add_action_group</a></li>
<li><a class="el" href="ParaViewPlugin_8cmake.html#ab879ecf586a992d0d5988e47d7335f56">paraview_plugin_add_toolbar</a></li>
<li><a class="el" href="ParaViewPlugin_8cmake.html#afbadd3affdaea98090135c1f2aebfe6f">paraview_plugin_add_view_frame_action_group</a></li>
<li>paraview_plugin_add_autostart</li>
<li><a class="el" href="ParaViewPlugin_8cmake.html#a2f8e849db34522d14d6cd1a95f4bff66">paraview_plugin_add_tree_layout_strategy</a></li>
<li><a class="el" href="ParaViewPlugin_8cmake.html#abd054fe5aaa2ea4f4c417c8d0a04cd3a">paraview_plugin_add_proxy</a></li>
</ul>
<h2>Modules</h2>
<p>Modules are now required to have plugin-local classes wrapped for use in Server Manager XML files. This replaces the old <code>SERVER_MANAGER_SOURCES</code> argument. Plugin-local modules are installed right beside the plugin library so that they can be moved as a single unit.</p>
<h2>Building Plugins</h2>
<p>Building plugins now follows a similar pattern as the new VTK module system. Plugins must first be scanned using <a class="el" href="ParaViewPlugin_8cmake.html#a6ea474023d1f19fd119ed5090c0dbdc0">paraview_plugin_scan</a> to gather all of the metadata and then built using <code>paraview_plugin_build</code>.</p>
<p>Enable/disable defaults are no longer controlled by the <code>pv_plugin</code> function, but instead by the building project. Setting the <code>_paraview_plugin_default_&lt;PLUGIN_NAME&gt;</code> variable will select a default enable state for the given plugin.</p>
<h2>Installing Plugins</h2>
<p>Plugins are installed by <a class="el" href="ParaViewPlugin_8cmake.html#a51946462ba693f47705d65f5140b1e91">paraview_add_plugin</a> using information passed from <a class="el" href="ParaViewPlugin_8cmake.html#aab28f507bb36b220af325ded9735e355">paraview_plugin_build</a>, namely the <code>INSTALL_EXPORT</code>, <code>CMAKE_DESTINATION</code>, <code>PLUGINS_COMPONENT</code>, <code>TARGET_COMPONENT</code>, <code>INSTALL_HEADERS</code>, the various <code>_DESTINATION</code>, and <code>ADD_INSTALL_RPATHS</code> arguments. Sets of plugins may be made using <a class="el" href="ParaViewPlugin_8cmake.html#aab28f507bb36b220af325ded9735e355">paraview_plugin_build</a> now create an interface target (named according to the <code>TARGET</code> argument) which may be used by clients to use the plugins in the plugin set.</p>
<h2>Using plugins</h2>
<p>When building a ParaView client, plugin targets made by <a class="el" href="ParaViewPlugin_8cmake.html#aab28f507bb36b220af325ded9735e355">paraview_plugin_build</a> may be passed to the paraview_add_client function's <code>PLUGINS_TARGETS</code> argument. The client will initialize any static plugins in the set and load plugins marked for auto-loading (via the <a class="el" href="ParaViewPlugin_8cmake.html#aab28f507bb36b220af325ded9735e355">paraview_plugin_build</a> function's <code>AUTOLOAD</code> argument). The plugin target knows where its associated plugin xml file is located and it will be used by the client. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13 on Wed Aug 5 2020
</small></address>
<!-- KW:BEGIN -->
<!-- this adds the version selection header -->
<script type="text/javascript" src="/paraview-docs/paraview-version.js"></script>
<!-- KW:END -->
</body>
</html>
